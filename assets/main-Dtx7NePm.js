!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const n of t)if("childList"===n.type)for(const t of n.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)}).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();const t={};class e{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const n="propertychange";class i{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function o(t,e){return t>e?1:t<e?-1:0}function s(t,e,n){if(t[0]<=e)return 0;const i=t.length;if(e<=t[i-1])return i-1;if("function"==typeof n){for(let o=1;o<i;++o){const i=t[o];if(i===e)return o;if(i<e)return n(e,t[o-1],i)>0?o-1:o}return i-1}if(n>0){for(let n=1;n<i;++n)if(t[n]<e)return n-1;return i-1}if(n<0){for(let n=1;n<i;++n)if(t[n]<=e)return n;return i-1}for(let o=1;o<i;++o){if(t[o]==e)return o;if(t[o]<e)return t[o-1]-e<e-t[o]?o-1:o}return i-1}function r(t,e,n){for(;e<n;){const i=t[e];t[e]=t[n],t[n]=i,++e,--n}}function a(t,e){const n=Array.isArray(e)?e:[e],i=n.length;for(let o=0;o<i;o++)t[t.length]=n[o]}function h(t,e){const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function l(){return!0}function c(){return!1}function u(){}function g(t){let e,n,i,o=!1;return function(){const s=Array.prototype.slice.call(arguments);return o&&this===i&&h(s,n)||(o=!0,i=this,n=s,e=t.apply(this,arguments)),e}}function d(t){for(const e in t)delete t[e]}function p(t){let e;for(e in t)return!1;return!e}class m extends i{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const n=this.listeners_||(this.listeners_={}),i=n[t]||(n[t]=[]);i.includes(e)||i.push(e)}dispatchEvent(t){const n="string"==typeof t,i=n?t:t.type,o=this.listeners_&&this.listeners_[i];if(!o)return;const s=n?new e(t):t;s.target||(s.target=this.eventTarget_||this);const r=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});let h;i in r||(r[i]=0,a[i]=0),++r[i];for(let e=0,l=o.length;e<l;++e)if(h="handleEvent"in o[e]?o[e].handleEvent(s):o[e].call(this,s),!1===h||s.propagationStopped){h=!1;break}if(0===--r[i]){let t=a[i];for(delete a[i];t--;)this.removeEventListener(i,u);delete r[i]}return h}disposeInternal(){this.listeners_&&d(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(t,e){if(!this.listeners_)return;const n=this.listeners_[t];if(!n)return;const i=n.indexOf(e);-1!==i&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[i]=u,++this.pendingRemovals_[t]):(n.splice(i,1),0===n.length&&delete this.listeners_[t]))}}const f={CHANGE:"change",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function _(t,e,n,i,o){if(i&&i!==t&&(n=n.bind(i)),o){const i=n;n=function(){t.removeEventListener(e,n),i.apply(this,arguments)}}const s={target:t,type:e,listener:n};return t.addEventListener(e,n),s}function y(t,e,n,i){return _(t,e,n,i,!0)}function v(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),d(t))}class x extends m{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(f.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const n=t.length,i=new Array(n);for(let o=0;o<n;++o)i[o]=_(this,t[o],e);return i}return _(this,t,e)}onceInternal(t,e){let n;if(Array.isArray(t)){const i=t.length;n=new Array(i);for(let o=0;o<i;++o)n[o]=y(this,t[o],e)}else n=y(this,t,e);return e.ol_key=n,n}unInternal(t,e){const n=e.ol_key;if(n)!function(t){if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)v(t[e]);else v(t)}(n);else if(Array.isArray(t))for(let i=0,o=t.length;i<o;++i)this.removeEventListener(t[i],e);else this.removeEventListener(t,e)}}function w(){throw new Error("Unimplemented abstract method.")}x.prototype.on,x.prototype.once,x.prototype.un;let C=0;function T(t){return t.ol_uid||(t.ol_uid=String(++C))}class D extends e{constructor(t,e,n){super(t),this.key=e,this.oldValue=n}}class b extends x{constructor(t){super(),this.on,this.once,this.un,T(this),this.values_=null,void 0!==t&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,e){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new D(i,t,e)),i=n,this.hasListener(i)&&this.dispatchEvent(new D(i,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,n){const i=this.values_||(this.values_={});if(n)i[t]=e;else{const n=i[t];i[t]=e,n!==e&&this.notify(t,n)}}setProperties(t,e){for(const n in t)this.set(n,t[n],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const n=this.values_[t];delete this.values_[t],p(this.values_)&&(this.values_=null),e||this.notify(t,n)}}}const S="add",I="remove",E="length";class M extends e{constructor(t,e,n){super(t),this.element=e,this.index=n}}class L extends b{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let n=0,i=this.array_.length;n<i;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,n=t.length;e<n;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let n=0,i=e.length;n<i;++n)t(e[n],n,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(E)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new M(S,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let n=0,i=e.length;n<i;++n)if(e[n]===t)return this.removeAt(n)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new M(I,e,t)),e}setAt(t,e){if(t>=this.getLength())return void this.insertAt(t,e);if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new M(I,n,t)),this.dispatchEvent(new M(S,e,t))}updateLength_(){this.set(E,this.array_.length)}assertUnique_(t,e){for(let n=0,i=this.array_.length;n<i;++n)if(this.array_[n]===t&&n!==e)throw new Error("Duplicate item added to a unique collection")}}const N="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",P=N.includes("firefox");N.includes("safari")&&!N.includes("chrom")&&(N.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(N));const k=N.includes("webkit")&&!N.includes("edge"),R=N.includes("macintosh"),F="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,A="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,G="undefined"!=typeof Image&&Image.prototype.decode,H="function"==typeof createImageBitmap,O=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(e){}return t}();function V(t,e){if(!t)throw new Error(e)}function K(t,e){const n=e[0],i=e[1];return e[0]=t[0]*n+t[2]*i+t[4],e[1]=t[1]*n+t[3]*i+t[5],e}function W(t,e,n,i,o,s,r,a){const h=Math.sin(s),l=Math.cos(s);return t[0]=i*l,t[1]=o*h,t[2]=-i*h,t[3]=o*l,t[4]=r*i*l-a*i*h+e,t[5]=r*o*h+a*o*l+n,t}function B(t,e){const n=(i=e)[0]*i[3]-i[1]*i[2];var i;V(0!==n,"Transformation matrix cannot be inverted");const o=e[0],s=e[1],r=e[2],a=e[3],h=e[4],l=e[5];return t[0]=a/n,t[1]=-s/n,t[2]=-r/n,t[3]=o/n,t[4]=(r*l-a*h)/n,t[5]=-(o*l-s*h)/n,t}let X;function z(t){const e="matrix("+t.join(", ")+")";if(A)return e;const n=X||(X=document.createElement("div"));return n.style.transform=e,n.style.transform}new Array(6);const j=0,Q=1,q=2,Y=4,U=8,Z=16;function J(t){const e=at();for(let n=0,i=t.length;n<i;++n)pt(e,t[n]);return e}function tt(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function et(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function nt(t,e,n){let i,o;return i=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0,o=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0,i*i+o*o}function it(t,e){return st(t,e[0],e[1])}function ot(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function st(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function rt(t,e){const n=t[0],i=t[1],o=t[2],s=t[3],r=e[0],a=e[1];let h=j;return r<n?h|=Z:r>o&&(h|=Y),a<i?h|=U:a>s&&(h|=q),h===j&&(h=Q),h}function at(){return[1/0,1/0,-1/0,-1/0]}function ht(t,e,n,i,o){return o?(o[0]=t,o[1]=e,o[2]=n,o[3]=i,o):[t,e,n,i]}function lt(t){return ht(1/0,1/0,-1/0,-1/0,t)}function ct(t,e){const n=t[0],i=t[1];return ht(n,i,n,i,e)}function ut(t,e,n,i,o){return mt(lt(o),t,e,n,i)}function gt(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function dt(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function pt(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function mt(t,e,n,i,o){for(;n<i;n+=o)ft(t,e[n],e[n+1]);return t}function ft(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function _t(t,e){let n;return n=e(yt(t)),n||(n=e(vt(t)),n||(n=e(bt(t)),n||(n=e(Dt(t)),n||!1)))}function yt(t){return[t[0],t[1]]}function vt(t){return[t[2],t[1]]}function xt(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function wt(t,e,n,i,o){const[s,r,a,h,l,c,u,g]=function(t,e,n,i){const o=e*i[0]/2,s=e*i[1]/2,r=Math.cos(n),a=Math.sin(n),h=o*r,l=o*a,c=s*r,u=s*a,g=t[0],d=t[1];return[g-h+u,d-l-c,g-h-u,d-l+c,g+h-u,d+l+c,g+h+u,d+l-c,g-h+u,d-l-c]}(t,e,n,i);return ht(Math.min(s,a,l,u),Math.min(r,h,c,g),Math.max(s,a,l,u),Math.max(r,h,c,g),o)}function Ct(t){return t[3]-t[1]}function Tt(t,e,n){const i=n||[1/0,1/0,-1/0,-1/0];return It(t,e)?(t[0]>e[0]?i[0]=t[0]:i[0]=e[0],t[1]>e[1]?i[1]=t[1]:i[1]=e[1],t[2]<e[2]?i[2]=t[2]:i[2]=e[2],t[3]<e[3]?i[3]=t[3]:i[3]=e[3]):lt(i),i}function Dt(t){return[t[0],t[3]]}function bt(t){return[t[2],t[3]]}function St(t){return t[2]-t[0]}function It(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Et(t){return t[2]<t[0]||t[3]<t[1]}function Mt(t,e){const n=e.getExtent(),i=xt(t);if(e.canWrapX()&&(i[0]<n[0]||i[0]>=n[2])){const e=St(n),o=Math.floor((i[0]-n[0])/e)*e;t[0]-=o,t[2]-=o}return t}const Lt={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]},Nt={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"],whitepoint:{2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}}};Nt.max=Nt.whitepoint[2].D65,Nt.rgb=function(t,e){e=e||Nt.whitepoint[2].E;var n,i,o,s=t[0]/e[0],r=t[1]/e[1],a=t[2]/e[2];return i=-.96924363628087*s+1.87596750150772*r+.041555057407175*a,o=.055630079696993*s+-.20397695888897*r+1.056971514242878*a,n=(n=3.240969941904521*s+-1.537383177570093*r+-.498610760293*a)>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*=12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*=12.92,[255*(n=Math.min(Math.max(0,n),1)),255*(i=Math.min(Math.max(0,i),1)),255*(o=Math.min(Math.max(0,o),1))]},Lt.xyz=function(t,e){var n=t[0]/255,i=t[1]/255,o=t[2]/255,s=.21263900587151*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.71516867876775*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.072192315360733*(o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92),r=.019330818715591*n+.11919477979462*i+.95053215224966*o;return[(.41239079926595*n+.35758433938387*i+.18048078840183*o)*(e=e||Nt.whitepoint[2].E)[0],s*e[1],r*e[2]]};var Pt={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(t,e,n){var i,o,s,r,a,h,l,c,u;if(s=t[0],r=t[1],a=t[2],0===s)return[0,0,0];return e=e||"D65",n=n||2,i=r/(13*s)+4*(l=Nt.whitepoint[n][e][0])/(l+15*(c=Nt.whitepoint[n][e][1])+3*(u=Nt.whitepoint[n][e][2]))||0,o=a/(13*s)+9*c/(l+15*c+3*u)||0,[9*(h=s>8?c*Math.pow((s+16)/116,3):c*s*.0011070564598794539)*i/(4*o)||0,h,h*(12-3*i-20*o)/(4*o)||0]}};Nt.luv=function(t,e,n){var i,o,s,r,a,h,l,c,u,g,d;e=e||"D65",n=n||2,g=4*(l=Nt.whitepoint[n][e][0])/(l+15*(c=Nt.whitepoint[n][e][1])+3*(u=Nt.whitepoint[n][e][2])),d=9*c/(l+15*c+3*u),i=4*(r=t[0])/(r+15*(a=t[1])+3*(h=t[2]))||0,o=9*a/(r+15*a+3*h)||0;var p=a/c;return[s=p<=.008856451679035631?903.2962962962961*p:116*Math.pow(p,1/3)-16,13*s*(i-g),13*s*(o-d)]};var kt={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(t){var e,n=t[0],i=t[1];return e=t[2]/360*2*Math.PI,[n,i*Math.cos(e),i*Math.sin(e)]},xyz:function(t){return Pt.xyz(kt.luv(t))}};Pt.lchuv=function(t){var e=t[0],n=t[1],i=t[2],o=Math.sqrt(n*n+i*i),s=360*Math.atan2(i,n)/2/Math.PI;return s<0&&(s+=360),[e,o,s]},Nt.lchuv=function(t){return Pt.lchuv(Nt.luv(t))};const Rt={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};for(const $ in Rt)Object.freeze(Rt[$]);const Ft=Object.freeze(Rt);var At={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};var Gt={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(t){var e,n,i,o,s,r=t[0]/360,a=t[1]/100,h=t[2]/100,l=0;if(0===a)return[s=255*h,s,s];for(e=2*h-(n=h<.5?h*(1+a):h+a-h*a),o=[0,0,0];l<3;)(i=r+1/3*-(l-1))<0?i++:i>1&&i--,s=6*i<1?e+6*(n-e)*i:2*i<1?n:3*i<2?e+(n-e)*(2/3-i)*6:e,o[l++]=255*s;return o}};function Ht(t){var e;Array.isArray(t)&&t.raw&&(t=String.raw(...arguments)),t instanceof Number&&(t=+t);var n=function(t){var e,n,i,o,s=[],r=1;if("number"==typeof t)return{space:"rgb",values:[t>>>16,(65280&t)>>>8,255&t],alpha:1};if("number"==typeof t)return{space:"rgb",values:[t>>>16,(65280&t)>>>8,255&t],alpha:1};if(t=String(t).toLowerCase(),Ft[t])s=Ft[t].slice(),o="rgb";else if("transparent"===t)r=0,o="rgb",s=[0,0,0];else if("#"===t[0]){var a=t.slice(1),h=a.length;r=1,h<=4?(s=[parseInt(a[0]+a[0],16),parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16)],4===h&&(r=parseInt(a[3]+a[3],16)/255)):(s=[parseInt(a[0]+a[1],16),parseInt(a[2]+a[3],16),parseInt(a[4]+a[5],16)],8===h&&(r=parseInt(a[6]+a[7],16)/255)),s[0]||(s[0]=0),s[1]||(s[1]=0),s[2]||(s[2]=0),o="rgb"}else if(i=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(t)){var l=i[1],c="cmyk"===(o=l.replace(/a$/,""))?4:"gray"===o?1:3;s=i[2].trim().split(/\s*[,\/]\s*|\s+/),"color"===o&&(o=s.shift()),r=(s=s.map(function(t,e){if("%"===t[t.length-1])return t=parseFloat(t)/100,3===e?t:"rgb"===o?255*t:"h"===o[0]?100*t:"l"!==o[0]||e?"lab"===o?125*t:"lch"===o?e<2?150*t:360*t:"o"!==o[0]||e?"oklab"===o?.4*t:"oklch"===o?e<2?.4*t:360*t:t:t:100*t;if("h"===o[e]||2===e&&"h"===o[o.length-1]){if(void 0!==At[t])return At[t];if(t.endsWith("deg"))return parseFloat(t);if(t.endsWith("turn"))return 360*parseFloat(t);if(t.endsWith("grad"))return 360*parseFloat(t)/400;if(t.endsWith("rad"))return 180*parseFloat(t)/Math.PI}return"none"===t?0:parseFloat(t)})).length>c?s.pop():1}else/[0-9](?:\s|\/|,)/.test(t)&&(s=t.match(/([0-9]+)/g).map(function(t){return parseFloat(t)}),o=(null==(n=null==(e=t.match(/([a-z])/gi))?void 0:e.join(""))?void 0:n.toLowerCase())||"rgb");return{space:o,values:s,alpha:r}}(t);if(!n.space)return[];const i="h"===n.space[0]?Gt.min:Lt.min,o="h"===n.space[0]?Gt.max:Lt.max;return(e=Array(3))[0]=Math.min(Math.max(n.values[0],i[0]),o[0]),e[1]=Math.min(Math.max(n.values[1],i[1]),o[1]),e[2]=Math.min(Math.max(n.values[2],i[2]),o[2]),"h"===n.space[0]&&(e=Gt.rgb(e)),e.push(Math.min(Math.max(n.alpha,0),1)),e}function Ot(t,e,n){return Math.min(Math.max(t,e),n)}function Vt(t,e,n,i,o,s){const r=o-n,a=s-i;if(0!==r||0!==a){const h=((t-n)*r+(e-i)*a)/(r*r+a*a);h>1?(n=o,i=s):h>0&&(n+=r*h,i+=a*h)}return Kt(t,e,n,i)}function Kt(t,e,n,i){const o=n-t,s=i-e;return o*o+s*s}function Wt(t){return t*Math.PI/180}function Bt(t,e){const n=t%e;return n*e<0?n+e:n}function Xt(t,e,n){return t+n*(e-t)}function zt(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}function jt(t,e){return Math.ceil(zt(t,e))}function Qt(t){return"string"==typeof t?t:ee(t)}Lt.hsl=function(t){var e,n,i=t[0]/255,o=t[1]/255,s=t[2]/255,r=Math.min(i,o,s),a=Math.max(i,o,s),h=a-r;return a===r?e=0:i===a?e=(o-s)/h:o===a?e=2+(s-i)/h:s===a&&(e=4+(i-o)/h),(e=Math.min(60*e,360))<0&&(e+=360),n=(r+a)/2,[e,100*(a===r?0:n<=.5?h/(a+r):h/(2-a-r)),100*n]};const qt={};let Yt=0;function Ut(t){if(4===t.length)return t;const e=t.slice();return e[3]=1,e}function Zt(t){const e=Nt.lchuv(Lt.xyz(t));return e[3]=t[3],e}function $t(t){if(qt.hasOwnProperty(t))return qt[t];if(Yt>=1024){let t=0;for(const e in qt)3&t++||(delete qt[e],--Yt)}const e=Ht(t);if(4!==e.length)throw new Error('Failed to parse "'+t+'" as color');for(const n of e)if(isNaN(n))throw new Error('Failed to parse "'+t+'" as color');return te(e),qt[t]=e,++Yt,e}function Jt(t){return Array.isArray(t)?t:$t(t)}function te(t){return t[0]=Ot(t[0]+.5|0,0,255),t[1]=Ot(t[1]+.5|0,0,255),t[2]=Ot(t[2]+.5|0,0,255),t[3]=Ot(t[3],0,1),t}function ee(t){let e=t[0];e!=(0|e)&&(e=e+.5|0);let n=t[1];n!=(0|n)&&(n=n+.5|0);let i=t[2];i!=(0|i)&&(i=i+.5|0);return"rgba("+e+","+n+","+i+","+(void 0===t[3]?1:Math.round(100*t[3])/100)+")"}function ne(t,e,n){return e+":"+t+":"+(n?Qt(n):"null")}const ie=new class{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const n=this.cache_[e];3&t++||n.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}}get(t,e,n){const i=ne(t,e,n);return i in this.cache_?this.cache_[i]:null}set(t,e,n,i){const o=ne(t,e,n);this.cache_[o]=i,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}},oe="opacity",se="visible",re="extent",ae="zIndex",he="maxResolution",le="minResolution",ce="maxZoom",ue="minZoom",ge="source",de="map";class pe extends b{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);"object"==typeof t.properties&&(delete e.properties,Object.assign(e,t.properties)),e[oe]=void 0!==t.opacity?t.opacity:1,V("number"==typeof e[oe],"Layer opacity must be a number"),e[se]=void 0===t.visible||t.visible,e[ae]=t.zIndex,e[he]=void 0!==t.maxResolution?t.maxResolution:1/0,e[le]=void 0!==t.minResolution?t.minResolution:0,e[ue]=void 0!==t.minZoom?t.minZoom:-1/0,e[ce]=void 0!==t.maxZoom?t.maxZoom:1/0,this.className_=void 0!==e.className?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=Ot(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n||e.managed?n:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return w()}getLayerStatesArray(t){return w()}getExtent(){return this.get(re)}getMaxResolution(){return this.get(he)}getMinResolution(){return this.get(le)}getMinZoom(){return this.get(ue)}getMaxZoom(){return this.get(ce)}getOpacity(){return this.get(oe)}getSourceState(){return w()}getVisible(){return this.get(se)}getZIndex(){return this.get(ae)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(re,t)}setMaxResolution(t){this.set(he,t)}setMinResolution(t){this.set(le,t)}setMaxZoom(t){this.set(ce,t)}setMinZoom(t){this.set(ue,t)}setOpacity(t){V("number"==typeof t,"Layer opacity must be a number"),this.set(oe,t)}setVisible(t){this.set(se,t)}setZIndex(t){this.set(ae,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const me="prerender",fe="postrender",_e="precompose",ye="postcompose",ve="rendercomplete",xe=0,we=1,Ce={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},Te={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class De{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Te[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const be=6378137,Se=Math.PI*be,Ie=[-Se,-Se,Se,Se],Ee=[-180,-85,180,85],Me=be*Math.log(Math.tan(Math.PI/2));class Le extends De{constructor(t){super({code:t,units:"m",extent:Ie,global:!0,worldExtent:Ee,getPointResolution:function(t,e){return t/Math.cosh(e[1]/be)}})}}const Ne=[new Le("EPSG:3857"),new Le("EPSG:102100"),new Le("EPSG:102113"),new Le("EPSG:900913"),new Le("http://www.opengis.net/def/crs/EPSG/0/3857"),new Le("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Pe(t,e,n){const i=t.length;n=n>1?n:2,void 0===e&&(e=n>2?t.slice():new Array(i));for(let o=0;o<i;o+=n){e[o]=Se*t[o]/180;let n=be*Math.log(Math.tan(Math.PI*(+t[o+1]+90)/360));n>Me?n=Me:n<-Me&&(n=-Me),e[o+1]=n}return e}function ke(t,e,n){const i=t.length;n=n>1?n:2,void 0===e&&(e=n>2?t.slice():new Array(i));for(let o=0;o<i;o+=n)e[o]=180*t[o]/Se,e[o+1]=360*Math.atan(Math.exp(t[o+1]/be))/Math.PI-90;return e}const Re=[-180,-90,180,90],Fe=6378137*Math.PI/180;class Ae extends De{constructor(t,e){super({code:t,units:"degrees",extent:Re,axisOrientation:e,global:!0,metersPerUnit:Fe,worldExtent:Re})}}const Ge=[new Ae("CRS:84"),new Ae("EPSG:4326","neu"),new Ae("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ae("urn:ogc:def:crs:OGC:2:84"),new Ae("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Ae("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Ae("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let He={};let Oe={};function Ve(t,e,n){const i=t.getCode(),o=e.getCode();i in Oe||(Oe[i]={}),Oe[i][o]=n}function Ke(t,e){let n=!0;for(let i=t.length-1;i>=0;--i)if(t[i]!=e[i]){n=!1;break}return n}function We(t,e){const n=Math.cos(e),i=Math.sin(e),o=t[0]*n-t[1]*i,s=t[1]*n+t[0]*i;return t[0]=o,t[1]=s,t}function Be(t,e){const n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}function Xe(t,e){return Math.sqrt(Be(t,e))}function ze(t,e){if(e.canWrapX()){const n=St(e.getExtent()),i=function(t,e,n){const i=e.getExtent();let o=0;e.canWrapX()&&(t[0]<i[0]||t[0]>i[2])&&(n=n||St(i),o=Math.floor((t[0]-i[0])/n));return o}(t,e,n);i&&(t[0]-=i*n)}return t}function je(t,e,n){n=n||6371008.8;const i=Wt(t[1]),o=Wt(e[1]),s=(o-i)/2,r=Wt(e[0]-t[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(r)*Math.sin(r)*Math.cos(i)*Math.cos(o);return 2*n*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function Qe(...t){console.warn(...t)}let qe=!0;function Ye(t,e){if(void 0!==e)for(let n=0,i=t.length;n<i;++n)e[n]=t[n];else e=t.slice();return e}function Ue(t,e){if(void 0!==e&&t!==e){for(let n=0,i=t.length;n<i;++n)e[n]=t[n];t=e}return t}function Ze(t){!function(t,e){He[t]=e}(t.getCode(),t),Ve(t,t,Ye)}function $e(t){return"string"==typeof t?He[e=t]||He[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function Je(t,e,n,i){let o;const s=(t=$e(t)).getPointResolutionFunc();if(s){if(o=s(e,n),i&&i!==t.getUnits()){const e=t.getMetersPerUnit();e&&(o=o*e/Te[i])}}else{const s=t.getUnits();if("degrees"==s&&!i||"degrees"==i)o=e;else{const r=on(t,$e("EPSG:4326"));if(r===Ue&&"degrees"!==s)o=e*t.getMetersPerUnit();else{let t=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];t=r(t,t,2);o=(je(t.slice(0,2),t.slice(2,4))+je(t.slice(4,6),t.slice(6,8)))/2}const a=i?Te[i]:t.getMetersPerUnit();void 0!==a&&(o/=a)}}return o}function tn(t){!function(t){t.forEach(Ze)}(t),t.forEach(function(e){t.forEach(function(t){e!==t&&Ve(e,t,Ye)})})}function en(t,e){return t?"string"==typeof t?$e(t):t:$e(e)}function nn(t,e){if(t===e)return!0;const n=t.getUnits()===e.getUnits();if(t.getCode()===e.getCode())return n;return on(t,e)===Ye&&n}function on(t,e){let n=function(t,e){let n;return t in Oe&&e in Oe[t]&&(n=Oe[t][e]),n}(t.getCode(),e.getCode());return n||(n=Ue),n}function sn(t,e){return on($e(t),$e(e))}function rn(t,e){return t}function an(t,e){return qe&&!Ke(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(qe=!1,Qe("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t}function hn(t,e){return t}function ln(t,e){return t}var cn,un,gn;function dn(t,e,n){return function(i,o,s,r,a){if(!i)return;if(!o&&!e)return i;const h=e?0:s[0]*o,l=e?0:s[1]*o,c=a?a[0]:0,u=a?a[1]:0;let g=t[0]+h/2+c,d=t[2]-h/2+c,p=t[1]+l/2+u,m=t[3]-l/2+u;g>d&&(g=(d+g)/2,d=g),p>m&&(p=(m+p)/2,m=p);let f=Ot(i[0],g,d),_=Ot(i[1],p,m);if(r&&n&&o){const t=30*o;f+=-t*Math.log(1+Math.max(0,g-i[0])/t)+t*Math.log(1+Math.max(0,i[0]-d)/t),_+=-t*Math.log(1+Math.max(0,p-i[1])/t)+t*Math.log(1+Math.max(0,i[1]-m)/t)}return[f,_]}}function pn(t){return t}function mn(t,e,n,i){const o=St(e)/n[0],s=Ct(e)/n[1];return i?Math.min(t,Math.max(o,s)):Math.min(t,Math.min(o,s))}function fn(t,e,n){let i=Math.min(t,e);return i*=Math.log(1+50*Math.max(0,t/e-1))/50+1,n&&(i=Math.max(i,n),i/=Math.log(1+50*Math.max(0,n/t-1))/50+1),Ot(i,n/2,2*e)}function _n(t,e,n,i,o){return n=void 0===n||n,function(s,r,a,h){if(void 0!==s){const r=i?mn(t,i,a,o):t;return n&&h?fn(s,r,e):Ot(s,e,r)}}}function yn(t){if(void 0!==t)return 0}function vn(t){if(void 0!==t)return t}function xn(t){return 1-function(t){return Math.pow(t,3)}(1-t)}function wn(t){return 3*t*t-2*t*t*t}function Cn(t){return t}function Tn(t,e,n,i,o,s){s=s||[];let r=0;for(let a=e;a<n;a+=i){const e=t[a],n=t[a+1];s[r++]=o[0]*e+o[2]*n+o[4],s[r++]=o[1]*e+o[3]*n+o[5]}return s&&s.length!=r&&(s.length=r),s}function Dn(t,e,n,i,o,s,r){r=r||[];const a=Math.cos(o),h=Math.sin(o),l=s[0],c=s[1];let u=0;for(let g=e;g<n;g+=i){const e=t[g]-l,n=t[g+1]-c;r[u++]=l+e*a-n*h,r[u++]=c+e*h+n*a;for(let o=g+2;o<g+i;++o)r[u++]=t[o]}return r&&r.length!=u&&(r.length=u),r}tn(Ne),tn(Ge),cn=Ne,un=Pe,gn=ke,Ge.forEach(function(t){cn.forEach(function(e){Ve(t,e,un),Ve(e,t,gn)})});const bn=[1,0,0,1,0,0];class Sn extends b{constructor(){super(),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=g((t,e,n)=>{if(!n)return this.getSimplifiedGeometry(e);const i=this.clone();return i.applyTransform(n),i.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return w()}closestPointXY(t,e,n,i){return w()}containsXY(t,e){const n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return w()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&lt(t),this.extentRevision_=this.getRevision()}return function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)}rotate(t,e){w()}scale(t,e,n){w()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return w()}getType(){return w()}applyTransform(t){w()}intersectsExtent(t){return w()}translate(t,e){w()}transform(t,e){const n=$e(t),i="tile-pixels"==n.getUnits()?function(t,i,o){const s=n.getExtent(),r=n.getWorldExtent(),a=Ct(r)/Ct(s);return W(bn,r[0],r[3],a,-a,0,0,0),Tn(t,0,t.length,o,bn,i),sn(n,e)(t,i,o)}:sn(n,e);return this.applyTransform(i),this}}class In extends Sn{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(t){return ut(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return w()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=Mn(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){w()}setLayout(t,e,n){let i;if(t)i=Mn(t);else{for(let t=0;t<n;++t){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}i=e.length,t=En(i)}this.layout=t,this.stride=i}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const n=this.getFlatCoordinates();if(n){const i=this.getStride();Dn(n,0,n.length,i,t,e,n),this.changed()}}scale(t,e,n){void 0===e&&(e=t),n||(n=xt(this.getExtent()));const i=this.getFlatCoordinates();if(i){const o=this.getStride();!function(t,e,n,i,o,s,r,a){a=a||[];const h=r[0],l=r[1];let c=0;for(let u=e;u<n;u+=i){const e=t[u]-h,n=t[u+1]-l;a[c++]=h+o*e,a[c++]=l+s*n;for(let o=u+2;o<u+i;++o)a[c++]=t[o]}a&&a.length!=c&&(a.length=c)}(i,0,i.length,o,t,e,n,i),this.changed()}}translate(t,e){const n=this.getFlatCoordinates();if(n){const i=this.getStride();!function(t,e,n,i,o,s,r){r=r||[];let a=0;for(let h=e;h<n;h+=i){r[a++]=t[h]+o,r[a++]=t[h+1]+s;for(let e=h+2;e<h+i;++e)r[a++]=t[e]}r&&r.length!=a&&(r.length=a)}(n,0,n.length,i,t,e,n),this.changed()}}}function En(t){let e;return 2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM"),e}function Mn(t){let e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}function Ln(t,e,n,i,o,s,r){const a=t[e],h=t[e+1],l=t[n]-a,c=t[n+1]-h;let u;if(0===l&&0===c)u=e;else{const g=((o-a)*l+(s-h)*c)/(l*l+c*c);if(g>1)u=n;else{if(g>0){for(let o=0;o<i;++o)r[o]=Xt(t[e+o],t[n+o],g);return void(r.length=i)}u=e}}for(let g=0;g<i;++g)r[g]=t[u+g];r.length=i}function Nn(t,e,n,i,o){let s=t[e],r=t[e+1];for(e+=i;e<n;e+=i){const n=t[e],i=t[e+1],a=Kt(s,r,n,i);a>o&&(o=a),s=n,r=i}return o}function Pn(t,e,n,i,o){for(let s=0,r=n.length;s<r;++s){const r=n[s];o=Nn(t,e,r,i,o),e=r}return o}function kn(t,e,n,i,o,s,r,a,h,l,c){if(e==n)return l;let u,g;if(0===o){if(g=Kt(r,a,t[e],t[e+1]),g<l){for(u=0;u<i;++u)h[u]=t[e+u];return h.length=i,g}return l}c=c||[NaN,NaN];let d=e+i;for(;d<n;)if(Ln(t,d-i,d,i,r,a,c),g=Kt(r,a,c[0],c[1]),g<l){for(l=g,u=0;u<i;++u)h[u]=c[u];h.length=i,d+=i}else d+=i*Math.max((Math.sqrt(g)-Math.sqrt(l))/o|0,1);if(s&&(Ln(t,n-i,e,i,r,a,c),g=Kt(r,a,c[0],c[1]),g<l)){for(l=g,u=0;u<i;++u)h[u]=c[u];h.length=i}return l}function Rn(t,e,n,i,o,s,r,a,h,l,c){c=c||[NaN,NaN];for(let u=0,g=n.length;u<g;++u){const g=n[u];l=kn(t,e,g,i,o,s,r,a,h,l,c),e=g}return l}function Fn(t,e,n,i){for(let o=0,s=n.length;o<s;++o)t[e++]=n[o];return e}function An(t,e,n,i){for(let o=0,s=n.length;o<s;++o){const s=n[o];for(let n=0;n<i;++n)t[e++]=s[n]}return e}function Gn(t,e,n,i,o){o=o||[];let s=0;for(let r=0,a=n.length;r<a;++r){const a=An(t,e,n[r],i);o[s++]=a,e=a}return o.length=s,o}function Hn(t,e,n,i,o){o=o||[];let s=0;for(let r=0,a=n.length;r<a;++r){const a=Gn(t,e,n[r],i,o[s]);0===a.length&&(a[0]=e),o[s++]=a,e=a[a.length-1]}return o.length=s,o}function On(t,e,n,i,o,s,r){const a=(n-e)/i;if(a<3){for(;e<n;e+=i)s[r++]=t[e],s[r++]=t[e+1];return r}const h=new Array(a);h[0]=1,h[a-1]=1;const l=[e,n-i];let c=0;for(;l.length>0;){const n=l.pop(),s=l.pop();let r=0;const a=t[s],u=t[s+1],g=t[n],d=t[n+1];for(let e=s+i;e<n;e+=i){const n=Vt(t[e],t[e+1],a,u,g,d);n>r&&(c=e,r=n)}r>o&&(h[(c-e)/i]=1,s+i<c&&l.push(s,c),c+i<n&&l.push(c,n))}for(let u=0;u<a;++u)h[u]&&(s[r++]=t[e+u*i],s[r++]=t[e+u*i+1]);return r}function Vn(t,e,n,i,o,s,r,a){for(let h=0,l=n.length;h<l;++h){const l=n[h];r=On(t,e,l,i,o,s,r),a.push(r),e=l}return r}function Kn(t,e){return e*Math.round(t/e)}function Wn(t,e,n,i,o,s,r){if(e==n)return r;let a,h,l=Kn(t[e],o),c=Kn(t[e+1],o);e+=i,s[r++]=l,s[r++]=c;do{if(a=Kn(t[e],o),h=Kn(t[e+1],o),(e+=i)==n)return s[r++]=a,s[r++]=h,r}while(a==l&&h==c);for(;e<n;){const n=Kn(t[e],o),u=Kn(t[e+1],o);if(e+=i,n==a&&u==h)continue;const g=a-l,d=h-c,p=n-l,m=u-c;g*m==d*p&&(g<0&&p<g||g==p||g>0&&p>g)&&(d<0&&m<d||d==m||d>0&&m>d)?(a=n,h=u):(s[r++]=a,s[r++]=h,l=a,c=h,a=n,h=u)}return s[r++]=a,s[r++]=h,r}function Bn(t,e,n,i,o,s,r,a){for(let h=0,l=n.length;h<l;++h){const l=n[h];r=Wn(t,e,l,i,o,s,r),a.push(r),e=l}return r}function Xn(t,e,n,i,o){o=void 0!==o?o:[];let s=0;for(let r=e;r<n;r+=i)o[s++]=t.slice(r,r+i);return o.length=s,o}function zn(t,e,n,i,o){o=void 0!==o?o:[];let s=0;for(let r=0,a=n.length;r<a;++r){const a=n[r];o[s++]=Xn(t,e,a,i,o[s]),e=a}return o.length=s,o}function jn(t,e,n,i,o){o=void 0!==o?o:[];let s=0;for(let r=0,a=n.length;r<a;++r){const a=n[r];o[s++]=1===a.length&&a[0]===e?[]:zn(t,e,a,i,o[s]),e=a[a.length-1]}return o.length=s,o}function Qn(t,e,n,i){let o=0,s=t[n-i],r=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];o+=r*n-s*i,s=n,r=i}return o/2}function qn(t,e,n,i){let o=0;for(let s=0,r=n.length;s<r;++s){const r=n[s];o+=Qn(t,e,r,i),e=r}return o}class Yn extends In{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}clone(){return new Yn(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,n,i){return i<nt(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Nn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),kn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,i))}getArea(){return Qn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Xn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=On(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Yn(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=An(this.flatCoordinates,0,t,this.stride),this.changed()}}class Un extends In{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new Un(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){const o=this.flatCoordinates,s=Kt(t,e,o[0],o[1]);if(s<i){const t=this.stride;for(let e=0;e<t;++e)n[e]=o[e];return n.length=t,s}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(t){return ct(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return st(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Fn(this.flatCoordinates,0,t,this.stride),this.changed()}}function Zn(t,e,n,i,o){return!_t(o,function(o){return!$n(t,e,n,i,o[0],o[1])})}function $n(t,e,n,i,o,s){let r=0,a=t[n-i],h=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];h<=s?i>s&&(n-a)*(s-h)-(o-a)*(i-h)>0&&r++:i<=s&&(n-a)*(s-h)-(o-a)*(i-h)<0&&r--,a=n,h=i}return 0!==r}function Jn(t,e,n,i,o,s){if(0===n.length)return!1;if(!$n(t,e,n[0],i,o,s))return!1;for(let r=1,a=n.length;r<a;++r)if($n(t,n[r-1],n[r],i,o,s))return!1;return!0}function ti(t,e,n,i,s,r,a){let h,l,c,u,g,d,p;const m=s[r+1],f=[];for(let o=0,v=n.length;o<v;++o){const s=n[o];for(u=t[s-i],d=t[s-i+1],h=e;h<s;h+=i)g=t[h],p=t[h+1],(m<=d&&p<=m||d<=m&&m<=p)&&(c=(m-d)/(p-d)*(g-u)+u,f.push(c)),u=g,d=p}let _=NaN,y=-1/0;for(f.sort(o),u=f[0],h=1,l=f.length;h<l;++h){g=f[h];const o=Math.abs(g-u);o>y&&(c=(u+g)/2,Jn(t,e,n,i,c,m)&&(_=c,y=o)),u=g}return isNaN(_)&&(_=s[r]),a?(a.push(_,m,y),a):[_,m,y]}function ei(t,e,n,i,o){let s=[];for(let r=0,a=n.length;r<a;++r){const a=n[r];s=ti(t,e,a,i,o,2*r,s),e=a[a.length-1]}return s}function ni(t,e,n,i,o){let s;for(e+=i;e<n;e+=i)if(s=o(t.slice(e-i,e),t.slice(e,e+i)),s)return s;return!1}function ii(t,e,n,i,o){const s=mt([1/0,1/0,-1/0,-1/0],t,e,n,i);return!!It(o,s)&&(!!ot(o,s)||(s[0]>=o[0]&&s[2]<=o[2]||(s[1]>=o[1]&&s[3]<=o[3]||ni(t,e,n,i,function(t,e){return function(t,e,n){let i=!1;const o=rt(t,e),s=rt(t,n);if(o===Q||s===Q)i=!0;else{const r=t[0],a=t[1],h=t[2],l=t[3],c=e[0],u=e[1],g=n[0],d=n[1],p=(d-u)/(g-c);let m,f;s&q&&!(o&q)&&(m=g-(d-l)/p,i=m>=r&&m<=h),i||!(s&Y)||o&Y||(f=d-(g-h)*p,i=f>=a&&f<=l),i||!(s&U)||o&U||(m=g-(d-a)/p,i=m>=r&&m<=h),i||!(s&Z)||o&Z||(f=d-(g-r)*p,i=f>=a&&f<=l)}return i}(o,t,e)}))))}function oi(t,e,n,i,o){if(!function(t,e,n,i,o){return!!(ii(t,e,n,i,o)||$n(t,e,n,i,o[0],o[1])||$n(t,e,n,i,o[0],o[3])||$n(t,e,n,i,o[2],o[1])||$n(t,e,n,i,o[2],o[3]))}(t,e,n[0],i,o))return!1;if(1===n.length)return!0;for(let s=1,r=n.length;s<r;++s)if(Zn(t,n[s-1],n[s],i,o)&&!ii(t,n[s-1],n[s],i,o))return!1;return!0}function si(t,e,n,i){for(;e<n-i;){for(let o=0;o<i;++o){const s=t[e+o];t[e+o]=t[n-i+o],t[n-i+o]=s}e+=i,n-=i}}function ri(t,e,n,i){let o=0,s=t[n-i],r=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];o+=(n-s)*(i+r),s=n,r=i}return 0===o?void 0:o>0}function ai(t,e,n,i,o){o=void 0!==o&&o;for(let s=0,r=n.length;s<r;++s){const r=n[s],a=ri(t,e,r,i);if(0===s){if(o&&a||!o&&!a)return!1}else if(o&&!a||!o&&a)return!1;e=r}return!0}function hi(t,e,n,i,o){for(let s=0,r=n.length;s<r;++s){const r=n[s];if(!ai(t,e,r,i,o))return!1;r.length&&(e=r[r.length-1])}return!0}function li(t,e,n,i,o){o=void 0!==o&&o;for(let s=0,r=n.length;s<r;++s){const r=n[s],a=ri(t,e,r,i);(0===s?o&&a||!o&&!a:o&&!a||!o&&a)&&si(t,e,r,i),e=r}return e}function ci(t,e,n,i,o){for(let s=0,r=n.length;s<r;++s)e=li(t,e,n[s],i,o);return e}class ui extends In{constructor(t,e,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&&n?(this.setFlatCoordinates(e,t),this.ends_=n):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?a(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new ui(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<nt(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Pn(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Rn(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,i))}containsXY(t,e){return Jn(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return qn(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),li(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,zn(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=xt(this.getExtent());this.flatInteriorPoint_=ti(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Un(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new Yn(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,n=this.ends_,i=[];let o=0;for(let s=0,r=n.length;s<r;++s){const r=n[s],a=new Yn(e.slice(o,r),t);i.push(a),o=r}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;ai(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=li(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=Bn(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n),new ui(e,"XY",n)}getType(){return"Polygon"}intersectsExtent(t){return oi(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Gn(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}function gi(t){if(Et(t))throw new Error("Cannot create polygon from empty extent");const e=t[0],n=t[1],i=t[2],o=t[3],s=[e,n,e,o,i,o,i,n,e,n];return new ui(s,"XY",[s.length])}class di extends b{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=en(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&(qe=!1),t.center&&(t.center=an(t.center,this.projection_)),t.extent&&(t.extent=ln(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const s in Ce)delete e[s];this.setProperties(e,!0);const n=function(t){let e,n,i;const o=28,r=2;let a=void 0!==t.minZoom?t.minZoom:0,h=void 0!==t.maxZoom?t.maxZoom:o;const l=void 0!==t.zoomFactor?t.zoomFactor:r,c=void 0!==t.multiWorld&&t.multiWorld,u=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,g=void 0!==t.showFullExtent&&t.showFullExtent,d=en(t.projection,"EPSG:3857"),p=d.getExtent();let m=t.constrainOnlyCenter,f=t.extent;c||f||!d.isGlobal()||(m=!1,f=p);if(void 0!==t.resolutions){const o=t.resolutions;n=o[a],i=void 0!==o[h]?o[h]:o[o.length-1],e=t.constrainResolution?function(t,e,n,i){return e=void 0===e||e,function(o,r,a,h){if(void 0!==o){const l=t[0],c=t[t.length-1],u=n?mn(l,n,a,i):l;if(h)return e?fn(o,u,c):Ot(o,c,u);const g=Math.min(u,o),d=Math.floor(s(t,g,r));return t[d]>u&&d<t.length-1?t[d+1]:t[d]}}}(o,u,!m&&f,g):_n(n,i,u,!m&&f,g)}else{const s=(p?Math.max(St(p),Ct(p)):360*Te.degrees/d.getMetersPerUnit())/256/Math.pow(r,0),c=s/Math.pow(r,o-0);n=t.maxResolution,void 0!==n?a=0:n=s/Math.pow(l,a),i=t.minResolution,void 0===i&&(i=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(l,h):s/Math.pow(l,h):c),h=a+Math.floor(Math.log(n/i)/Math.log(l)),i=n/Math.pow(l,h-a),e=t.constrainResolution?function(t,e,n,i,o,s){return i=void 0===i||i,n=void 0!==n?n:0,function(r,a,h,l){if(void 0!==r){const c=o?mn(e,o,h,s):e;if(l)return i?fn(r,c,n):Ot(r,n,c);const u=1e-9,g=Math.ceil(Math.log(e/c)/Math.log(t)-u),d=-a*(.5-u)+.5,p=Math.min(c,r),m=Math.floor(Math.log(e/p)/Math.log(t)+d),f=Math.max(g,m);return Ot(e/Math.pow(t,f),n,c)}}}(l,n,i,u,!m&&f,g):_n(n,i,u,!m&&f,g)}return{constraint:e,maxResolution:n,minResolution:i,minZoom:a,zoomFactor:l}}(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=n.minZoom;const i=function(t){if(void 0!==t.extent){const e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return dn(t.extent,t.constrainOnlyCenter,e)}const e=en(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,dn(t,!1,!1)}return pn}(t),o=n.constraint,r=function(t){const e=void 0===t.enableRotation||t.enableRotation;if(e){const e=t.constrainRotation;return void 0===e||!0===e?function(){const t=Wt(5);return function(e,n){return n||void 0===e?e:Math.abs(e)<=t?0:e}}():!1===e?vn:"number"==typeof e?function(t){const e=2*Math.PI/t;return function(t,n){return n?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}(e):vn}return yn}(t);this.constraints_={center:i,resolution:o,rotation:r},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const n=this.getCenterInternal();if(n){const i=t||[0,0,0,0];e=e||[0,0,0,0];const o=this.getResolution(),s=o/2*(i[3]-e[3]+e[1]-i[1]),r=o/2*(i[0]-e[0]+e[2]-i[2]);this.setCenterInternal([n[0]+s,n[1]-r])}}getUpdatedOptions_(t){const e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let n=0;n<e.length;++n){let t=arguments[n];t.center&&(t=Object.assign({},t),t.center=an(t.center,this.getProjection())),t.anchor&&(t=Object.assign({},t),t.anchor=an(t.anchor,this.getProjection())),e[n]=t}this.animateInternal.apply(this,e)}animateInternal(t){let e,n=arguments.length;n>1&&"function"==typeof arguments[n-1]&&(e=arguments[n-1],--n);let i=0;for(;i<n&&!this.isDef();++i){const t=arguments[i];t.center&&this.setCenterInternal(t.center),void 0!==t.zoom?this.setZoom(t.zoom):t.resolution&&this.setResolution(t.resolution),void 0!==t.rotation&&this.setRotation(t.rotation)}if(i===n)return void(e&&pi(e,!0));let o=Date.now(),s=this.targetCenter_.slice(),r=this.targetResolution_,a=this.targetRotation_;const h=[];for(;i<n;++i){const t=arguments[i],n={start:o,complete:!1,anchor:t.anchor,duration:void 0!==t.duration?t.duration:1e3,easing:t.easing||wn,callback:e};if(t.center&&(n.sourceCenter=s,n.targetCenter=t.center.slice(),s=n.targetCenter),void 0!==t.zoom?(n.sourceResolution=r,n.targetResolution=this.getResolutionForZoom(t.zoom),r=n.targetResolution):t.resolution&&(n.sourceResolution=r,n.targetResolution=t.resolution,r=n.targetResolution),void 0!==t.rotation){n.sourceRotation=a;const e=Bt(t.rotation-a+Math.PI,2*Math.PI)-Math.PI;n.targetRotation=a+e,a=n.targetRotation}mi(n)?n.complete=!0:o+=n.duration,h.push(n)}this.animations_.push(h),this.setHint(xe,1),this.updateAnimations_()}getAnimating(){return this.hints_[xe]>0}getInteracting(){return this.hints_[we]>0}cancelAnimations(){let t;this.setHint(xe,-this.hints_[xe]);for(let e=0,n=this.animations_.length;e<n;++e){const n=this.animations_[e];if(n[0].callback&&pi(n[0].callback,!1),!t)for(let e=0,i=n.length;e<i;++e){const i=n[e];if(!i.complete){t=i.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let n=this.animations_.length-1;n>=0;--n){const i=this.animations_[n];let o=!0;for(let n=0,s=i.length;n<s;++n){const s=i[n];if(s.complete)continue;const r=t-s.start;let a=s.duration>0?r/s.duration:1;a>=1?(s.complete=!0,a=1):o=!1;const h=s.easing(a);if(s.sourceCenter){const t=s.sourceCenter[0],e=s.sourceCenter[1],n=s.targetCenter[0],i=s.targetCenter[1];this.nextCenter_=s.targetCenter;const o=t+h*(n-t),r=e+h*(i-e);this.targetCenter_=[o,r]}if(s.sourceResolution&&s.targetResolution){const t=1===h?s.targetResolution:s.sourceResolution+h*(s.targetResolution-s.sourceResolution);if(s.anchor){const e=this.getViewportSize_(this.getRotation()),n=this.constraints_.resolution(t,0,e,!0);this.targetCenter_=this.calculateCenterZoom(n,s.anchor)}this.nextResolution_=s.targetResolution,this.targetResolution_=t,this.applyTargetState_(!0)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){const t=1===h?Bt(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+h*(s.targetRotation-s.sourceRotation);if(s.anchor){const e=this.constraints_.rotation(t,!0);this.targetCenter_=this.calculateCenterRotate(e,s.anchor)}this.nextRotation_=s.targetRotation,this.targetRotation_=t}if(this.applyTargetState_(!0),e=!0,!s.complete)break}if(o){this.animations_[n]=null,this.setHint(xe,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const t=i[0].callback;t&&pi(t,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let n;const i=this.getCenterInternal();var o,s;return void 0!==i&&(n=[i[0]-e[0],i[1]-e[1]],We(n,t-this.getRotation()),s=e,(o=n)[0]+=+s[0],o[1]+=+s[1]),n}calculateCenterZoom(t,e){let n;const i=this.getCenterInternal(),o=this.getResolution();if(void 0!==i&&void 0!==o){n=[e[0]-t*(e[0]-i[0])/o,e[1]-t*(e[1]-i[1])/o]}return n}getViewportSize_(t){const e=this.viewportSize_;if(t){const n=e[0],i=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(i*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(i*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t?rn(t,this.getProjection()):t}getCenterInternal(){return this.get(Ce.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){return hn(this.calculateExtentInternal(t),this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();V(e,"The view center is not defined");const n=this.getResolution();V(void 0!==n,"The view resolution is not defined");const i=this.getRotation();return V(void 0!==i,"The view rotation is not defined"),wt(e,n,i,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(Ce.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(ln(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const n=St(t)/e[0],i=Ct(t)/e[1];return Math.max(n,i)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(e/n)/Math.log(t);return function(n){return e/Math.pow(t,n*i)}}getRotation(){return this.get(Ce.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,o=Math.log(n/i)/e;return function(t){return Math.log(n/t)/e/o}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),n=this.getRotation();let i=this.getCenterInternal();const o=this.padding_;if(o){const t=this.getViewportSizeMinusPadding_();i=fi(i,this.getViewportSize_(),[t[0]/2+o[3],t[1]/2+o[0]],e,n)}return{center:i.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e,n,i=this.minZoom_||0;if(this.resolutions_){const o=s(this.resolutions_,t,1);i=o,e=this.resolutions_[o],n=o==this.resolutions_.length-1?2:e/this.resolutions_[o+1]}else e=this.maxResolution_,n=this.zoomFactor_;return i+Math.log(e/t)/Math.log(n)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=Ot(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,Ot(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let n;if(V(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,"Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){V(!Et(t),"Cannot fit empty extent provided as `geometry`");n=gi(ln(t,this.getProjection()))}else if("Circle"===t.getType()){const e=ln(t.getExtent(),this.getProjection());n=gi(e),n.rotate(this.getRotation(),xt(e))}else n=t;this.fitInternal(n,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),n=Math.cos(e),i=Math.sin(-e),o=t.getFlatCoordinates(),s=t.getStride();let r=1/0,a=1/0,h=-1/0,l=-1/0;for(let c=0,u=o.length;c<u;c+=s){const t=o[c]*n-o[c+1]*i,e=o[c]*i+o[c+1]*n;r=Math.min(r,t),a=Math.min(a,e),h=Math.max(h,t),l=Math.max(l,e)}return[r,a,h,l]}fitInternal(t,e){let n=(e=e||{}).size;n||(n=this.getViewportSizeMinusPadding_());const i=void 0!==e.padding?e.padding:[0,0,0,0],o=void 0!==e.nearest&&e.nearest;let s;s=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;const r=this.rotatedExtentForGeometry(t);let a=this.getResolutionForExtentInternal(r,[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]);a=isNaN(a)?s:Math.max(a,s),a=this.getConstrainedResolution(a,o?0:1);const h=this.getRotation(),l=Math.sin(h),c=Math.cos(h),g=xt(r);g[0]+=(i[1]-i[3])/2*a,g[1]+=(i[0]-i[2])/2*a;const d=g[0]*c-g[1]*l,p=g[1]*c+g[0]*l,m=this.getConstrainedCenter([d,p],a),f=e.callback?e.callback:u;void 0!==e.duration?this.animateInternal({resolution:a,center:m,duration:e.duration,easing:e.easing},f):(this.targetResolution_=a,this.targetCenter_=m,this.applyTargetState_(!1,!0),pi(f,!0))}centerOn(t,e,n){this.centerOnInternal(an(t,this.getProjection()),e,n)}centerOnInternal(t,e,n){this.setCenterInternal(fi(t,e,n,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,n,i){let o;const s=this.padding_;if(s&&t){const r=this.getViewportSizeMinusPadding_(-n),a=fi(t,i,[r[0]/2+s[3],r[1]/2+s[0]],e,n);o=[t[0]-a[0],t[1]-a[1]]}return o}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(t){const e=rn(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&an(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const n=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*t,0,i,n);e&&(this.targetCenter_=this.calculateCenterZoom(o,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=an(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const n=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(i,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t?an(t,this.getProjection()):t)}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const n=this.getAnimating()||this.getInteracting()||e,i=this.constraints_.rotation(this.targetRotation_,n),o=this.getViewportSize_(i),s=this.constraints_.resolution(this.targetResolution_,0,o,n),r=this.constraints_.center(this.targetCenter_,s,o,n,this.calculateCenterShift(this.targetCenter_,s,i,o));this.get(Ce.ROTATION)!==i&&this.set(Ce.ROTATION,i),this.get(Ce.RESOLUTION)!==s&&(this.set(Ce.RESOLUTION,s),this.set("zoom",this.getZoom(),!0)),r&&this.get(Ce.CENTER)&&Ke(this.get(Ce.CENTER),r)||this.set(Ce.CENTER,r),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,n){t=void 0!==t?t:200;const i=e||0,o=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(o),r=this.constraints_.resolution(this.targetResolution_,i,s),a=this.constraints_.center(this.targetCenter_,r,s,!1,this.calculateCenterShift(this.targetCenter_,r,o,s));if(0===t&&!this.cancelAnchor_)return this.targetResolution_=r,this.targetRotation_=o,this.targetCenter_=a,void this.applyTargetState_();n=n||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===r&&this.getRotation()===o&&this.getCenterInternal()&&Ke(this.getCenterInternal(),a)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:a,resolution:r,duration:t,easing:xn,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(we,1)}endInteraction(t,e,n){n=n&&an(n,this.getProjection()),this.endInteractionInternal(t,e,n)}endInteractionInternal(t,e,n){this.getInteracting()&&(this.setHint(we,-1),this.resolveConstraints(t,e,n))}getConstrainedCenter(t,e){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)}getConstrainedZoom(t,e){const n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))}getConstrainedResolution(t,e){e=e||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,n)}}function pi(t,e){setTimeout(function(){t(e)},0)}function mi(t){return!(t.sourceCenter&&t.targetCenter&&!Ke(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}function fi(t,e,n,i,o){const s=Math.cos(-o);let r=Math.sin(-o),a=t[0]*s-t[1]*r,h=t[1]*s+t[0]*r;a+=(e[0]/2-n[0])*i,h+=(n[1]-e[1]/2)*i,r=-r;return[a*s-h*r,h*s+a*r]}class _i extends pe{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(ge,this.handleSourcePropertyChange_);const n=t.source?t.source:null;this.setSource(n)}getLayersArray(t){return(t=t||[]).push(this),t}getLayerStatesArray(t){return(t=t||[]).push(this.getLayerState()),t}getSource(){return this.get(ge)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),this.sourceReady_||"ready"!==this.getSource().getState()||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(v(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=_(t,f.CHANGE,this.handleSourceChange_,this),"ready"===t.getState()&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null}isVisible(t){let e;const n=this.getMapInternal();let i;!t&&n&&(t=n.getView()),e=t instanceof di?{viewState:t.getState(),extent:t.calculateExtent()}:t,!e.layerStatesArray&&n&&(e.layerStatesArray=n.getLayerGroup().getLayerStatesArray()),i=e.layerStatesArray?e.layerStatesArray.find(t=>t.layer===this):this.getLayerState();const o=this.getExtent();return yi(i,e.viewState)&&(!o||It(o,e.extent))}getAttributions(t){if(!this.isVisible(t))return[];let e;const n=this.getSource();if(n&&(e=n.getAttributions()),!e)return[];let i=e(t instanceof di?t.getViewStateAndExtent():t);return Array.isArray(i)||(i=[i]),i}render(t,e){const n=this.getRenderer();return n.prepareFrame(t)?(this.rendered=!0,n.renderFrame(t,e)):null}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(de,t)}getMapInternal(){return this.get(de)}setMap(t){this.mapPrecomposeKey_&&(v(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(v(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=_(t,_e,function(t){const e=t.frameState.layerStatesArray,n=this.getLayerState(!1);V(!e.some(function(t){return t.layer===n.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),e.push(n)},this),this.mapRenderKey_=_(this,f.CHANGE,t.render,t),this.changed())}setSource(t){this.set(ge,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function yi(t,e){if(!t.visible)return!1;const n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;const i=e.zoom;return i>t.minZoom&&i<=t.maxZoom}class vi extends i{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){w()}calculateMatrices2D(t){const e=t.viewState,n=t.coordinateToPixelTransform,i=t.pixelToCoordinateTransform;W(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),B(i,n)}forEachFeatureAtCoordinate(t,e,n,i,o,s,r,a){let h;const l=e.viewState;function c(t,e,n,i){return o.call(s,e,t?n:null,i)}const u=l.projection,g=ze(t.slice(),u),d=[[0,0]];if(u.canWrapX()&&i){const t=St(u.getExtent());d.push([-t,0],[t,0])}const p=e.layerStatesArray,m=p.length,f=[],_=[];for(let v=0;v<d.length;v++)for(let i=m-1;i>=0;--i){const o=p[i],s=o.layer;if(s.hasRenderer()&&yi(o,l)&&r.call(a,s)){const i=s.getRenderer(),r=s.getSource();if(i&&r){const s=r.getWrapX()?g:t,a=c.bind(null,o.managed);_[0]=s[0]+d[v][0],_[1]=s[1]+d[v][1],h=i.forEachFeatureAtCoordinate(_,e,n,a,f)}if(h)return h}}if(0===f.length)return;const y=1/f.length;return f.forEach((t,e)=>t.distanceSq+=e*y),f.sort((t,e)=>t.distanceSq-e.distanceSq),f.some(t=>h=t.callback(t.feature,t.layer,t.geometry)),h}hasFeatureAtCoordinate(t,e,n,i,o,s){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,i,l,this,o,s)}getMap(){return this.map_}renderFrame(t){w()}flushDeclutterItems(t){}scheduleExpireIconCache(t){ie.canExpireCache()&&t.postRenderFunctions.push(xi)}}function xi(t,e){ie.expire()}class wi extends e{constructor(t,e,n,i){super(t),this.inversePixelTransform=e,this.frameState=n,this.context=i}}const Ci="ol-hidden",Ti="ol-unselectable",Di="ol-unsupported",bi="ol-control",Si="ol-collapsed",Ii=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),Ei=["style","variant","weight","size","lineHeight","family"],Mi=function(t){const e=t.match(Ii);if(!e)return null;const n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,o=Ei.length;i<o;++i){const t=e[i+1];void 0!==t&&(n[Ei[i]]=t)}return n.families=n.family.split(/,\s?/),n};function Li(t,e,n,i){let o;return o=n&&n.length?n.shift():A?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(o.width=t),e&&(o.height=e),o.getContext("2d",i)}function Ni(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function Pi(t){let e=t.offsetWidth;const n=getComputedStyle(t);return e+=parseInt(n.marginLeft,10)+parseInt(n.marginRight,10),e}function ki(t){let e=t.offsetHeight;const n=getComputedStyle(t);return e+=parseInt(n.marginTop,10)+parseInt(n.marginBottom,10),e}function Ri(t,e){const n=e.parentNode;n&&n.replaceChild(t,e)}function Fi(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function Ai(t){for(;t.lastChild;)t.removeChild(t.lastChild)}const Gi="10px sans-serif",Hi="#000",Oi="round",Vi=[],Ki="round",Wi="#000",Bi="center",Xi="middle",zi=[0,0,0,0],ji=new b;let Qi,qi=null;const Yi={},Ui=function(){const t="32px ",e=["monospace","serif"],n=e.length,i="wmytzilWMYTZIL@#/&?$%10";let o,s;function r(o,r,a){let h=!0;for(let l=0;l<n;++l){const n=e[l];if(s=Ji(o+" "+r+" "+t+n,i),a!=n){const e=Ji(o+" "+r+" "+t+a+","+n,i);h=h&&e!=s}}return!!h}function a(){let t=!0;const e=ji.getKeys();for(let n=0,i=e.length;n<i;++n){const i=e[n];ji.get(i)<100&&(r.apply(this,i.split("\n"))?(d(Yi),qi=null,Qi=void 0,ji.set(i,100)):(ji.set(i,ji.get(i)+1,!0),t=!1))}t&&(clearInterval(o),o=void 0)}return function(t){const e=Mi(t);if(!e)return;const n=e.families;for(let i=0,s=n.length;i<s;++i){const t=n[i],s=e.style+"\n"+e.weight+"\n"+t;void 0===ji.get(s)&&(ji.set(s,100,!0),r(e.style,e.weight,t)||(ji.set(s,0,!0),void 0===o&&(o=setInterval(a,32))))}}}(),Zi=function(){let t;return function(e){let n=Yi[e];if(null==n){if(A){const t=Mi(e),i=$i(e,"g");n=(isNaN(Number(t.lineHeight))?1.2:Number(t.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),n=t.offsetHeight,document.body.removeChild(t);Yi[e]=n}return n}}();function $i(t,e){return qi||(qi=Li(1,1)),t!=Qi&&(qi.font=t,Qi=qi.font),qi.measureText(e)}function Ji(t,e){return $i(t,e).width}function to(t,e,n){if(e in n)return n[e];const i=e.split("\n").reduce((e,n)=>Math.max(e,Ji(t,n)),0);return n[e]=i,i}function eo(t,e,n,i,o,s,r,a,h,l,c){t.save(),1!==n&&(t.globalAlpha*=n),e&&t.transform.apply(t,e),i.contextInstructions?(t.translate(h,l),t.scale(c[0],c[1]),function(t,e){const n=t.contextInstructions;for(let i=0,o=n.length;i<o;i+=2)Array.isArray(n[i+1])?e[n[i]].apply(e,n[i+1]):e[n[i]]=n[i+1]}(i,t)):c[0]<0||c[1]<0?(t.translate(h,l),t.scale(c[0],c[1]),t.drawImage(i,o,s,r,a,0,0,r,a)):t.drawImage(i,o,s,r,a,h,l,r*c[0],a*c[1]),t.restore()}class no extends vi{constructor(t){super(t),this.fontChangeListenerKey_=_(ji,n,t.redrawText.bind(t)),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=Ti+" ol-layers";const i=t.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(t,e){const n=this.getMap();if(n.hasListener(t)){const i=new wi(t,void 0,e);n.dispatchEvent(i)}}disposeInternal(){v(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(t),this.dispatchRenderEvent(_e,t);const e=t.layerStatesArray.sort(function(t,e){return t.zIndex-e.zIndex}),n=t.viewState;this.children_.length=0;const i=this.declutterLayers_;i.length=0;let o=null;for(let s=0,r=e.length;s<r;++s){const r=e[s];t.layerIndex=s;const a=r.layer,h=a.getSourceState();if(!yi(r,n)||"ready"!=h&&"undefined"!=h){a.unrender();continue}const l=a.render(t,o);l&&(l!==o&&(this.children_.push(l),o=l),"getDeclutter"in a&&i.push(a))}this.flushDeclutterItems(t),function(t,e){const n=t.childNodes;for(let i=0;;++i){const o=n[i],s=e[i];if(!o&&!s)break;o!==s&&(o?s?t.insertBefore(s,o):(t.removeChild(o),--i):t.appendChild(s))}}(this.element_,this.children_),this.dispatchRenderEvent(ye,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}flushDeclutterItems(t){const e=this.declutterLayers_;for(let n=e.length-1;n>=0;--n)e[n].renderDeclutter(t);e.length=0}}class io extends e{constructor(t,e){super(t),this.layer=e}}const oo="layers";class so extends pe{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let n=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(oo,this.handleLayersChanged_),n?Array.isArray(n)?n=new L(n.slice(),{unique:!0}):V("function"==typeof n.getArray,"Expected `layers` to be an array or a `Collection`"):n=new L(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(v),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(_(t,S,this.handleLayersAdd_,this),_(t,I,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(v);d(this.listenerKeys_);const e=t.getArray();for(let n=0,i=e.length;n<i;n++){const t=e[n];this.registerLayerListeners_(t),this.dispatchEvent(new io("addlayer",t))}this.changed()}registerLayerListeners_(t){const e=[_(t,n,this.handleLayerChange_,this),_(t,f.CHANGE,this.handleLayerChange_,this)];t instanceof so&&e.push(_(t,"addlayer",this.handleLayerGroupAdd_,this),_(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[T(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new io("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new io("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new io("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,n=T(e);this.listenerKeys_[n].forEach(v),delete this.listenerKeys_[n],this.dispatchEvent(new io("removelayer",e)),this.changed()}getLayers(){return this.get(oo)}setLayers(t){const e=this.getLayers();if(e){const t=e.getArray();for(let e=0,n=t.length;e<n;++e)this.dispatchEvent(new io("removelayer",t[e]))}this.set(oo,t)}getLayersArray(t){return t=void 0!==t?t:[],this.getLayers().forEach(function(e){e.getLayersArray(t)}),t}getLayerStatesArray(t){const e=void 0!==t?t:[],n=e.length;this.getLayers().forEach(function(t){t.getLayerStatesArray(e)});const i=this.getLayerState();let o=i.zIndex;t||void 0!==i.zIndex||(o=0);for(let s=n,r=e.length;s<r;s++){const t=e[s];t.opacity*=i.opacity,t.visible=t.visible&&i.visible,t.maxResolution=Math.min(t.maxResolution,i.maxResolution),t.minResolution=Math.max(t.minResolution,i.minResolution),t.minZoom=Math.max(t.minZoom,i.minZoom),t.maxZoom=Math.min(t.maxZoom,i.maxZoom),void 0!==i.extent&&(void 0!==t.extent?t.extent=Tt(t.extent,i.extent):t.extent=i.extent),void 0===t.zIndex&&(t.zIndex=o)}return e}getSourceState(){return"ready"}}class ro extends e{constructor(t,e,n){super(t),this.map=e,this.frameState=void 0!==n?n:null}}class ao extends ro{constructor(t,e,n,i,o,s){super(t,e,o),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==i&&i,this.activePointers=s}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const ho={SINGLECLICK:"singleclick",CLICK:f.CLICK,DBLCLICK:f.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},lo="pointermove",co="pointerdown";class uo extends m{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===e?1:e,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=_(n,co,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=_(n,lo,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(f.TOUCHMOVE,this.boundHandleTouchMove_,!!O&&{passive:!1})}emulateClick_(t){let e=new ao(ho.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new ao(ho.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const e=new ao(ho.SINGLECLICK,this.map_,t);this.dispatchEvent(e)},250)}updateActivePointers_(t){const e=t,n=e.pointerId;if(e.type==ho.POINTERUP||e.type==ho.POINTERCANCEL){delete this.trackedTouches_[n];for(const t in this.trackedTouches_)if(this.trackedTouches_[t].target!==e.target){delete this.trackedTouches_[t];break}}else e.type!=ho.POINTERDOWN&&e.type!=ho.POINTERMOVE||(this.trackedTouches_[n]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new ao(ho.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(v),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return 0===t.button}handlePointerDown_(t){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(t);const e=new ao(ho.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),0===this.dragListenerKeys_.length){const t=this.map_.getOwnerDocument();this.dragListenerKeys_.push(_(t,ho.POINTERMOVE,this.handlePointerMove_,this),_(t,ho.POINTERUP,this.handlePointerUp_,this),_(this.element_,ho.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==t&&this.dragListenerKeys_.push(_(this.element_.getRootNode(),ho.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new ao(ho.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new ao(ho.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;e&&!e.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(v(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(f.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(v(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(v),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const go="postrender",po="movestart",mo="moveend",fo="loadstart",_o="loadend",yo="layergroup",vo="size",xo="target",wo="view",Co=1/0;class To{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,d(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const i=this.keyFunction_(n);return delete this.queuedElements_[i],n}enqueue(t){V(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const e=this.priorityFunction_(t);return e!=Co&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(t){return 2*t+1}getRightChildIndex_(t){return 2*t+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return 0===this.elements_.length}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,n=this.priorities_,i=e.length,o=e[t],s=n[t],r=t;for(;t<i>>1;){const o=this.getLeftChildIndex_(t),s=this.getRightChildIndex_(t),r=s<i&&n[s]<n[o]?s:o;e[t]=e[r],n[t]=n[r],t=r}e[t]=o,n[t]=s,this.siftDown_(r,t)}siftDown_(t,e){const n=this.elements_,i=this.priorities_,o=n[e],s=i[e];for(;e>t;){const t=this.getParentIndex_(e);if(!(i[t]>s))break;n[e]=n[t],i[e]=i[t],e=t}n[e]=o,i[e]=s}reprioritize(){const t=this.priorityFunction_,e=this.elements_,n=this.priorities_;let i=0;const o=e.length;let s,r,a;for(r=0;r<o;++r)s=e[r],a=t(s),a==Co?delete this.queuedElements_[this.keyFunction_(s)]:(n[i]=a,e[i++]=s);e.length=i,n.length=i,this.heapify_()}}const Do=0,bo=2,So=3,Io=4;class Eo extends To{constructor(t,e){super(function(e){return t.apply(null,e)},function(t){return t[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);if(e){t[0].addEventListener(f.CHANGE,this.boundHandleTileChange_)}return e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,n=e.getState();if(n===bo||n===So||n===Io){n!==So&&e.removeEventListener(f.CHANGE,this.boundHandleTileChange_);const t=e.getKey();t in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[t],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let n,i,o,s=0;for(;this.tilesLoading_<t&&s<e&&this.getCount()>0;)i=this.dequeue()[0],o=i.getKey(),n=i.getState(),n!==Do||o in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++s,i.load())}}class Mo extends b{constructor(t){super();const e=t.element;!e||t.target||e.style.pointerEvents||(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){Fi(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&Fi(this.element);for(let e=0,n=this.listenerKeys.length;e<n;++e)v(this.listenerKeys[e]);if(this.listenerKeys.length=0,this.map_=t,t){(this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==u&&this.listenerKeys.push(_(t,go,this.render,this)),t.render()}}render(t){}setTarget(t){this.target_="string"==typeof t?document.getElementById(t):t}}class Lo extends Mo{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===t.collapsed||t.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==t.collapsible,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1);const e=void 0!==t.className?t.className:"ol-attribution",n=void 0!==t.tipLabel?t.tipLabel:"Attributions",i=void 0!==t.expandClassName?t.expandClassName:e+"-expand",o=void 0!==t.collapseLabel?t.collapseLabel:"",s=void 0!==t.collapseClassName?t.collapseClassName:e+"-collapse";"string"==typeof o?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o,this.collapseLabel_.className=s):this.collapseLabel_=o;const r=void 0!==t.label?t.label:"i";"string"==typeof r?(this.label_=document.createElement("span"),this.label_.textContent=r,this.label_.className=i):this.label_=r;const a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(a),this.toggleButton_.addEventListener(f.CLICK,this.handleClick_.bind(this),!1);const h=e+" "+Ti+" "+bi+(this.collapsed_&&this.collapsible_?" "+Si:"")+(this.collapsible_?"":" ol-uncollapsible"),l=this.element;l.className=h,l.appendChild(this.toggleButton_),l.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e=Array.from(new Set(this.getMap().getAllLayers().flatMap(e=>e.getAttributions(t)))),n=!this.getMap().getAllLayers().some(t=>t.getSource()&&!1===t.getSource().getAttributionsCollapsible());return this.overrideCollapsible_||this.setCollapsible(n),e}updateElement_(t){if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=this.collectSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!h(e,this.renderedAttributions_)){Ai(this.ulElement_);for(let t=0,n=e.length;t<n;++t){const n=document.createElement("li");n.innerHTML=e[t],this.ulElement_.appendChild(n)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Si),this.collapsed_?Ri(this.collapseLabel_,this.label_):Ri(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}class No extends Mo{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=void 0!==t.className?t.className:"ol-rotate",n=void 0!==t.label?t.label:"",i=void 0!==t.compassClassName?t.compassClassName:"ol-compass";this.label_=null,"string"==typeof n?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(i));const o=t.tipLabel?t.tipLabel:"Reset rotation",s=document.createElement("button");s.className=e+"-reset",s.setAttribute("type","button"),s.title=o,s.appendChild(this.label_),s.addEventListener(f.CLICK,this.handleClick_.bind(this),!1);const r=e+" "+Ti+" "+bi,a=this.element;a.className=r,a.appendChild(s),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=void 0!==t.duration?t.duration:250,this.autoHide_=void 0===t.autoHide||t.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Ci)}handleClick_(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:xn}):t.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const n=e.viewState.rotation;if(n!=this.rotation_){const t="rotate("+n+"rad)";if(this.autoHide_){const t=this.element.classList.contains(Ci);t||0!==n?t&&0!==n&&this.element.classList.remove(Ci):this.element.classList.add(Ci)}this.label_.style.transform=t}this.rotation_=n}}class Po extends Mo{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=void 0!==t.className?t.className:"ol-zoom",n=void 0!==t.delta?t.delta:1,i=void 0!==t.zoomInClassName?t.zoomInClassName:e+"-in",o=void 0!==t.zoomOutClassName?t.zoomOutClassName:e+"-out",s=void 0!==t.zoomInLabel?t.zoomInLabel:"+",r=void 0!==t.zoomOutLabel?t.zoomOutLabel:"",a=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",h=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",l=document.createElement("button");l.className=i,l.setAttribute("type","button"),l.title=a,l.appendChild("string"==typeof s?document.createTextNode(s):s),l.addEventListener(f.CLICK,this.handleClick_.bind(this,n),!1);const c=document.createElement("button");c.className=o,c.setAttribute("type","button"),c.title=h,c.appendChild("string"==typeof r?document.createTextNode(r):r),c.addEventListener(f.CLICK,this.handleClick_.bind(this,-n),!1);const u=e+" "+Ti+" "+bi,g=this.element;g.className=u,g.appendChild(l),g.appendChild(c),this.duration_=void 0!==t.duration?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const e=this.getMap().getView();if(!e)return;const n=e.getZoom();if(void 0!==n){const i=e.getConstrainedZoom(n+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:i,duration:this.duration_,easing:xn})):e.setZoom(i)}}}function ko(t){t=t||{};const e=new L;(void 0===t.zoom||t.zoom)&&e.push(new Po(t.zoomOptions));(void 0===t.rotate||t.rotate)&&e.push(new No(t.rotateOptions));return(void 0===t.attribution||t.attribution)&&e.push(new Lo(t.attributionOptions)),e}const Ro={ACTIVE:"active"};class Fo extends b{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Ro.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(Ro.ACTIVE,t)}setMap(t){this.map_=t}}function Ao(t,e,n,i){const o=t.getZoom();if(void 0===o)return;const s=t.getConstrainedZoom(o+e),r=t.getResolutionForZoom(s);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:r,anchor:n,duration:void 0!==i?i:250,easing:xn})}class Go extends Fo{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:250}handleEvent(t){let e=!1;if(t.type==ho.DBLCLICK){const n=t.originalEvent,i=t.map,o=t.coordinate,s=n.shiftKey?-this.delta_:this.delta_;Ao(i.getView(),s,o,this.duration_),n.preventDefault(),e=!0}return!e}}class Ho extends Fo{constructor(t){super(t=t||{}),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==ho.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==ho.POINTERUP){const e=this.handleUpEvent(t);this.handlingDownUpSequence=e&&this.targetPointers.length>0}}else if(t.type==ho.POINTERDOWN){const n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==ho.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function Oo(t){const e=t.length;let n=0,i=0;for(let o=0;o<e;o++)n+=t[o].clientX,i+=t[o].clientY;return{clientX:n/e,clientY:i/e}}function Vo(t){const e=arguments;return function(t){let n=!0;for(let i=0,o=e.length;i<o&&(n=n&&e[i](t),n);++i);return n}}const Ko=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Wo=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||function(t){const e=t.map.getTargetElement(),n=t.map.getOwnerDocument().activeElement;return e.contains(n)}(t)},Bo=l,Xo=function(t){const e=t.originalEvent;return 0==e.button&&!(k&&R&&e.ctrlKey)},zo=c,jo=function(t){return t.type==ho.SINGLECLICK},Qo=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},qo=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Yo=function(t){const e=t.originalEvent,n=e.target.tagName;return"INPUT"!==n&&"SELECT"!==n&&"TEXTAREA"!==n&&!e.target.isContentEditable},Uo=function(t){const e=t.originalEvent;return V(void 0!==e,"mapBrowserEvent must originate from a pointer event"),"mouse"==e.pointerType},Zo=function(t){const e=t.originalEvent;return V(void 0!==e,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&0===e.button};class $o extends Ho{constructor(t){super({stopDown:c}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:Vo(Qo,Zo);this.condition_=t.onFocusOnly?Vo(Wo,e):e,this.noKinetic_=!1}handleDragEvent(t){const e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());const n=this.targetPointers,i=e.getEventPixel(Oo(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const e=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],n=t.map.getView();o=e,s=n.getResolution(),o[0]*=s,o[1]*=s,We(e,n.getRotation()),n.adjustCenterInternal(e)}}else this.kinetic_&&this.kinetic_.begin();var o,s;this.lastCentroid=i,this.lastPointersCount_=n.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const t=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),o=n.getCenterInternal(),s=e.getPixelFromCoordinateInternal(o),r=e.getCoordinateFromPixelInternal([s[0]-t*Math.cos(i),s[1]-t*Math.sin(i)]);n.animateInternal({center:n.getConstrainedCenter(r),duration:500,easing:xn})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class Jo extends Ho{constructor(t){t=t||{},super({stopDown:c}),this.condition_=t.condition?t.condition:Ko,this.lastAngle_=void 0,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){if(!Uo(t))return;const e=t.map,n=e.getView();if(n.getConstraints().rotation===yn)return;const i=e.getSize(),o=t.pixel,s=Math.atan2(i[1]/2-o[1],o[0]-i[0]/2);if(void 0!==this.lastAngle_){const t=s-this.lastAngle_;n.adjustRotationInternal(-t)}this.lastAngle_=s}handleUpEvent(t){if(!Uo(t))return!0;return t.map.getView().endInteraction(this.duration_),!1}handleDownEvent(t){if(!Uo(t))return!1;if(Xo(t)&&this.condition_(t)){return t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0}return!1}}class ts extends i{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,n="px",i=this.element_.style;i.left=Math.min(t[0],e[0])+n,i.top=Math.min(t[1],e[1])+n,i.width=Math.abs(e[0]-t[0])+n,i.height=Math.abs(e[1]-t[1])+n}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new ui([n])}getGeometry(){return this.geometry_}}const es="boxstart",ns="boxdrag",is="boxend",os="boxcancel";class ss extends e{constructor(t,e,n){super(t),this.coordinate=e,this.mapBrowserEvent=n}}class rs extends Ho{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new ts(t.className||"ol-dragbox"),this.minArea_=void 0!==t.minArea?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:Xo,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,n){const i=n[0]-e[0],o=n[1]-e[1];return i*i+o*o>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new ss(ns,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new ss(e?is:os,t.coordinate,t)),!1}handleDownEvent(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new ss(es,t.coordinate,t)),!0)}onBoxEnd(t){}}class as extends rs{constructor(t){super({condition:(t=t||{}).condition?t.condition:qo,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=void 0!==t.duration?t.duration:200,this.out_=void 0!==t.out&&t.out}onBoxEnd(t){const e=this.getMap().getView();let n=this.getGeometry();if(this.out_){const t=e.rotatedExtentForGeometry(n),i=e.getResolutionForExtentInternal(t),o=e.getResolution()/i;n=n.clone(),n.scale(o*o)}e.fitInternal(n,{duration:this.duration_,easing:xn})}}const hs="ArrowLeft",ls="ArrowUp",cs="ArrowRight",us="ArrowDown";class gs extends Fo{constructor(t){super(),t=t||{},this.defaultCondition_=function(t){return Qo(t)&&Yo(t)},this.condition_=void 0!==t.condition?t.condition:this.defaultCondition_,this.duration_=void 0!==t.duration?t.duration:100,this.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==f.KEYDOWN){const n=t.originalEvent,i=n.key;if(this.condition_(t)&&(i==us||i==hs||i==cs||i==ls)){const o=t.map.getView(),s=o.getResolution()*this.pixelDelta_;let r=0,a=0;i==us?a=-s:i==hs?r=-s:i==cs?r=s:a=s;const h=[r,a];We(h,o.getRotation()),function(t,e,n){const i=t.getCenterInternal();if(i){const o=[i[0]+e[0],i[1]+e[1]];t.animateInternal({duration:void 0!==n?n:250,easing:Cn,center:t.getConstrainedCenter(o)})}}(o,h,this.duration_),n.preventDefault(),e=!0}}return!e}}class ds extends Fo{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(t){return!function(t){const e=t.originalEvent;return R?e.metaKey:e.ctrlKey}(t)&&Yo(t)},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:100}handleEvent(t){let e=!1;if(t.type==f.KEYDOWN||t.type==f.KEYPRESS){const n=t.originalEvent,i=n.key;if(this.condition_(t)&&("+"===i||"-"===i)){const o=t.map,s="+"===i?this.delta_:-this.delta_;Ao(o.getView(),s,void 0,this.duration_),n.preventDefault(),e=!0}}return!e}}class ps{constructor(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let n=e-3;for(;n>0&&this.points_[n+2]>t;)n-=3;const i=this.points_[e+2]-this.points_[n+2];if(i<1e3/60)return!1;const o=this.points_[e]-this.points_[n],s=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(s,o),this.initialVelocity_=Math.sqrt(o*o+s*s)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class ms extends Fo{constructor(t){super(t=t||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,this.duration_=void 0!==t.duration?t.duration:250,this.timeout_=void 0!==t.timeout?t.timeout:80,this.useAnchor_=void 0===t.useAnchor||t.useAnchor,this.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution;const e=t.condition?t.condition:Bo;this.condition_=t.onFocusOnly?Vo(Wo,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t))return!0;if(t.type!==f.WHEEL)return!0;const e=t.map,n=t.originalEvent;let i;if(n.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==f.WHEEL&&(i=n.deltaY,P&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(i/=F),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(i*=40)),0===i)return!1;this.lastDelta_=i;const o=Date.now();void 0===this.startTime_&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(i)<4?"trackpad":"wheel");const s=e.getView();if("trackpad"===this.mode_&&!s.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(s.getAnimating()&&s.cancelAnimations(),s.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),s.adjustZoom(-i/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=i;const r=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,e),r),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let n=-Ot(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),Ao(e,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}class fs extends Ho{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=c),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==t.threshold?t.threshold:.3,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){let e=0;const n=this.targetPointers[0],i=this.targetPointers[1],o=Math.atan2(i.clientY-n.clientY,i.clientX-n.clientX);if(void 0!==this.lastAngle_){const t=o-this.lastAngle_;this.rotationDelta_+=t,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=t}this.lastAngle_=o;const s=t.map,r=s.getView();r.getConstraints().rotation!==yn&&(this.anchor_=s.getCoordinateFromPixelInternal(s.getEventPixel(Oo(this.targetPointers))),this.rotating_&&(s.render(),r.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){if(this.targetPointers.length<2){return t.map.getView().endInteraction(this.duration_),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}class _s extends Ho{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=c),super(e),this.anchor_=null,this.duration_=void 0!==t.duration?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const n=this.targetPointers[0],i=this.targetPointers[1],o=n.clientX-i.clientX,s=n.clientY-i.clientY,r=Math.sqrt(o*o+s*s);void 0!==this.lastDistance_&&(e=this.lastDistance_/r),this.lastDistance_=r;const a=t.map,h=a.getView();1!=e&&(this.lastScaleDelta_=e),this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(Oo(this.targetPointers))),a.render(),h.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}function ys(t){t=t||{};const e=new L,n=new ps(-.005,.05,100);(void 0===t.altShiftDragRotate||t.altShiftDragRotate)&&e.push(new Jo);(void 0===t.doubleClickZoom||t.doubleClickZoom)&&e.push(new Go({delta:t.zoomDelta,duration:t.zoomDuration}));(void 0===t.dragPan||t.dragPan)&&e.push(new $o({onFocusOnly:t.onFocusOnly,kinetic:n}));(void 0===t.pinchRotate||t.pinchRotate)&&e.push(new fs);(void 0===t.pinchZoom||t.pinchZoom)&&e.push(new _s({duration:t.zoomDuration}));(void 0===t.keyboard||t.keyboard)&&(e.push(new gs),e.push(new ds({delta:t.zoomDelta,duration:t.zoomDuration})));(void 0===t.mouseWheelZoom||t.mouseWheelZoom)&&e.push(new ms({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration}));return(void 0===t.shiftDragZoom||t.shiftDragZoom)&&e.push(new as({duration:t.zoomDuration})),e}function vs(t){return t[0]>0&&t[1]>0}function xs(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}function ws(t){t instanceof _i?t.setMapInternal(null):t instanceof so&&t.getLayers().forEach(ws)}function Cs(t,e){if(t instanceof _i)t.setMapInternal(e);else if(t instanceof so){const n=t.getLayers().getArray();for(let t=0,i=n.length;t<i;++t)Cs(n[t],e)}}class Ts extends b{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=function(t){let e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const n={},i=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new so({layers:t.layers});let o,s,r;n[yo]=i,n[xo]=t.target,n[wo]=t.view instanceof di?t.view:new di,void 0!==t.controls&&(Array.isArray(t.controls)?o=new L(t.controls.slice()):(V("function"==typeof t.controls.getArray,"Expected `controls` to be an array or an `ol/Collection.js`"),o=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?s=new L(t.interactions.slice()):(V("function"==typeof t.interactions.getArray,"Expected `interactions` to be an array or an `ol/Collection.js`"),s=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?r=new L(t.overlays.slice()):(V("function"==typeof t.overlays.getArray,"Expected `overlays` to be an array or an `ol/Collection.js`"),r=t.overlays):r=new L;return{controls:o,interactions:s,keyboardEventTarget:e,overlays:r,values:n}}(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:F,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=e.controls||ko(),this.interactions=e.interactions||ys({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Eo(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(yo,this.handleLayerGroupChanged_),this.addChangeListener(wo,this.handleViewChanged_),this.addChangeListener(vo,this.handleSizeChanged_),this.addChangeListener(xo,this.handleTargetChanged_),this.setProperties(e.values);const n=this;!t.view||t.view instanceof di||t.view.then(function(t){n.setView(new di(t))}),this.controls.addEventListener(S,t=>{t.element.setMap(this)}),this.controls.addEventListener(I,t=>{t.element.setMap(null)}),this.interactions.addEventListener(S,t=>{t.element.setMap(this)}),this.interactions.addEventListener(I,t=>{t.element.setMap(null)}),this.overlays_.addEventListener(S,t=>{this.addOverlayInternal_(t.element)}),this.overlays_.addEventListener(I,t=>{const e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}),this.controls.forEach(t=>{t.setMap(this)}),this.interactions.forEach(t=>{t.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){Cs(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,n){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(t),o=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance:0,s=void 0!==n.layerFilter?n.layerFilter:l,r=!1!==n.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,o,r,e,null,s,null)}getFeaturesAtPixel(t,e){const n=[];return this.forEachFeatureAtPixel(t,function(t){n.push(t)},e),n}getAllLayers(){const t=[];return function e(n){n.forEach(function(n){n instanceof so?e(n.getLayers()):t.push(n)})}(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(t),i=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:l,o=void 0!==e.hitTolerance?e.hitTolerance:0,s=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,o,s,i,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const e=this.viewport_.getBoundingClientRect(),n=this.getSize(),i=e.width/n[0],o=e.height/n[1],s="changedTouches"in t?t.changedTouches[0]:t;return[(s.clientX-e.left)/i,(s.clientY-e.top)/o]}getTarget(){return this.get(xo)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return rn(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?K(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(yo)}setLayers(t){const e=this.getLayerGroup();if(t instanceof L)return void e.setLayers(t);const n=e.getLayers();n.clear(),n.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const n=t[e];if(!n.visible)continue;const i=n.layer.getRenderer();if(i&&!i.ready)return!0;const o=n.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(t){const e=an(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?K(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(vo)}getView(){return this.get(wo)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,n,i){return function(t,e,n,i,o){if(!t||!(n in t.wantedTiles))return Co;if(!t.wantedTiles[n][e.getKey()])return Co;const s=t.viewState.center,r=i[0]-s[0],a=i[1]-s[1];return 65536*Math.log(o)+Math.sqrt(r*r+a*a)/o}(this.frameState_,t,e,n,i)}handleBrowserEvent(t,e){e=e||t.type;const n=new ao(e,this,t);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,n=e.type;if(n===co||n===f.WHEEL||n===f.KEYDOWN){const t=this.getOwnerDocument(),n=this.viewport_.getRootNode?this.viewport_.getRootNode():t,i=e.target;if(this.overlayContainerStopEvent_.contains(i)||!(n===t?t.documentElement:n).contains(i))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t)){const e=this.getInteractions().getArray().slice();for(let n=e.length-1;n>=0;n--){const i=e[n];if(i.getMap()!==this||!i.getActive()||!this.getTargetElement())continue;if(!i.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let n=this.maxTilesLoading_,i=n;if(t){const e=t.viewHints;if(e[xe]||e[we]){const e=Date.now()-t.time>8;n=e?0:8,i=e?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,i))}t&&this.renderer_&&!t.animate&&(!0===this.renderComplete_?(this.hasListener(ve)&&this.renderer_.dispatchRenderEvent(ve,t),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new ro(_o,this,t)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new ro(fo,this,t))));const n=this.postRenderFunctions_;for(let i=0,o=n.length;i<o;++i)n[i](this,t);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let t=0,e=this.targetChangeHandlerKeys_.length;t<e;++t)v(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(f.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(f.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Fi(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const t=this.targetElement_.getRootNode();t instanceof ShadowRoot&&this.resizeObserver_.unobserve(t.host),this.setSize(void 0)}const t=this.getTarget(),e="string"==typeof t?document.getElementById(t):t;if(this.targetElement_=e,e){e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new no(this)),this.mapBrowserEventHandler_=new uo(this,this.moveTolerance_);for(const e in ho)this.mapBrowserEventHandler_.addEventListener(ho[e],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(f.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(f.WHEEL,this.boundHandleBrowserEvent_,!!O&&{passive:!1});const t=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.targetChangeHandlerKeys_=[_(t,f.KEYDOWN,this.handleBrowserEvent,this),_(t,f.KEYPRESS,this.handleBrowserEvent,this)];const n=e.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.observe(n.host),this.resizeObserver_.observe(e)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(v(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(v(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=_(t,n,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=_(t,f.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(v),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new io("addlayer",t)),this.layerGroupPropertyListenerKeys_=[_(t,n,this.render,this),_(t,f.CHANGE,this.render,this),_(t,"addlayer",this.handleLayerAdd_,this),_(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const n=t[e].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){const t=this.frameState_;t&&this.renderer_.flushDeclutterItems(t)}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){ws(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),n=this.getView(),i=this.frameState_;let o=null;if(void 0!==e&&vs(e)&&n&&n.isDef()){const i=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),s=n.getState();if(o={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:wt(s.center,s.resolution,s.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:s,viewHints:i,wantedTiles:{},mapId:T(this),renderTargets:{}},s.nextCenter&&s.nextResolution){const t=isNaN(s.nextRotation)?s.rotation:s.nextRotation;o.nextExtent=wt(s.nextCenter,s.nextResolution,t,e)}}if(this.frameState_=o,this.renderer_.renderFrame(o),o){if(o.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,o.postRenderFunctions),i){(!this.previousExtent_||!Et(this.previousExtent_)&&!gt(o.extent,this.previousExtent_))&&(this.dispatchEvent(new ro(po,this,i)),this.previousExtent_=lt(this.previousExtent_))}this.previousExtent_&&!o.viewHints[xe]&&!o.viewHints[we]&&!gt(o.extent,this.previousExtent_)&&(this.dispatchEvent(new ro(mo,this,o)),et(o.extent,this.previousExtent_))}this.dispatchEvent(new ro(go,this,o)),this.renderComplete_=this.hasListener(fo)||this.hasListener(_o)||this.hasListener(ve)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new io("removelayer",e)),this.set(yo,t)}setSize(t){this.set(vo,t)}setTarget(t){this.set(xo,t)}setView(t){if(!t||t instanceof di)return void this.set(wo,t);this.set(wo,new di);const e=this;t.then(function(t){e.setView(new di(t))})}updateSize(){const t=this.getTargetElement();let e;if(t){const n=getComputedStyle(t),i=t.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),o=t.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);isNaN(i)||isNaN(o)||(e=[i,o],!vs(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&Qe("No map visible because the map container's width or height are 0."))}const n=this.getSize();!e||n&&h(e,n)||(this.setSize(e),this.updateViewportSize_(e))}updateViewportSize_(t){const e=this.getView();e&&e.setViewportSize(t)}}class Ds extends b{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if("function"==typeof t.getSimplifiedGeometry){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new Ds(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const n=this.getStyle();return n&&t.setStyle(n),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(v(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=_(t,f.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?function(t){if("function"==typeof t)return t;let e;if(Array.isArray(t))e=t;else{V("function"==typeof t.getZIndex,"Expected an `ol/style/Style` or an array of `ol/style/Style.js`");e=[t]}return function(){return e}}(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}let bs=class t{constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null}clone(){const e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}};function Ss(t,e,n,i,s,r,a){let h,l;const c=(n-e)/i;if(1===c)h=e;else if(2===c)h=e,l=s;else if(0!==c){let r=t[e],a=t[e+1],c=0;const u=[0];for(let o=e+i;o<n;o+=i){const e=t[o],n=t[o+1];c+=Math.sqrt((e-r)*(e-r)+(n-a)*(n-a)),u.push(c),r=e,a=n}const g=s*c,d=function(t,e,n){let i,s;n=n||o;let r=0,a=t.length,h=!1;for(;r<a;)i=r+(a-r>>1),s=+n(t[i],e),s<0?r=i+1:(a=i,h=!s);return h?r:~r}(u,g);d<0?(l=(g-u[-d-2])/(u[-d-1]-u[-d-2]),h=e+(-d-2)*i):h=e+d*i}a=a>1?a:2,r=r||new Array(a);for(let o=0;o<a;++o)r[o]=void 0===h?NaN:void 0===l?t[h+o]:Xt(t[h+o],t[h+i+o],l);return r}function Is(t,e,n,i,o,s){if(n==e)return null;let r;if(o<t[e+i-1])return s?(r=t.slice(e,e+i),r[i-1]=o,r):null;if(t[n-1]<o)return s?(r=t.slice(n-i,n),r[i-1]=o,r):null;if(o==t[e+i-1])return t.slice(e,e+i);let a=e/i,h=n/i;for(;a<h;){const e=a+h>>1;o<t[(e+1)*i-1]?h=e:a=e+1}const l=t[a*i-1];if(o==l)return t.slice((a-1)*i,(a-1)*i+i);const c=(o-l)/(t[(a+1)*i-1]-l);r=[];for(let u=0;u<i-1;++u)r.push(Xt(t[(a-1)*i+u],t[a*i+u],c));return r.push(o),r}function Es(t,e,n,i){let o=t[e],s=t[e+1],r=0;for(let a=e+i;a<n;a+=i){const e=t[a],n=t[a+1];r+=Math.sqrt((e-o)*(e-o)+(n-s)*(n-s)),o=e,s=n}return r}class Ms extends In{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}appendCoordinate(t){a(this.flatCoordinates,t),this.changed()}clone(){const t=new Ms(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<nt(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Nn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),kn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,n,i))}forEachSegment(t){return ni(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(e=void 0!==e&&e,Is(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return Xn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return Ss(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return Es(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=On(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Ms(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return ii(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=An(this.flatCoordinates,0,t,this.stride),this.changed()}}let Ls=class t{constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}};const Ns=0,Ps=1,ks=2,Rs=3,Fs=4;class As{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=xs(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new As({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return w()}getImage(t){return w()}getHitDetectionImage(){return w()}getPixelRatio(t){return 1}getImageState(){return w()}getImageSize(){return w()}getOrigin(){return w()}getSize(){return w()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=xs(t)}listenImageChange(t){w()}load(){w()}unlistenImageChange(t){w()}}function Gs(t){return Array.isArray(t)?ee(t):t}class Hs extends As{constructor(t){super({opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=void 0!==t.radius?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.size_,this.renderOptions_,this.render()}clone(){const t=this.getScale(),e=new Hs({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_,e=this.getDisplacement(),n=this.getScaleArray();return[t[0]/2-e[0]/n[0],t[1]/2+e[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){let e=this.canvases_[t];if(!e){const n=this.renderOptions_,i=Li(n.size*t,n.size*t);this.draw_(n,i,t),e=i.canvas,this.canvases_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return ks}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,n){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;let i=this.radius_,o=void 0===this.radius2_?i:this.radius2_;if(i<o){const t=i;i=o,o=t}const s=void 0===this.radius2_?this.points_:2*this.points_,r=2*Math.PI/s,a=o*Math.sin(r),h=i-Math.sqrt(o*o-a*a),l=Math.sqrt(a*a+h*h),c=l/a;if("miter"===t&&c<=n)return c*e;const u=e/2/c,g=e/2*(h/l),d=Math.sqrt((i+u)*(i+u)+g*g)-i;if(void 0===this.radius2_||"bevel"===t)return 2*d;const p=i*Math.sin(r),m=o-Math.sqrt(i*i-p*p),f=Math.sqrt(p*p+m*m)/p;if(f<=n){const t=f*e/2-o-i;return 2*Math.max(d,t)}return 2*d}createRenderOptions(){let t,e=Oi,n=Ki,i=0,o=null,s=0,r=0;this.stroke_&&(t=Gs(this.stroke_.getColor()??Wi),r=this.stroke_.getWidth()??1,o=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,n=this.stroke_.getLineJoin()??Ki,e=this.stroke_.getLineCap()??Oi,i=this.stroke_.getMiterLimit()??10);const a=this.calculateLineJoinSize_(n,r,i),h=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:t,strokeWidth:r,size:Math.ceil(2*h+a),lineCap:e,lineDash:o,lineDashOffset:s,lineJoin:n,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,e,n){if(e.scale(n,n),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let t=this.fill_.getColor();null===t&&(t=Hi),e.fillStyle=Gs(t),e.fill()}t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){let e;if(this.fill_){let n=this.fill_.getColor(),i=0;"string"==typeof n&&(n=Jt(n)),null===n?i=1:Array.isArray(n)&&(i=4===n.length?n[3]:1),0===i&&(e=Li(t.size,t.size),this.drawHitDetectionCanvas_(t,e))}return e?e.canvas:this.getImage(1)}createPath_(t){let e=this.points_;const n=this.radius_;if(e===1/0)t.arc(0,0,n,0,2*Math.PI);else{const i=void 0===this.radius2_?n:this.radius2_;void 0!==this.radius2_&&(e*=2);const o=this.angle_-Math.PI/2,s=2*Math.PI/e;for(let r=0;r<e;r++){const e=o+r*s,a=r%2==0?n:i;t.lineTo(a*Math.cos(e),a*Math.sin(e))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=Hi,e.fill(),t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}}class Os extends Hs{constructor(t){super({points:1/0,fill:(t=t||{radius:5}).fill,radius:t.radius,stroke:t.stroke,scale:void 0!==t.scale?t.scale:1,rotation:void 0!==t.rotation?t.rotation:0,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new Os({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}}let Vs=class t{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=Xs,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}clone(){let e=this.getGeometry();return e&&"object"==typeof e&&(e=e.clone()),new t({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Xs,this.geometry_=t}setZIndex(t){this.zIndex_=t}};let Ks=null;function Ws(t,e){if(!Ks){const t=new bs({color:"rgba(255,255,255,0.4)"}),e=new Ls({color:"#3399CC",width:1.25});Ks=[new Vs({image:new Os({fill:t,stroke:e,radius:5}),fill:t,stroke:e})]}return Ks}function Bs(){const t={},e=[255,255,255,1],n=[0,153,255,1];return t.Polygon=[new Vs({fill:new bs({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new Vs({stroke:new Ls({color:e,width:5})}),new Vs({stroke:new Ls({color:n,width:3})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new Vs({image:new Os({radius:6,fill:new bs({color:n}),stroke:new Ls({color:e,width:1.5})}),zIndex:1/0})],t.MultiPoint=t.Point,t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t}function Xs(t){return t.getGeometry()}let zs=class t{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=xs(void 0!==t.scale?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new bs({color:"#333"}),this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.placement_=void 0!==t.placement?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=void 0===t.padding?null:t.padding}clone(){const e=this.getScale();return new t({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=xs(void 0!==t?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}};function js(t,e,n,i,o){Qs(t,e,n||0,i||t.length-1,o||Ys)}function Qs(t,e,n,i,o){for(;i>n;){if(i-n>600){var s=i-n+1,r=e-n+1,a=Math.log(s),h=.5*Math.exp(2*a/3),l=.5*Math.sqrt(a*h*(s-h)/s)*(r-s/2<0?-1:1);Qs(t,e,Math.max(n,Math.floor(e-r*h/s+l)),Math.min(i,Math.floor(e+(s-r)*h/s+l)),o)}var c=t[e],u=n,g=i;for(qs(t,n,e),o(t[i],c)>0&&qs(t,n,i);u<g;){for(qs(t,u,g),u++,g--;o(t[u],c)<0;)u++;for(;o(t[g],c)>0;)g--}0===o(t[n],c)?qs(t,n,g):qs(t,++g,i),g<=e&&(n=g+1),e<=g&&(i=g-1)}}function qs(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function Ys(t,e){return t<e?-1:t>e?1:0}let Us=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(t){let e=this.data;const n=[];if(!hr(t,e))return n;const i=this.toBBox,o=[];for(;e;){for(let s=0;s<e.children.length;s++){const r=e.children[s],a=e.leaf?i(r):r;hr(t,a)&&(e.leaf?n.push(r):ar(t,a)?this._all(r,n):o.push(r))}e=o.pop()}return n}collides(t){let e=this.data;if(!hr(t,e))return!1;const n=[];for(;e;){for(let i=0;i<e.children.length;i++){const o=e.children[i],s=e.leaf?this.toBBox(o):o;if(hr(t,s)){if(e.leaf||ar(t,s))return!0;n.push(o)}}e=n.pop()}return!1}load(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(let e=0;e<t.length;e++)this.insert(t[e]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const t=this.data;this.data=e,e=t}this._insert(e,this.data.height-e.height-1,!0)}else this.data=e;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=lr([]),this}remove(t,e){if(!t)return this;let n=this.data;const i=this.toBBox(t),o=[],s=[];let r,a,h;for(;n||o.length;){if(n||(n=o.pop(),a=o[o.length-1],r=s.pop(),h=!0),n.leaf){const i=Zs(t,n.children,e);if(-1!==i)return n.children.splice(i,1),o.push(n),this._condense(o),this}h||n.leaf||!ar(n,i)?a?(r++,n=a.children[r],h=!1):n=null:(o.push(n),s.push(r),r=0,a=n,n=n.children[0])}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const n=[];for(;t;)t.leaf?e.push(...t.children):n.push(...t.children),t=n.pop();return e}_build(t,e,n,i){const o=n-e+1;let s,r=this._maxEntries;if(o<=r)return s=lr(t.slice(e,n+1)),$s(s,this.toBBox),s;i||(i=Math.ceil(Math.log(o)/Math.log(r)),r=Math.ceil(o/Math.pow(r,i-1))),s=lr([]),s.leaf=!1,s.height=i;const a=Math.ceil(o/r),h=a*Math.ceil(Math.sqrt(r));cr(t,e,n,h,this.compareMinX);for(let l=e;l<=n;l+=h){const e=Math.min(l+h-1,n);cr(t,l,e,a,this.compareMinY);for(let n=l;n<=e;n+=a){const o=Math.min(n+a-1,e);s.children.push(this._build(t,n,o,i-1))}}return $s(s,this.toBBox),s}_chooseSubtree(t,e,n,i){for(;i.push(e),!e.leaf&&i.length-1!==n;){let n,i=1/0,o=1/0;for(let s=0;s<e.children.length;s++){const r=e.children[s],a=ir(r),h=sr(t,r)-a;h<o?(o=h,i=a<i?a:i,n=r):h===o&&a<i&&(i=a,n=r)}e=n||e.children[0]}return e}_insert(t,e,n){const i=n?t:this.toBBox(t),o=[],s=this._chooseSubtree(i,this.data,e,o);for(s.children.push(t),tr(s,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)}_split(t,e){const n=t[e],i=n.children.length,o=this._minEntries;this._chooseSplitAxis(n,o,i);const s=this._chooseSplitIndex(n,o,i),r=lr(n.children.splice(s,n.children.length-s));r.height=n.height,r.leaf=n.leaf,$s(n,this.toBBox),$s(r,this.toBBox),e?t[e-1].children.push(r):this._splitRoot(n,r)}_splitRoot(t,e){this.data=lr([t,e]),this.data.height=t.height+1,this.data.leaf=!1,$s(this.data,this.toBBox)}_chooseSplitIndex(t,e,n){let i,o=1/0,s=1/0;for(let r=e;r<=n-e;r++){const e=Js(t,0,r,this.toBBox),a=Js(t,r,n,this.toBBox),h=rr(e,a),l=ir(e)+ir(a);h<o?(o=h,i=r,s=l<s?l:s):h===o&&l<s&&(s=l,i=r)}return i||n-e}_chooseSplitAxis(t,e,n){const i=t.leaf?this.compareMinX:er,o=t.leaf?this.compareMinY:nr;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,o)&&t.children.sort(i)}_allDistMargin(t,e,n,i){t.children.sort(i);const o=this.toBBox,s=Js(t,0,e,o),r=Js(t,n-e,n,o);let a=or(s)+or(r);for(let h=e;h<n-e;h++){const e=t.children[h];tr(s,t.leaf?o(e):e),a+=or(s)}for(let h=n-e-1;h>=e;h--){const e=t.children[h];tr(r,t.leaf?o(e):e),a+=or(r)}return a}_adjustParentBBoxes(t,e,n){for(let i=n;i>=0;i--)tr(e[i],t)}_condense(t){for(let e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children,e.splice(e.indexOf(t[n]),1)):this.clear():$s(t[n],this.toBBox)}};function Zs(t,e,n){if(!n)return e.indexOf(t);for(let i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function $s(t,e){Js(t,0,t.children.length,e,t)}function Js(t,e,n,i,o){o||(o=lr(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(let s=e;s<n;s++){const e=t.children[s];tr(o,t.leaf?i(e):e)}return o}function tr(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function er(t,e){return t.minX-e.minX}function nr(t,e){return t.minY-e.minY}function ir(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function or(t){return t.maxX-t.minX+(t.maxY-t.minY)}function sr(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function rr(t,e){const n=Math.max(t.minX,e.minX),i=Math.max(t.minY,e.minY),o=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,o-n)*Math.max(0,s-i)}function ar(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function hr(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function lr(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function cr(t,e,n,i,o){const s=[e,n];for(;s.length;){if((n=s.pop())-(e=s.pop())<=i)continue;const r=e+Math.ceil((n-e)/i/2)*i;js(t,r,e,n,o),s.push(e,r,r,n)}}class ur extends m{constructor(t,e,n,i){super(),this.extent=t,this.pixelRatio_=n,this.resolution=e,this.state="function"==typeof i?Ns:i,this.image_=null,this.loader="function"==typeof i?i:null}changed(){this.dispatchEvent(f.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==Ns&&this.loader){this.state=Ps,this.changed();const e=this.getResolution(),n=Array.isArray(e)?e[0]:e;(t=()=>this.loader(this.getExtent(),n,this.getPixelRatio()),function(){let e;try{e=t()}catch(n){return Promise.reject(n)}return e instanceof Promise?e:Promise.resolve(e)}()).then(t=>{"image"in t&&(this.image_=t.image),"extent"in t&&(this.extent=t.extent),"resolution"in t&&(this.resolution=t.resolution),"pixelRatio"in t&&(this.pixelRatio_=t.pixelRatio),(t instanceof HTMLImageElement||t instanceof ImageBitmap||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement)&&(this.image_=t),this.state=ks}).catch(t=>{this.state=Rs,console.error(t)}).finally(()=>this.changed())}var t}setImage(t){this.image_=t}setResolution(t){this.resolution=t}}function gr(t,e){return e&&(t.src=e),t.src&&G?new Promise((e,n)=>t.decode().then(()=>e(t)).catch(i=>t.complete&&t.width?e(t):n(i))):function(t){return new Promise((e,n)=>{function i(){s(),e(t)}function o(){s(),n(new Error("Image load error"))}function s(){t.removeEventListener("load",i),t.removeEventListener("error",o)}t.addEventListener("load",i),t.addEventListener("error",o)})}(t)}function dr(t,e){return e&&(t.src=e),t.src&&G&&H?t.decode().then(()=>createImageBitmap(t)).catch(e=>{if(t.complete&&t.width)return t;throw e}):gr(t)}let pr=null;class mr extends m{constructor(t,e,n,i,o){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=n,this.canvas_={},this.color_=o,this.imageState_=void 0===i?Ns:i,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=e,this.tainted_}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===ks){pr||(pr=Li(1,1,void 0,{willReadFrequently:!0})),pr.drawImage(this.image_,0,0);try{pr.getImageData(0,0,1,1),this.tainted_=!1}catch(t){pr=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(f.CHANGE)}handleImageError_(){this.imageState_=Rs,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ks,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],n=Li(t,e);n.fillRect(0,0,t,e),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Ns){this.image_||this.initializeImage_(),this.imageState_=Ps;try{void 0!==this.src_&&(this.image_.src=this.src_)}catch(t){this.handleImageError_()}this.image_ instanceof HTMLImageElement&&gr(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==ks)return;const e=this.image_,n=document.createElement("canvas");n.width=Math.ceil(e.width*t),n.height=Math.ceil(e.height*t);const i=n.getContext("2d");i.scale(t,t),i.drawImage(e,0,0),i.globalCompositeOperation="multiply",i.fillStyle=Qt(this.color_),i.fillRect(0,0,n.width/t,n.height/t),i.globalCompositeOperation="destination-in",i.drawImage(e,0,0),this.canvas_[t]=n}}function fr(t,e,n,i){return void 0!==n&&void 0!==i?[n/t,i/e]:void 0!==n?n/t:void 0!==i?i/e:1}class _r extends As{constructor(t){const e=void 0!==(t=t||{}).opacity?t.opacity:1,n=void 0!==t.rotation?t.rotation:0,i=void 0!==t.scale?t.scale:1,o=void 0!==t.rotateWithView&&t.rotateWithView;super({opacity:e,rotation:n,scale:i,displacement:void 0!==t.displacement?t.displacement:[0,0],rotateWithView:o,declutterMode:t.declutterMode}),this.anchor_=void 0!==t.anchor?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:"fraction",this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null;const s=void 0!==t.img?t.img:null;let r,a=t.src;if(V(!(void 0!==a&&s),"`image` and `src` cannot be provided at the same time"),void 0!==a&&0!==a.length||!s||(a=s.src||T(s)),V(void 0!==a&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),V(!((void 0!==t.width||void 0!==t.height)&&void 0!==t.scale),"`width` or `height` cannot be provided together with `scale`"),void 0!==t.src?r=Ns:void 0!==s&&(r=s instanceof HTMLImageElement?s.complete?s.src?ks:Ns:Ps:ks),this.color_=void 0!==t.color?Jt(t.color):null,this.iconImage_=function(t,e,n,i,o){let s=void 0===e?void 0:ie.get(e,n,o);return s||(s=new mr(t,t instanceof HTMLImageElement?t.src||void 0:e,n,i,o),ie.set(e,n,o,s)),s}(s,a,this.crossOrigin_,r,this.color_),this.offset_=void 0!==t.offset?t.offset:[0,0],this.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==t.size?t.size:null,void 0!==t.width||void 0!==t.height){let e,n;if(t.size)[e,n]=t.size;else{const i=this.getImage(1);if(i.width&&i.height)e=i.width,n=i.height;else if(i instanceof HTMLImageElement){this.initialOptions_=t;const e=()=>{if(this.unlistenImageChange(e),!this.initialOptions_)return;const n=this.iconImage_.getSize();this.setScale(fr(n[0],n[1],t.width,t.height))};return void this.listenImageChange(e)}}void 0!==e&&this.setScale(fr(e,n,t.width,t.height))}}clone(){let t,e,n;return this.initialOptions_?(e=this.initialOptions_.width,n=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new _r({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:n,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const e=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!e)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=e[0]),"fraction"==this.anchorYUnits_&&(t[1]*=e[1])}if("top-left"!=this.anchorOrigin_){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[0]=-t[0]+e[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[1]=-t[1]+e[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),n=this.getScaleArray();return[t[0]-e[0]/n[0],t[1]+e[1]/n[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if("top-left"!=this.offsetOrigin_){const e=this.getSize(),n=this.iconImage_.getSize();if(!e||!n)return null;t=t.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[0]=n[0]-e[0]-t[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[1]=n[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();return this.size_?this.size_[0]*t[0]:this.iconImage_.getImageState()==ks?this.iconImage_.getSize()[0]*t[0]:void 0}getHeight(){const t=this.getScaleArray();return this.size_?this.size_[1]*t[1]:this.iconImage_.getImageState()==ks?this.iconImage_.getSize()[1]*t[1]:void 0}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(f.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(f.CHANGE,t)}}let yr=0;const vr=1<<yr++,xr=1<<yr++,wr=1<<yr++,Cr=1<<yr++,Tr=1<<yr++,Dr=Math.pow(2,5)-1,br={[vr]:"boolean",[xr]:"number",[wr]:"string",[Cr]:"color",[Tr]:"number[]"},Sr=Object.keys(br).map(Number).sort(o);function Ir(t){const e=[];for(const n of Sr)Er(t,n)&&e.push(br[n]);return 0===e.length?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Er(t,e){return(t&e)===e}function Mr(t,e){return!!(t&e)}function Lr(t,e){return t===e}class Nr{constructor(t,e){this.type=t,this.value=e}}class Pr{constructor(t,e,...n){this.type=t,this.operator=e,this.args=n}}function kr(){return{variables:new Set,properties:new Set,featureId:!1,style:{}}}function Rr(t,e,n){switch(typeof t){case"boolean":return new Nr(vr,t);case"number":return new Nr(xr,t);case"string":{let e=wr;return function(t){try{return $t(t),!0}catch(e){return!1}}(t)&&(e|=Cr),Lr(e&n,0)||(e&=n),new Nr(e,t)}}if(!Array.isArray(t))throw new Error("Expression must be an array or a primitive value");if(0===t.length)throw new Error("Empty expression");if("string"==typeof t[0])return function(t,e,n){const i=t[0],o=Da[i];if(!o)throw new Error(`Unknown operator: ${i}`);return o(t,e,n)}(t,e,n);for(const o of t)if("number"!=typeof o)throw new Error("Expected an array of numbers");let i=Tr;return 3!==t.length&&4!==t.length||(i|=Cr),n&&(i&=n),new Nr(i,t)}const Fr="get",Ar="var",Gr="concat",Hr="geometry-type",Or="any",Vr="all",Kr="!",Wr="resolution",Br="zoom",Xr="time",zr="==",jr="!=",Qr=">",qr=">=",Yr="<",Ur="<=",Zr="*",$r="/",Jr="+",ta="-",ea="clamp",na="%",ia="^",oa="abs",sa="floor",ra="ceil",aa="round",ha="sin",la="cos",ca="atan",ua="sqrt",ga="match",da="between",pa="interpolate",ma="case",fa="in",_a="number",ya="string",va="array",xa="color",wa="id",Ca="band",Ta="palette",Da={[Fr]:La(([t,e])=>void 0!==e?function(t){switch(t){case"string":return wr;case"color":return Cr;case"number":return xr;case"boolean":return vr;case"number[]":return Tr;default:throw new Error(`Unrecognized type hint: ${t}`)}}(e.value):Dr,Sa(1,2),function(t,e){const n=Rr(t[1],e);if(!(n instanceof Nr))throw new Error("Expected a literal argument for get operation");if("string"!=typeof n.value)throw new Error("Expected a string argument for get operation");if(e.properties.add(n.value),3===t.length){return[n,Rr(t[2],e)]}return[n]}),[Ar]:La(([t])=>t.type,Sa(1,1),function(t,e,n,i){const o=t[1];if("string"!=typeof o)throw new Error("Expected a string argument for var operation");if(e.variables.add(o),!("variables"in e.style)||void 0===e.style.variables[o])return[new Nr(Dr,o)];const s=Rr(e.style.variables[o],e);if(s.value=o,i&&!Mr(i,s.type))throw new Error(`The variable ${o} has type ${Ir(s.type)} but the following type was expected: ${Ir(i)}`);return[s]}),[wa]:La(xr|wr,ba,function(t,e){e.featureId=!0}),[Gr]:La(wr,Sa(2,1/0),Ia(Dr)),[Hr]:La(wr,ba),[Wr]:La(xr,ba),[Br]:La(xr,ba),[Xr]:La(xr,ba),[Or]:La(vr,Sa(2,1/0),Ia(vr)),[Vr]:La(vr,Sa(2,1/0),Ia(vr)),[Kr]:La(vr,Sa(1,1),Ia(vr)),[zr]:La(vr,Sa(2,2),Ia(Dr),Ea),[jr]:La(vr,Sa(2,2),Ia(Dr),Ea),[Qr]:La(vr,Sa(2,2),Ia(Dr),Ea),[qr]:La(vr,Sa(2,2),Ia(Dr),Ea),[Yr]:La(vr,Sa(2,2),Ia(Dr),Ea),[Ur]:La(vr,Sa(2,2),Ia(Dr),Ea),[Zr]:La(t=>{let e=xr|Cr;for(let n=0;n<t.length;n++)e&=t[n].type;return e},Sa(2,1/0),Ia(xr|Cr),Ea),[$r]:La(xr,Sa(2,2),Ia(xr)),[Jr]:La(xr,Sa(2,1/0),Ia(xr)),[ta]:La(xr,Sa(2,2),Ia(xr)),[ea]:La(xr,Sa(3,3),Ia(xr)),[na]:La(xr,Sa(2,2),Ia(xr)),[ia]:La(xr,Sa(2,2),Ia(xr)),[oa]:La(xr,Sa(1,1),Ia(xr)),[sa]:La(xr,Sa(1,1),Ia(xr)),[ra]:La(xr,Sa(1,1),Ia(xr)),[aa]:La(xr,Sa(1,1),Ia(xr)),[ha]:La(xr,Sa(1,1),Ia(xr)),[la]:La(xr,Sa(1,1),Ia(xr)),[ca]:La(xr,Sa(1,2),Ia(xr)),[ua]:La(xr,Sa(1,1),Ia(xr)),[ga]:La(t=>{let e=Dr;for(let n=2;n<t.length;n+=2)e&=t[n].type;return e&=t[t.length-1].type,e},Sa(4,1/0),Ma,function(t,e,n,i){const o=t.length-1;let s=Rr(t[1],e).type;const r=Rr(t[t.length-1],e);let a=void 0!==i?i&r.type:r.type;const h=new Array(o-2);for(let c=0;c<o-2;c+=2){const n=Rr(t[c+2],e),i=Rr(t[c+3],e);s&=n.type,a&=i.type,h[c]=n,h[c+1]=i}const l=wr|xr|vr;if(!Mr(l,s))throw new Error(`Expected an input of type ${Ir(l)} for the interpolate operation, got ${Ir(s)} instead`);if(Lr(a,0))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(t));for(let c=0;c<o-2;c+=2){const n=Rr(t[c+2],e,s),i=Rr(t[c+3],e,a);h[c]=n,h[c+1]=i}return[Rr(t[1],e,s),...h,Rr(t[t.length-1],e,a)]}),[da]:La(vr,Sa(3,3),Ia(xr)),[pa]:La(t=>{let e=Cr|xr;for(let n=3;n<t.length;n+=2)e&=t[n].type;return e},Sa(6,1/0),Ma,function(t,e,n,i){const o=t[1];let s;switch(o[0]){case"linear":s=1;break;case"exponential":if(s=o[1],"number"!=typeof s)throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(s)} instead`);break;default:s=null}if(!s)throw new Error(`Invalid interpolation type: ${JSON.stringify(o)}`);s=Rr(s,e);let r=Rr(t[2],e);if(!Mr(xr,r.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${Ir(r.type)} instead`);r=Rr(t[2],e,xr);const a=new Array(t.length-3);for(let h=0;h<a.length;h+=2){let n=Rr(t[h+3],e);if(!Mr(xr,n.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${Ir(n.type)} at position ${h+2} instead`);let i=Rr(t[h+4],e);if(!Mr(xr|Cr,i.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${Ir(i.type)} at position ${h+3} instead`);n=Rr(t[h+3],e,xr),i=Rr(t[h+4],e,xr|Cr),a[h]=n,a[h+1]=i}return[s,r,...a]}),[ma]:La(t=>{let e=Dr;for(let n=1;n<t.length;n+=2)e&=t[n].type;return e&=t[t.length-1].type,e},Sa(3,1/0),function(t,e){const n=t[0],i=t.length-1;if(i%2==0)throw new Error(`An odd amount of arguments was expected for operation ${n}, got ${JSON.stringify(i)} instead`)},function(t,e,n,i){const o=Rr(t[t.length-1],e);let s=void 0!==i?i&o.type:o.type;const r=new Array(t.length-1);for(let a=0;a<r.length-1;a+=2){const n=Rr(t[a+1],e),i=Rr(t[a+2],e);if(!Mr(vr,n.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${Ir(n.type)} at position ${a} instead`);s&=i.type,r[a]=n,r[a+1]=i}if(Lr(s,0))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(t));for(let a=0;a<r.length-1;a+=2)r[a+1]=Rr(t[a+2],e,s);return r[r.length-1]=Rr(t[t.length-1],e,s),r}),[fa]:La(vr,Sa(2,2),function(t,e){let n=t[2];if(!Array.isArray(n))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if("string"==typeof n[0]){if("literal"!==n[0])throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(n[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');n=n[1]}let i=wr|xr;const o=new Array(n.length);for(let s=0;s<o.length;s++){const t=Rr(n[s],e);i&=t.type,o[s]=t}if(Lr(i,0))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(t));return[Rr(t[1],e,i),...o]}),[_a]:La(xr,Sa(1,1/0),Ia(Dr)),[ya]:La(wr,Sa(1,1/0),Ia(Dr)),[va]:La(t=>3===t.length||4===t.length?Tr|Cr:Tr,Sa(1,1/0),Ia(xr)),[xa]:La(Cr,Sa(3,4),Ia(xr)),[Ca]:La(xr,Sa(1,3),Ia(xr)),[Ta]:La(Cr,Sa(2,2),function(t,e){const n=Rr(t[1],e,xr);if(n.type!==xr)throw new Error(`The first argument of palette must be an number, got ${Ir(n.type)} instead`);const i=t[2];if(!Array.isArray(i))throw new Error("The second argument of palette must be an array");const o=new Array(i.length);for(let s=0;s<o.length;s++){const t=Rr(i[s],e,Cr);if(!(t instanceof Nr))throw new Error(`The palette color at index ${s} must be a literal value`);if(!Mr(t.type,Cr))throw new Error(`The palette color at index ${s} should be of type color, got ${Ir(t.type)} instead`);o[s]=t}return[n,...o]})};function ba(t,e){const n=t[0];if(1!==t.length)throw new Error(`Expected no arguments for ${n} operation`);return[]}function Sa(t,e){return function(n,i){const o=n[0],s=n.length-1;if(t===e){if(s!==t){throw new Error(`Expected ${t} argument${1===t?"":"s"} for ${o}, got ${s}`)}}else if(s<t||s>e){throw new Error(`Expected ${e===1/0?`${t} or more`:`${t} to ${e}`} arguments for ${o}, got ${s}`)}}}function Ia(t){return function(e,n){const i=e[0],o=e.length-1,s=new Array(o);for(let r=0;r<o;++r){const o=Rr(e[r+1],n);if(!Mr(t,o.type)){const e=Ir(t),n=Ir(o.type);throw new Error(`Unexpected type for argument ${r} of ${i} operation, got ${e} but expected ${n}`)}o.type&=t,s[r]=o}return s}}function Ea(t,e,n){const i=t[0],o=t.length-1;let s=Dr;for(let a=0;a<n.length;++a)s&=n[a].type;if(0===s)throw new Error(`No common type could be found for arguments of ${i} operation`);const r=new Array(o);for(let a=0;a<o;++a)r[a]=Rr(t[a+1],e,s);return r}function Ma(t,e){const n=t[0],i=t.length-1;if(i%2==1)throw new Error(`An even amount of arguments was expected for operation ${n}, got ${JSON.stringify(i)} instead`)}function La(t,...e){return function(n,i,o){const s=n[0];let r=[];for(let t=0;t<e.length;t++)r=e[t](n,i,r,o)||r;let a="function"==typeof t?t(r):t;if(void 0!==o){if(!Mr(a,o))throw new Error(`The following expression was expected to return ${Ir(o)}, but returns ${Ir(a)} instead: ${JSON.stringify(n)}`);a&=o}if(0===a)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(n)}`);return new Pr(a,s,...r)}}function Na(t,e,n){const i=Rr(t,n);if(!Mr(e,i.type)){const t=Ir(e),n=Ir(i.type);throw new Error(`Expected expression to be of type ${t}, got ${n}`)}return Pa(i)}function Pa(t,e){if(t instanceof Nr){if(t.type===Cr&&"string"==typeof t.value){const e=$t(t.value);return function(){return e}}return function(){return t.value}}const n=t.operator;switch(n){case _a:case ya:return function(t){const e=t.operator,n=t.args.length,i=new Array(n);for(let o=0;o<n;++o)i[o]=Pa(t.args[o]);switch(e){case _a:case ya:return t=>{for(let o=0;o<n;++o){const n=i[o](t);if(typeof n===e)return n}throw new Error(`Expected one of the values to be a ${e}`)};default:throw new Error(`Unsupported assertion operator ${e}`)}}(t);case Fr:case Ar:return function(t){const e=t.args[0],n=e.value;switch(t.operator){case Fr:return t=>t.properties[n];case Ar:return t=>t.variables[n];default:throw new Error(`Unsupported accessor operator ${t.operator}`)}}(t);case wa:return t=>t.featureId;case Gr:{const e=t.args.map(t=>Pa(t));return t=>"".concat(...e.map(e=>e(t).toString()))}case Wr:return t=>t.resolution;case Or:case Vr:case Kr:return function(t){const e=t.operator,n=t.args.length,i=new Array(n);for(let o=0;o<n;++o)i[o]=Pa(t.args[o]);switch(e){case Or:return t=>{for(let e=0;e<n;++e)if(i[e](t))return!0;return!1};case Vr:return t=>{for(let e=0;e<n;++e)if(!i[e](t))return!1;return!0};case Kr:return t=>!i[0](t);default:throw new Error(`Unsupported logical operator ${e}`)}}(t);case zr:case jr:case Yr:case Ur:case Qr:case qr:return function(t){const e=t.operator,n=Pa(t.args[0]),i=Pa(t.args[1]);switch(e){case zr:return t=>n(t)===i(t);case jr:return t=>n(t)!==i(t);case Yr:return t=>n(t)<i(t);case Ur:return t=>n(t)<=i(t);case Qr:return t=>n(t)>i(t);case qr:return t=>n(t)>=i(t);default:throw new Error(`Unsupported comparison operator ${e}`)}}(t);case Zr:case $r:case Jr:case ta:case ea:case na:case ia:case oa:case sa:case ra:case aa:case ha:case la:case ca:case ua:return function(t){const e=t.operator,n=t.args.length,i=new Array(n);for(let o=0;o<n;++o)i[o]=Pa(t.args[o]);switch(e){case Zr:return t=>{let e=1;for(let o=0;o<n;++o)e*=i[o](t);return e};case $r:return t=>i[0](t)/i[1](t);case Jr:return t=>{let e=0;for(let o=0;o<n;++o)e+=i[o](t);return e};case ta:return t=>i[0](t)-i[1](t);case ea:return t=>{const e=i[0](t),n=i[1](t);if(e<n)return n;const o=i[2](t);return e>o?o:e};case na:return t=>i[0](t)%i[1](t);case ia:return t=>Math.pow(i[0](t),i[1](t));case oa:return t=>Math.abs(i[0](t));case sa:return t=>Math.floor(i[0](t));case ra:return t=>Math.ceil(i[0](t));case aa:return t=>Math.round(i[0](t));case ha:return t=>Math.sin(i[0](t));case la:return t=>Math.cos(i[0](t));case ca:return 2===n?t=>Math.atan2(i[0](t),i[1](t)):t=>Math.atan(i[0](t));case ua:return t=>Math.sqrt(i[0](t));default:throw new Error(`Unsupported numeric operator ${e}`)}}(t);case ga:return function(t){const e=t.args.length,n=new Array(e);for(let i=0;i<e;++i)n[i]=Pa(t.args[i]);return t=>{const i=n[0](t);for(let o=1;o<e;o+=2)if(i===n[o](t))return n[o+1](t);return n[e-1](t)}}(t);case pa:return function(t){const e=t.args.length,n=new Array(e);for(let i=0;i<e;++i)n[i]=Pa(t.args[i]);return t=>{const i=n[0](t),o=n[1](t);let s,r;for(let a=2;a<e;a+=2){const e=n[a](t);let h=n[a+1](t);const l=Array.isArray(h);if(l&&(h=Ut(h)),e>=o)return 2===a?h:l?Ra(i,o,s,r,e,h):ka(i,o,s,r,e,h);s=e,r=h}return r}}(t);default:throw new Error(`Unsupported operator ${n}`)}}function ka(t,e,n,i,o,s){const r=o-n;if(0===r)return i;const a=e-n;return i+(1===t?a/r:(Math.pow(t,a)-1)/(Math.pow(t,r)-1))*(s-i)}function Ra(t,e,n,i,o,s){if(0===o-n)return i;const r=Zt(i),a=Zt(s);let h=a[2]-r[2];h>180?h-=360:h<-180&&(h+=360);return te(function(t){const e=Nt.rgb(kt.xyz(t));return e[3]=t[3],e}([ka(t,e,n,r[0],o,a[0]),ka(t,e,n,r[1],o,a[1]),r[2]+ka(t,e,n,0,o,h),ka(t,e,n,i[3],o,s[3])]))}function Fa(t){return!0}function Aa(t){const e=kr(),n=function(t,e){const n=t.length,i=new Array(n);for(let o=0;o<n;++o){const n=t[o],s="filter"in n?Na(n.filter,vr,e):Fa;let r;if(Array.isArray(n.style)){const t=n.style.length;r=new Array(t);for(let i=0;i<t;++i)r[i]=Ha(n.style[i],e)}else r=[Ha(n.style,e)];i[o]={filter:s,styles:r}}return function(e){const o=[];let s=!1;for(let r=0;r<n;++r){if((0,i[r].filter)(e)&&(!t[r].else||!s)){s=!0;for(const t of i[r].styles){const n=t(e);n&&o.push(n)}}}return o}}(t,e),i={variables:{},properties:{},resolution:NaN,featureId:null};return function(t,o){if(i.properties=t.getPropertiesInternal(),i.resolution=o,e.featureId){const e=t.getId();i.featureId=void 0!==e?e:null}return n(i)}}function Ga(t){const e=kr(),n=t.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=Ha(t[r],e);const o={variables:{},properties:{},resolution:NaN,featureId:null},s=new Array(n);return function(t,r){if(o.properties=t.getPropertiesInternal(),o.resolution=r,e.featureId){const e=t.getId();o.featureId=void 0!==e?e:null}let a=0;for(let e=0;e<n;++e){const t=i[e](o);t&&(s[a]=t,a+=1)}return s.length=a,s}}function Ha(t,e){const n=Oa(t,"",e),i=Va(t,"",e),o=function(t,e){const n="text-",i=Wa(t,n+"value",e);if(!i)return null;const o=Oa(t,n,e),s=Oa(t,n+"background-",e),r=Va(t,n,e),a=Va(t,n+"background-",e),h=Wa(t,n+"font",e),l=Ka(t,n+"max-angle",e),c=Ka(t,n+"offset-x",e),u=Ka(t,n+"offset-y",e),g=Ba(t,n+"overflow",e),d=Wa(t,n+"placement",e),p=Ka(t,n+"repeat",e),m=Qa(t,n+"scale",e),f=Ba(t,n+"rotate-with-view",e),_=Ka(t,n+"rotation",e),y=Wa(t,n+"align",e),v=Wa(t,n+"justify",e),x=Wa(t,n+"baseline",e),w=za(t,n+"padding",e),C=new zs({});return function(t){if(C.setText(i(t)),o&&C.setFill(o(t)),s&&C.setBackgroundFill(s(t)),r&&C.setStroke(r(t)),a&&C.setBackgroundStroke(a(t)),h&&C.setFont(h(t)),l&&C.setMaxAngle(l(t)),c&&C.setOffsetX(c(t)),u&&C.setOffsetY(u(t)),g&&C.setOverflow(g(t)),d){const e=d(t);if("point"!==e&&"line"!==e)throw new Error("Expected point or line for text-placement");C.setPlacement(e)}if(p&&C.setRepeat(p(t)),m&&C.setScale(m(t)),f&&C.setRotateWithView(f(t)),_&&C.setRotation(_(t)),y){const e=y(t);if("left"!==e&&"center"!==e&&"right"!==e&&"end"!==e&&"start"!==e)throw new Error("Expected left, right, center, start, or end for text-align");C.setTextAlign(e)}if(v){const e=v(t);if("left"!==e&&"right"!==e&&"center"!==e)throw new Error("Expected left, right, or center for text-justify");C.setJustify(e)}if(x){const e=x(t);if("bottom"!==e&&"top"!==e&&"middle"!==e&&"alphabetic"!==e&&"hanging"!==e)throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");C.setTextBaseline(e)}return w&&C.setPadding(w(t)),C}}(t,e),s=function(t,e){if("icon-src"in t)return function(t,e){const n="icon-",i=n+"src",o=Ja(t[i],i),s=ja(t,n+"anchor",e),r=Qa(t,n+"scale",e),a=Ka(t,n+"opacity",e),h=ja(t,n+"displacement",e),l=Ka(t,n+"rotation",e),c=Ba(t,n+"rotate-with-view",e),u=Ya(t,n+"anchor-origin"),g=Ua(t,n+"anchor-x-units"),d=Ua(t,n+"anchor-y-units"),p=function(t,e){const n=t[e];if(void 0===n)return;return eh(n,e)}(t,n+"color"),m=function(t,e){const n=t[e];if(void 0===n)return;if("string"!=typeof n)throw new Error(`Expected a string for ${e}`);return n}(t,n+"cross-origin"),f=function(t,e){const n=t[e];if(void 0===n)return;return $a(n,e)}(t,n+"offset"),_=Ya(t,n+"offset-origin"),y=qa(t,n+"width"),v=qa(t,n+"height"),x=function(t,e){const n=t[e];if(void 0===n)return;if("number"==typeof n)return xs(n);if(!Array.isArray(n))throw new Error(`Expected a number or size array for ${e}`);if(2!==n.length||"number"!=typeof n[0]||"number"!=typeof n[1])throw new Error(`Expected a number or size array for ${e}`);return n}(t,n+"size"),w=Za(t,n+"declutter"),C=new _r({src:o,anchorOrigin:u,anchorXUnits:g,anchorYUnits:d,color:p,crossOrigin:m,offset:f,offsetOrigin:_,height:v,width:y,size:x,declutterMode:w});return function(t){return a&&C.setOpacity(a(t)),h&&C.setDisplacement(h(t)),l&&C.setRotation(l(t)),c&&C.setRotateWithView(c(t)),r&&C.setScale(r(t)),s&&C.setAnchor(s(t)),C}}(t,e);if("shape-points"in t)return function(t,e){const n="shape-",i=n+"points",o=th(t[i],i),s=Oa(t,n,e),r=Va(t,n,e),a=Qa(t,n+"scale",e),h=ja(t,n+"displacement",e),l=Ka(t,n+"rotation",e),c=Ba(t,n+"rotate-with-view",e),u=qa(t,n+"radius"),g=qa(t,n+"radius1"),d=qa(t,n+"radius2"),p=qa(t,n+"angle"),m=Za(t,n+"declutter-mode"),f=new Hs({points:o,radius:u,radius1:g,radius2:d,angle:p,declutterMode:m});return function(t){return s&&f.setFill(s(t)),r&&f.setStroke(r(t)),h&&f.setDisplacement(h(t)),l&&f.setRotation(l(t)),c&&f.setRotateWithView(c(t)),a&&f.setScale(a(t)),f}}(t,e);if("circle-radius"in t)return function(t,e){const n="circle-",i=Oa(t,n,e),o=Va(t,n,e),s=Ka(t,n+"radius",e),r=Qa(t,n+"scale",e),a=ja(t,n+"displacement",e),h=Ka(t,n+"rotation",e),l=Ba(t,n+"rotate-with-view",e),c=Za(t,n+"declutter-mode"),u=new Os({radius:5,declutterMode:c});return function(t){return s&&u.setRadius(s(t)),i&&u.setFill(i(t)),o&&u.setStroke(o(t)),a&&u.setDisplacement(a(t)),h&&u.setRotation(h(t)),l&&u.setRotateWithView(l(t)),r&&u.setScale(r(t)),u}}(t,e);return null}(t,e),r=Ka(t,"z-index",e);if(!(n||i||o||s||p(t)))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t));const a=new Vs;return function(t){let e=!0;if(n){const i=n(t);i&&(e=!1),a.setFill(i)}if(i){const n=i(t);n&&(e=!1),a.setStroke(n)}if(o){const n=o(t);n&&(e=!1),a.setText(n)}if(s){const n=s(t);n&&(e=!1),a.setImage(n)}return r&&a.setZIndex(r(t)),e?null:a}}function Oa(t,e,n){const i=Xa(t,e+"fill-color",n);if(!i)return null;const o=new bs;return function(t){const e=i(t);return"none"===e?null:(o.setColor(e),o)}}function Va(t,e,n){const i=Ka(t,e+"stroke-width",n),o=Xa(t,e+"stroke-color",n);if(!i&&!o)return null;const s=Wa(t,e+"stroke-line-cap",n),r=Wa(t,e+"stroke-line-join",n),a=za(t,e+"stroke-line-dash",n),h=Ka(t,e+"stroke-line-dash-offset",n),l=Ka(t,e+"stroke-miter-limit",n),c=new Ls;return function(t){if(o){const e=o(t);if("none"===e)return null;c.setColor(e)}if(i&&c.setWidth(i(t)),s){const e=s(t);if("butt"!==e&&"round"!==e&&"square"!==e)throw new Error("Expected butt, round, or square line cap");c.setLineCap(e)}if(r){const e=r(t);if("bevel"!==e&&"round"!==e&&"miter"!==e)throw new Error("Expected bevel, round, or miter line join");c.setLineJoin(e)}return a&&c.setLineDash(a(t)),h&&c.setLineDashOffset(h(t)),l&&c.setMiterLimit(l(t)),c}}function Ka(t,e,n){if(!(e in t))return;const i=Na(t[e],xr,n);return function(t){return th(i(t),e)}}function Wa(t,e,n){if(!(e in t))return null;const i=Na(t[e],wr,n);return function(t){return Ja(i(t),e)}}function Ba(t,e,n){if(!(e in t))return null;const i=Na(t[e],vr,n);return function(t){const n=i(t);if("boolean"!=typeof n)throw new Error(`Expected a boolean for ${e}`);return n}}function Xa(t,e,n){if(!(e in t))return null;const i=Na(t[e],Cr|wr,n);return function(t){return eh(i(t),e)}}function za(t,e,n){if(!(e in t))return null;const i=Na(t[e],Tr,n);return function(t){return $a(i(t),e)}}function ja(t,e,n){if(!(e in t))return null;const i=Na(t[e],Tr,n);return function(t){const n=$a(i(t),e);if(2!==n.length)throw new Error(`Expected two numbers for ${e}`);return n}}function Qa(t,e,n){if(!(e in t))return null;const i=Na(t[e],Tr|xr,n);return function(t){return function(t,e){if("number"==typeof t)return t;const n=$a(t,e);if(2!==n.length)throw new Error(`Expected an array of two numbers for ${e}`);return n}(i(t),e)}}function qa(t,e){const n=t[e];if(void 0!==n){if("number"!=typeof n)throw new Error(`Expected a number for ${e}`);return n}}function Ya(t,e){const n=t[e];if(void 0!==n){if("bottom-left"!==n&&"bottom-right"!==n&&"top-left"!==n&&"top-right"!==n)throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return n}}function Ua(t,e){const n=t[e];if(void 0!==n){if("pixels"!==n&&"fraction"!==n)throw new Error(`Expected pixels or fraction for ${e}`);return n}}function Za(t,e){const n=t[e];if(void 0!==n){if("string"!=typeof n)throw new Error(`Expected a string for ${e}`);if("declutter"!==n&&"obstacle"!==n&&"none"!==n)throw new Error(`Expected declutter, obstacle, or none for ${e}`);return n}}function $a(t,e){if(!Array.isArray(t))throw new Error(`Expected an array for ${e}`);const n=t.length;for(let i=0;i<n;++i)if("number"!=typeof t[i])throw new Error(`Expected an array of numbers for ${e}`);return t}function Ja(t,e){if("string"!=typeof t)throw new Error(`Expected a string for ${e}`);return t}function th(t,e){if("number"!=typeof t)throw new Error(`Expected a number for ${e}`);return t}function eh(t,e){if("string"==typeof t)return t;const n=$a(t,e),i=n.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return n}const nh="renderOrder";class ih extends _i{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=void 0!==t.declutter&&t.declutter,this.renderBuffer_=void 0!==t.renderBuffer?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,this.updateWhileInteracting_=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(nh)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new Us(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(nh,t)}setStyle(t){this.style_=function(t){if(void 0===t)return Ws;if(!t)return null;if("function"==typeof t)return t;if(t instanceof Vs)return t;if(!Array.isArray(t))return Ga([t]);if(0===t.length)return[];const e=t.length,n=t[0];if(n instanceof Vs){const n=new Array(e);for(let i=0;i<e;++i){const e=t[i];if(!(e instanceof Vs))throw new Error("Expected a list of style instances");n[i]=e}return n}if("style"in n){const n=new Array(e);for(let i=0;i<e;++i){const e=t[i];if(!("style"in e))throw new Error("Expected a list of rules with a style property");n[i]=e}return Aa(n)}const i=t;return Ga(i)}(t),this.styleFunction_=null===t?void 0:function(t){let e;if("function"==typeof t)e=t;else{let n;Array.isArray(t)?n=t:(V("function"==typeof t.getZIndex,"Expected an `Style` or an array of `Style`"),n=[t]),e=function(){return n}}return e}(this.style_),this.changed()}}const oh=0,sh=1,rh=2,ah=3,hh=4,lh=5,ch=6,uh=7,gh=8,dh=9,ph=10,mh=11,fh=12,_h=[gh],yh=[fh],vh=[sh],xh=[ah];class wh{drawCustom(t,e,n,i){}drawGeometry(t){}setStyle(t){}drawCircle(t,e){}drawFeature(t,e){}drawGeometryCollection(t,e){}drawLineString(t,e){}drawMultiLineString(t,e){}drawMultiPoint(t,e){}drawMultiPolygon(t,e){}drawPoint(t,e){}drawPolygon(t,e){}drawText(t,e){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}class Ch extends wh{constructor(t,e,n,i){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})}appendFlatPointCoordinates(t,e){const n=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,o=this.coordinates;let s=o.length;for(let r=0,a=t.length;r<a;r+=e)i[0]=t[r],i[1]=t[r+1],it(n,i)&&(o[s++]=i[0],o[s++]=i[1]);return s}appendFlatLineCoordinates(t,e,n,i,o,s){const r=this.coordinates;let a=r.length;const h=this.getBufferedMaxExtent();s&&(e+=i);let l=t[e],c=t[e+1];const u=this.tmpCoordinate_;let g,d,p,m=!0;for(g=e+i;g<n;g+=i)u[0]=t[g],u[1]=t[g+1],p=rt(h,u),p!==d?(m&&(r[a++]=l,r[a++]=c,m=!1),r[a++]=u[0],r[a++]=u[1]):p===Q?(r[a++]=u[0],r[a++]=u[1],m=!1):m=!0,l=u[0],c=u[1],d=p;return(o&&m||g===e+i)&&(r[a++]=l,r[a++]=c),a}drawCustomCoordinates_(t,e,n,i,o){for(let s=0,r=n.length;s<r;++s){const r=n[s],a=this.appendFlatLineCoordinates(t,e,r,i,!1,!1);o.push(a),e=r}return e}drawCustom(t,e,n,i){this.beginGeometry(t,e);const o=t.getType(),s=t.getStride(),r=this.coordinates.length;let a,h,l,c,u;switch(o){case"MultiPolygon":a=t.getOrientedFlatCoordinates(),c=[];const e=t.getEndss();u=0;for(let t=0,n=e.length;t<n;++t){const n=[];u=this.drawCustomCoordinates_(a,u,e[t],s,n),c.push(n)}this.instructions.push([hh,r,c,t,n,jn]),this.hitDetectionInstructions.push([hh,r,c,t,i||n,jn]);break;case"Polygon":case"MultiLineString":l=[],a="Polygon"==o?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),u=this.drawCustomCoordinates_(a,0,t.getEnds(),s,l),this.instructions.push([hh,r,l,t,n,zn]),this.hitDetectionInstructions.push([hh,r,l,t,i||n,zn]);break;case"LineString":case"Circle":a=t.getFlatCoordinates(),h=this.appendFlatLineCoordinates(a,0,a.length,s,!1,!1),this.instructions.push([hh,r,h,t,n,Xn]),this.hitDetectionInstructions.push([hh,r,h,t,i||n,Xn]);break;case"MultiPoint":a=t.getFlatCoordinates(),h=this.appendFlatPointCoordinates(a,s),h>r&&(this.instructions.push([hh,r,h,t,n,Xn]),this.hitDetectionInstructions.push([hh,r,h,t,i||n,Xn]));break;case"Point":a=t.getFlatCoordinates(),this.coordinates.push(a[0],a[1]),h=this.coordinates.length,this.instructions.push([hh,r,h,t,n]),this.hitDetectionInstructions.push([hh,r,h,t,i||n])}this.endGeometry(e)}beginGeometry(t,e){this.beginGeometryInstruction1_=[oh,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[oh,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;let e;t.reverse();const n=t.length;let i,o,s=-1;for(e=0;e<n;++e)i=t[e],o=i[0],o==uh?s=e:o==oh&&(i[2]=e,r(this.hitDetectionInstructions,s,e),s=-1)}setFillStrokeStyle(t,e){const n=this.state;if(t){const e=t.getColor();n.fillStyle=Gs(e||Hi)}else n.fillStyle=void 0;if(e){const t=e.getColor();n.strokeStyle=Gs(t||Wi);const i=e.getLineCap();n.lineCap=void 0!==i?i:Oi;const o=e.getLineDash();n.lineDash=o?o.slice():Vi;const s=e.getLineDashOffset();n.lineDashOffset=s||0;const r=e.getLineJoin();n.lineJoin=void 0!==r?r:Ki;const a=e.getWidth();n.lineWidth=void 0!==a?a:1;const h=e.getMiterLimit();n.miterLimit=void 0!==h?h:10,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(t){const e=t.fillStyle,n=[ph,e];return"string"!=typeof e&&n.push(!0),n}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[mh,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const n=t.fillStyle;"string"==typeof n&&t.currentFillStyle==n||(void 0!==n&&this.instructions.push(e.call(this,t)),t.currentFillStyle=n)}updateStrokeStyle(t,e){const n=t.strokeStyle,i=t.lineCap,o=t.lineDash,s=t.lineDashOffset,r=t.lineJoin,a=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=n||t.currentLineCap!=i||o!=t.currentLineDash&&!h(t.currentLineDash,o)||t.currentLineDashOffset!=s||t.currentLineJoin!=r||t.currentLineWidth!=a||t.currentMiterLimit!=l)&&(void 0!==n&&e.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=i,t.currentLineDash=o,t.currentLineDashOffset=s,t.currentLineJoin=r,t.currentLineWidth=a,t.currentMiterLimit=l)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[uh,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=et(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;tt(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class Th extends Ch{constructor(t,e,n,i){super(t,e,n,i)}drawFlatCoordinatess_(t,e,n,i){const o=this.state,s=void 0!==o.fillStyle,r=void 0!==o.strokeStyle,a=n.length;this.instructions.push(vh),this.hitDetectionInstructions.push(vh);for(let h=0;h<a;++h){const o=n[h],s=this.coordinates.length,a=this.appendFlatLineCoordinates(t,e,o,i,!0,!r),l=[dh,s,a];this.instructions.push(l),this.hitDetectionInstructions.push(l),r&&(this.instructions.push(xh),this.hitDetectionInstructions.push(xh)),e=o}return s&&(this.instructions.push(_h),this.hitDetectionInstructions.push(_h)),r&&(this.instructions.push(yh),this.hitDetectionInstructions.push(yh)),e}drawCircle(t,e){const n=this.state,i=n.fillStyle,o=n.strokeStyle;if(void 0===i&&void 0===o)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([ph,Hi]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([mh,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Vi,0]);const s=t.getFlatCoordinates(),r=t.getStride(),a=this.coordinates.length;this.appendFlatLineCoordinates(s,0,s.length,r,!1,!1);const h=[rh,a];this.instructions.push(vh,h),this.hitDetectionInstructions.push(vh,h),void 0!==n.fillStyle&&(this.instructions.push(_h),this.hitDetectionInstructions.push(_h)),void 0!==n.strokeStyle&&(this.instructions.push(yh),this.hitDetectionInstructions.push(yh)),this.endGeometry(e)}drawPolygon(t,e){const n=this.state,i=n.fillStyle,o=n.strokeStyle;if(void 0===i&&void 0===o)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([ph,Hi]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([mh,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Vi,0]);const s=t.getEnds(),r=t.getOrientedFlatCoordinates(),a=t.getStride();this.drawFlatCoordinatess_(r,0,s,a),this.endGeometry(e)}drawMultiPolygon(t,e){const n=this.state,i=n.fillStyle,o=n.strokeStyle;if(void 0===i&&void 0===o)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([ph,Hi]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([mh,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Vi,0]);const s=t.getEndss(),r=t.getOrientedFlatCoordinates(),a=t.getStride();let h=0;for(let l=0,c=s.length;l<c;++l)h=this.drawFlatCoordinatess_(r,h,s[l],a);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(0!==t){const e=this.coordinates;for(let n=0,i=e.length;n<i;++n)e[n]=Kn(e[n],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}}function Dh(t,e,n,i,o){const s=[];let r=n,a=0,h=e.slice(n,2);for(;a<t&&r+o<i;){const[n,i]=h.slice(-2),l=e[r+o],c=e[r+o+1],u=Math.sqrt((l-n)*(l-n)+(c-i)*(c-i));if(a+=u,a>=t){const e=(t-a+u)/u,g=Xt(n,l,e),d=Xt(i,c,e);h.push(g,d),s.push(h),h=[g,d],a==t&&(r+=o),a=0}else if(a<t)h.push(e[r+o],e[r+o+1]),r+=o;else{const t=u-a,e=Xt(n,l,t/u),g=Xt(i,c,t/u);h.push(e,g),s.push(h),h=[e,g],a=0,r+=o}}return a>0&&s.push(h),s}function bh(t,e,n,i,o){let s,r,a,h,l,c,u,g,d,p,m=n,f=n,_=0,y=0,v=n;for(r=n;r<i;r+=o){const n=e[r],i=e[r+1];void 0!==l&&(d=n-l,p=i-c,h=Math.sqrt(d*d+p*p),void 0!==u&&(y+=a,s=Math.acos((u*d+g*p)/(a*h)),s>t&&(y>_&&(_=y,m=v,f=r),y=0,v=r-o)),a=h,u=d,g=p),l=n,c=i}return y+=h,y>_?[v,r]:[m,f]}const Sh={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};const Ih={Circle:Th,Default:Ch,Image:class extends Ch{constructor(t,e,n,i){super(t,e,n,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const n=t.getFlatCoordinates(),i=t.getStride(),o=this.coordinates.length,s=this.appendFlatPointCoordinates(n,i);this.instructions.push([ch,o,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ch,o,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const n=t.getFlatCoordinates(),i=t.getStride(),o=this.coordinates.length,s=this.appendFlatPointCoordinates(n,i);this.instructions.push([ch,o,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ch,o,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const n=t.getAnchor(),i=t.getSize(),o=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=t.getOpacity(),this.originX_=o[0],this.originY_=o[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=i[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}},LineString:class extends Ch{constructor(t,e,n,i){super(t,e,n,i)}drawFlatCoordinates_(t,e,n,i){const o=this.coordinates.length,s=this.appendFlatLineCoordinates(t,e,n,i,!1,!1),r=[dh,o,s];return this.instructions.push(r),this.hitDetectionInstructions.push(r),n}drawLineString(t,e){const n=this.state,i=n.strokeStyle,o=n.lineWidth;if(void 0===i||void 0===o)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([mh,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Vi,0],vh);const s=t.getFlatCoordinates(),r=t.getStride();this.drawFlatCoordinates_(s,0,s.length,r),this.hitDetectionInstructions.push(yh),this.endGeometry(e)}drawMultiLineString(t,e){const n=this.state,i=n.strokeStyle,o=n.lineWidth;if(void 0===i||void 0===o)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([mh,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Vi,0],vh);const s=t.getEnds(),r=t.getFlatCoordinates(),a=t.getStride();let h=0;for(let l=0,c=s.length;l<c;++l)h=this.drawFlatCoordinates_(r,h,s[l],a);this.hitDetectionInstructions.push(yh),this.endGeometry(e)}finish(){const t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(yh),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(yh),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(vh)}},Polygon:Th,Text:class extends Ch{constructor(t,e,n,i){super(t,e,n,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Hi]={fillStyle:Hi},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e){const n=this.textFillState_,i=this.textStrokeState_,o=this.textState_;if(""===this.text_||!o||!n&&!i)return;const s=this.coordinates;let r=s.length;const a=t.getType();let h=null,l=t.getStride();if("line"!==o.placement||"LineString"!=a&&"MultiLineString"!=a&&"Polygon"!=a&&"MultiPolygon"!=a){let n=o.overflow?null:[];switch(a){case"Point":case"MultiPoint":h=t.getFlatCoordinates();break;case"LineString":h=t.getFlatMidpoint();break;case"Circle":h=t.getCenter();break;case"MultiLineString":h=t.getFlatMidpoints(),l=2;break;case"Polygon":h=t.getFlatInteriorPoint(),o.overflow||n.push(h[2]/this.resolution),l=3;break;case"MultiPolygon":const e=t.getFlatInteriorPoints();h=[];for(let t=0,i=e.length;t<i;t+=3)o.overflow||n.push(e[t+2]/this.resolution),h.push(e[t],e[t+1]);if(0===h.length)return;l=2}const i=this.appendFlatPointCoordinates(h,l);if(i===r)return;if(n&&(i-r)/2!==h.length/l){let t=r/2;n=n.filter((e,n)=>{const i=s[2*(t+n)]===h[n*l]&&s[2*(t+n)+1]===h[n*l+1];return i||--t,i})}this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&this.updateFillStyle(this.state,this.createFill),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);let c=o.padding;if(c!=zi&&(o.scale[0]<0||o.scale[1]<0)){let t=o.padding[0],e=o.padding[1],n=o.padding[2],i=o.padding[3];o.scale[0]<0&&(e=-e,i=-i),o.scale[1]<0&&(t=-t,n=-n),c=[t,e,n,i]}const u=this.pixelRatio;this.instructions.push([ch,r,i,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,c==zi?zi:c.map(function(t){return t*u}),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,n]);const g=1/u,d=this.state.fillStyle;o.backgroundFill&&(this.state.fillStyle=Hi,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([ch,r,i,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[g,g],NaN,void 0,this.declutterImageWithText_,c,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Hi:this.fillKey_,this.textOffsetX_,this.textOffsetY_,n]),o.backgroundFill&&(this.state.fillStyle=d,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(e)}else{if(!It(this.getBufferedMaxExtent(),t.getExtent()))return;let n;if(h=t.getFlatCoordinates(),"LineString"==a)n=[h.length];else if("MultiLineString"==a)n=t.getEnds();else if("Polygon"==a)n=t.getEnds().slice(0,1);else if("MultiPolygon"==a){const e=t.getEndss();n=[];for(let t=0,i=e.length;t<i;++t)n.push(e[t][0])}this.beginGeometry(t,e);const i=o.repeat,c=i?void 0:o.textAlign;let u=0;for(let t=0,e=n.length;t<e;++t){let e;e=i?Dh(i*this.resolution,h,u,n[t],l):[h.slice(u,n[t])];for(let i=0,a=e.length;i<a;++i){const a=e[i];let h=0,g=a.length;if(null==c){const t=bh(o.maxAngle,a,0,a.length,2);h=t[0],g=t[1]}for(let t=h;t<g;t+=l)s.push(a[t],a[t+1]);const d=s.length;u=n[t],this.drawChars_(r,d),r=d}}this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,n=this.textFillState_,i=this.strokeKey_;t&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const o=this.textKey_;o in this.textStates||(this.textStates[o]={font:e.font,textAlign:e.textAlign||Bi,justify:e.justify,textBaseline:e.textBaseline||Xi,scale:e.scale});const s=this.fillKey_;n&&(s in this.fillStates||(this.fillStates[s]={fillStyle:n.fillStyle}))}drawChars_(t,e){const n=this.textStrokeState_,i=this.textState_,o=this.strokeKey_,s=this.textKey_,r=this.fillKey_;this.saveTextStates_();const a=this.pixelRatio,h=Sh[i.textBaseline],l=this.textOffsetY_*a,c=this.text_,u=n?n.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([lh,t,e,h,i.overflow,r,i.maxAngle,a,l,o,u*a,c,s,1]),this.hitDetectionInstructions.push([lh,t,e,h,i.overflow,r?Hi:r,i.maxAngle,a,l,o,u*a,c,s,1/a])}setTextStyle(t,e){let n,i,o;if(t){const e=t.getFill();e?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=Gs(e.getColor()||Hi)):(i=null,this.textFillState_=i);const s=t.getStroke();if(s){o=this.textStrokeState_,o||(o={},this.textStrokeState_=o);const t=s.getLineDash(),e=s.getLineDashOffset(),n=s.getWidth(),i=s.getMiterLimit();o.lineCap=s.getLineCap()||Oi,o.lineDash=t?t.slice():Vi,o.lineDashOffset=void 0===e?0:e,o.lineJoin=s.getLineJoin()||Ki,o.lineWidth=void 0===n?1:n,o.miterLimit=void 0===i?10:i,o.strokeStyle=Gs(s.getColor()||Wi)}else o=null,this.textStrokeState_=o;n=this.textState_;const r=t.getFont()||Gi;Ui(r);const a=t.getScaleArray();n.overflow=t.getOverflow(),n.font=r,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.repeat=t.getRepeat(),n.justify=t.getJustify(),n.textBaseline=t.getTextBaseline()||Xi,n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||zi,n.scale=void 0===a?[1,1]:a;const h=t.getOffsetX(),l=t.getOffsetY(),c=t.getRotateWithView(),u=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===h?0:h,this.textOffsetY_=void 0===l?0:l,this.textRotateWithView_=void 0!==c&&c,this.textRotation_=void 0===u?0:u,this.strokeKey_=o?("string"==typeof o.strokeStyle?o.strokeStyle:T(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=i?"string"==typeof i.fillStyle?i.fillStyle:"|"+T(i.fillStyle):""}else this.text_="";this.declutterImageWithText_=e}}};class Eh{constructor(t,e,n,i){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=i,this.resolution_=n,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const n=this.buildersByZIndex_[e];for(const i in n){const o=n[i].finish();t[e][i]=o}}return t}getBuilder(t,e){const n=void 0!==t?t.toString():"0";let i=this.buildersByZIndex_[n];void 0===i&&(i={},this.buildersByZIndex_[n]=i);let o=i[e];if(void 0===o){o=new(0,Ih[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[e]=o}return o}}class Mh extends x{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return w()}getData(t){return null}prepareFrame(t){return w()}renderFrame(t,e){return w()}loadedTileCallback(t,e,n){t[e]||(t[e]={}),t[e][n.tileCoord.toString()]=n}createLoadedTileFinder(t,e,n){return(i,o)=>{const s=this.loadedTileCallback.bind(this,n,i);return t.forEachLoadedTile(e,i,o,s)}}forEachFeatureAtCoordinate(t,e,n,i,o){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const e=t.target;e.getState()!==ks&&e.getState()!==Rs||this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=ks&&e!=Rs&&t.addEventListener(f.CHANGE,this.boundHandleImageChange_),e==Ns&&(t.load(),e=t.getState()),e==ks}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const Lh=[];let Nh=null;class Ph extends Mh{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=[1,0,0,1,0,0],this.pixelTransform=[1,0,0,1,0,0],this.inversePixelTransform=[1,0,0,1,0,0],this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,n){let i;Nh||(Nh=Li(1,1,void 0,{willReadFrequently:!0})),Nh.clearRect(0,0,1,1);try{Nh.drawImage(t,e,n,1,1,0,0,1,1),i=Nh.getImageData(0,0,1,1).data}catch(o){return Nh=null,null}return i}getBackground(t){let e=this.getLayer().getBackground();return"function"==typeof e&&(e=e(t.viewState.resolution)),e||void 0}useContainer(t,e,n){const i=this.getLayer().getClassName();let o,s;if(t&&t.className===i&&(!n||t&&t.style.backgroundColor&&h(Jt(t.style.backgroundColor),Jt(n)))){const e=t.firstElementChild;e instanceof HTMLCanvasElement&&(s=e.getContext("2d"))}if(s&&s.canvas.style.transform===e?(this.container=t,this.context=s,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){o=document.createElement("div"),o.className=i;let t=o.style;t.position="absolute",t.width="100%",t.height="100%",s=Li();const e=s.canvas;o.appendChild(e),t=e.style,t.position="absolute",t.left="0",t.transformOrigin="top left",this.container=o,this.context=s}this.containerReused||!n||this.container.style.backgroundColor||(this.container.style.backgroundColor=n)}clipUnrotated(t,e,n){const i=Dt(n),o=bt(n),s=vt(n),r=yt(n);K(e.coordinateToPixelTransform,i),K(e.coordinateToPixelTransform,o),K(e.coordinateToPixelTransform,s),K(e.coordinateToPixelTransform,r);const a=this.inversePixelTransform;K(a,i),K(a,o),K(a,s),K(a,r),t.save(),t.beginPath(),t.moveTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.clip()}dispatchRenderEvent_(t,e,n){const i=this.getLayer();if(i.hasListener(t)){const o=new wi(t,this.inversePixelTransform,n,e);i.dispatchEvent(o)}}preRender(t,e){this.frameState=e,this.dispatchRenderEvent_(me,t,e)}postRender(t,e){this.dispatchRenderEvent_(fe,t,e)}getRenderTransform(t,e,n,i,o,s,r){const a=o/2,h=s/2,l=i/e,c=-l,u=-t[0]+r,g=-t[1];return W(this.tempTransform,a,h,l,c,-n,u,g)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function kh(t,e,n,i,o,s,r,a,h,l,c,u){let g=t[e],d=t[e+1],p=0,m=0,f=0,_=0;function y(){p=g,m=d,g=t[e+=i],d=t[e+1],_+=f,f=Math.sqrt((g-p)*(g-p)+(d-m)*(d-m))}do{y()}while(e<n-i&&_+f<s);let v=0===f?0:(s-_)/f;const x=Xt(p,g,v),w=Xt(m,d,v),C=e-i,T=_,D=s+a*h(l,o,c);for(;e<n-i&&_+f<D;)y();v=0===f?0:(D-_)/f;const b=Xt(p,g,v),S=Xt(m,d,v);let I;if(u){const t=[x,w,b,S];Dn(t,0,4,2,u,t,t),I=t[0]>t[2]}else I=x>b;const E=Math.PI,M=[],L=C+i===e;let N;if(f=0,_=T,g=t[e=C],d=t[e+1],L){y(),N=Math.atan2(d-m,g-p),I&&(N+=N>0?-E:E);const t=(b+x)/2,e=(S+w)/2;return M[0]=[t,e,(D-s)/2,N,o],M}for(let P=0,k=(o=o.replace(/\n/g," ")).length;P<k;){y();let t=Math.atan2(d-m,g-p);if(I&&(t+=t>0?-E:E),void 0!==N){let e=t-N;if(e+=e>E?-2*E:e<-E?2*E:0,Math.abs(e)>r)return null}N=t;const u=P;let x=0;for(;P<k;++P){const t=a*h(l,o[I?k-P-1:P],c);if(e+i<n&&_+f<s+x+t/2)break;x+=t}if(P===u)continue;const w=I?o.substring(k-u,k-P):o.substring(u,P);v=0===f?0:(s+x/2-_)/f;const C=Xt(p,g,v),T=Xt(m,d,v);M.push([C,T,x/2,t,w]),s+=x}return M}const Rh=[1/0,1/0,-1/0,-1/0],Fh=[],Ah=[],Gh=[],Hh=[];function Oh(t){return t[3].declutterBox}const Vh=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Kh(t,e){return"start"===e?e=Vh.test(t)?"right":"left":"end"===e&&(e=Vh.test(t)?"left":"right"),Sh[e]}function Wh(t,e,n){return n>0&&t.push("\n",""),t.push(e,""),t}class Bh{constructor(t,e,n,i){this.overlaps=n,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={}}createLabel(t,e,n,i){const o=t+e+n+i;if(this.labels_[o])return this.labels_[o];const s=i?this.strokeStates[i]:null,r=n?this.fillStates[n]:null,a=this.textStates[e],h=this.pixelRatio,l=[a.scale[0]*h,a.scale[1]*h],c=Array.isArray(t),u=a.justify?Sh[a.justify]:Kh(Array.isArray(t)?t[0]:t,a.textAlign||Bi),g=i&&s.lineWidth?s.lineWidth:0,d=c?t:t.split("\n").reduce(Wh,[]),{width:p,height:m,widths:f,heights:_,lineWidths:y}=function(t,e){const n=[],i=[],o=[];let s=0,r=0,a=0,h=0;for(let l=0,c=e.length;l<=c;l+=2){const u=e[l];if("\n"===u||l===c){s=Math.max(s,r),o.push(r),r=0,a+=h;continue}const g=e[l+1]||t.font,d=Ji(g,u);n.push(d),r+=d;const p=Zi(g);i.push(p),h=Math.max(h,p)}return{width:s,height:a,widths:n,heights:i,lineWidths:o}}(a,d),v=p+g,x=[],w=(v+2)*l[0],C=(m+g)*l[1],T={width:w<0?Math.floor(w):Math.ceil(w),height:C<0?Math.floor(C):Math.ceil(C),contextInstructions:x};1==l[0]&&1==l[1]||x.push("scale",l),i&&(x.push("strokeStyle",s.strokeStyle),x.push("lineWidth",g),x.push("lineCap",s.lineCap),x.push("lineJoin",s.lineJoin),x.push("miterLimit",s.miterLimit),x.push("setLineDash",[s.lineDash]),x.push("lineDashOffset",s.lineDashOffset)),n&&x.push("fillStyle",r.fillStyle),x.push("textBaseline","middle"),x.push("textAlign","center");const D=.5-u;let b=u*v+D*g;const S=[],I=[];let E,M=0,L=0,N=0,P=0;for(let k=0,R=d.length;k<R;k+=2){const t=d[k];if("\n"===t){L+=M,M=0,b=u*v+D*g,++P;continue}const e=d[k+1]||a.font;e!==E&&(i&&S.push("font",e),n&&I.push("font",e),E=e),M=Math.max(M,_[N]);const o=[t,b+D*f[N]+u*(f[N]-y[P]),.5*(g+M)+L];b+=f[N],i&&S.push("strokeText",o),n&&I.push("fillText",o),++N}return Array.prototype.push.apply(x,S),Array.prototype.push.apply(x,I),this.labels_[o]=T,T}replayTextBackground_(t,e,n,i,o,s,r){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,o),t.lineTo.apply(t,e),s&&(this.alignFill_=s[2],this.fill_(t)),r&&(this.setStrokeStyle_(t,r),t.stroke())}calculateImageOrLabelDimensions_(t,e,n,i,o,s,r,a,h,l,c,u,g,d,p,m){let f=n-(r*=u[0]),_=i-(a*=u[1]);const y=o+h>t?t-h:o,v=s+l>e?e-l:s,x=d[3]+y*u[0]+d[1],w=d[0]+v*u[1]+d[2],C=f-d[3],T=_-d[0];let D;return(p||0!==c)&&(Fh[0]=C,Hh[0]=C,Fh[1]=T,Ah[1]=T,Ah[0]=C+x,Gh[0]=Ah[0],Gh[1]=T+w,Hh[1]=Gh[1]),0!==c?(D=W([1,0,0,1,0,0],n,i,1,1,c,-n,-i),K(D,Fh),K(D,Ah),K(D,Gh),K(D,Hh),ht(Math.min(Fh[0],Ah[0],Gh[0],Hh[0]),Math.min(Fh[1],Ah[1],Gh[1],Hh[1]),Math.max(Fh[0],Ah[0],Gh[0],Hh[0]),Math.max(Fh[1],Ah[1],Gh[1],Hh[1]),Rh)):ht(Math.min(C,C+x),Math.min(T,T+w),Math.max(C,C+x),Math.max(T,T+w),Rh),g&&(f=Math.round(f),_=Math.round(_)),{drawImageX:f,drawImageY:_,drawImageW:y,drawImageH:v,originX:h,originY:l,declutterBox:{minX:Rh[0],minY:Rh[1],maxX:Rh[2],maxY:Rh[3],value:m},canvasTransform:D,scale:u}}replayImageOrLabel_(t,e,n,i,o,s,r){const a=!(!s&&!r),h=i.declutterBox,l=t.canvas,c=r?r[2]*i.scale[0]/2:0;return h.minX-c<=l.width/e&&h.maxX+c>=0&&h.minY-c<=l.height/e&&h.maxY+c>=0&&(a&&this.replayTextBackground_(t,Fh,Ah,Gh,Hh,s,r),eo(t,i.canvasTransform,o,n,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(t){if(this.alignFill_){const e=K(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;t.save(),t.translate(e[0]%n,e[1]%n),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,n,i){const o=this.textStates[e],s=this.createLabel(t,e,i,n),r=this.strokeStates[n],a=this.pixelRatio,h=Kh(Array.isArray(t)?t[0]:t,o.textAlign||Bi),l=Sh[o.textBaseline||Xi],c=r&&r.lineWidth?r.lineWidth:0;return{label:s,anchorX:h*(s.width/a-2*o.scale[0])+2*(.5-h)*c,anchorY:l*s.height/a+2*(.5-l)*c}}execute_(t,e,n,i,o,s,r,a){let l;this.pixelCoordinates_&&h(n,this.renderedTransform_)?l=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),l=Tn(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),function(t,e){t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5]}(this.renderedTransform_,n));let c=0;const u=i.length;let g,d,p,m,f,_,y,v,x,w,C,T,D=0,b=0,S=0,I=null,E=null;const M=this.coordinateCache_,L=this.viewRotation_,N=Math.round(1e12*Math.atan2(-n[1],n[0]))/1e12,P={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:L},k=this.instructions!=i||this.overlaps?0:200;let R,F,A,G;for(;c<u;){const n=i[c];switch(n[0]){case oh:R=n[1],G=n[3],R.getGeometry()?void 0===r||It(r,G.getExtent())?++c:c=n[2]+1:c=n[2];break;case sh:b>k&&(this.fill_(t),b=0),S>k&&(t.stroke(),S=0),b||S||(t.beginPath(),m=NaN,f=NaN),++c;break;case rh:D=n[1];const i=l[D],h=l[D+1],u=l[D+2]-i,H=l[D+3]-h,O=Math.sqrt(u*u+H*H);t.moveTo(i+O,h),t.arc(i,h,O,0,2*Math.PI,!0),++c;break;case ah:t.closePath(),++c;break;case hh:D=n[1],g=n[2];const V=n[3],K=n[4],W=6==n.length?n[5]:void 0;P.geometry=V,P.feature=R,c in M||(M[c]=[]);const B=M[c];W?W(l,D,g,2,B):(B[0]=l[D],B[1]=l[D+1],B.length=2),K(B,P),++c;break;case ch:D=n[1],g=n[2],v=n[3],d=n[4],p=n[5];let X=n[6];const z=n[7],j=n[8],Q=n[9],q=n[10];let Y=n[11];const U=n[12];let Z=n[13];const $=n[14],J=n[15];if(!v&&n.length>=20){x=n[19],w=n[20],C=n[21],T=n[22];const t=this.drawLabelWithPointPlacement_(x,w,C,T);v=t.label,n[3]=v;const e=n[23];d=(t.anchorX-e)*this.pixelRatio,n[4]=d;const i=n[24];p=(t.anchorY-i)*this.pixelRatio,n[5]=p,X=v.height,n[6]=X,Z=v.width,n[13]=Z}let tt,et,nt,it;n.length>25&&(tt=n[25]),n.length>17?(et=n[16],nt=n[17],it=n[18]):(et=zi,nt=!1,it=!1),q&&N?Y+=L:q||N||(Y-=L);let ot=0;for(;D<g;D+=2){if(tt&&tt[ot++]<Z/this.pixelRatio)continue;const n=this.calculateImageOrLabelDimensions_(v.width,v.height,l[D],l[D+1],Z,X,d,p,j,Q,Y,U,o,et,nt||it,R),i=[t,e,v,n,z,nt?I:null,it?E:null];if(a){if("none"===$)continue;if("obstacle"===$){a.insert(n.declutterBox);continue}{let t,e;if(J){const n=g-D;if(!J[n]){J[n]=i;continue}if(t=J[n],delete J[n],e=Oh(t),a.collides(e))continue}if(a.collides(n.declutterBox))continue;t&&(a.insert(e),this.replayImageOrLabel_.apply(this,t)),a.insert(n.declutterBox)}}this.replayImageOrLabel_.apply(this,i)}++c;break;case lh:const st=n[1],rt=n[2],at=n[3],ht=n[4];T=n[5];const lt=n[6],ct=n[7],ut=n[8];C=n[9];const gt=n[10];x=n[11],w=n[12];const dt=[n[13],n[13]],pt=this.textStates[w],mt=pt.font,ft=[pt.scale[0]*ct,pt.scale[1]*ct];let _t;mt in this.widths_?_t=this.widths_[mt]:(_t={},this.widths_[mt]=_t);const yt=Es(l,st,rt,2),vt=Math.abs(ft[0])*to(mt,x,_t);if(ht||vt<=yt){const n=kh(l,st,rt,2,x,(yt-vt)*Kh(x,this.textStates[w].textAlign),lt,Math.abs(ft[0]),to,mt,_t,N?0:this.viewRotation_);t:if(n){const i=[];let o,s,r,h,l;if(C)for(o=0,s=n.length;o<s;++o){l=n[o],r=l[4],h=this.createLabel(r,w,"",C),d=l[2]+(ft[0]<0?-gt:gt),p=at*h.height+2*(.5-at)*gt*ft[1]/ft[0]-ut;const s=this.calculateImageOrLabelDimensions_(h.width,h.height,l[0],l[1],h.width,h.height,d,p,0,0,l[3],dt,!1,zi,!1,R);if(a&&a.collides(s.declutterBox))break t;i.push([t,e,h,s,1,null,null])}if(T)for(o=0,s=n.length;o<s;++o){l=n[o],r=l[4],h=this.createLabel(r,w,T,""),d=l[2],p=at*h.height-ut;const s=this.calculateImageOrLabelDimensions_(h.width,h.height,l[0],l[1],h.width,h.height,d,p,0,0,l[3],dt,!1,zi,!1,R);if(a&&a.collides(s.declutterBox))break t;i.push([t,e,h,s,1,null,null])}a&&a.load(i.map(Oh));for(let t=0,e=i.length;t<e;++t)this.replayImageOrLabel_.apply(this,i[t])}}++c;break;case uh:if(void 0!==s){R=n[1];const t=s(R,G);if(t)return t}++c;break;case gh:k?b++:this.fill_(t),++c;break;case dh:for(D=n[1],g=n[2],F=l[D],A=l[D+1],_=F+.5|0,y=A+.5|0,_===m&&y===f||(t.moveTo(F,A),m=_,f=y),D+=2;D<g;D+=2)F=l[D],A=l[D+1],_=F+.5|0,y=A+.5|0,D!=g-2&&_===m&&y===f||(t.lineTo(F,A),m=_,f=y);++c;break;case ph:I=n,this.alignFill_=n[2],b&&(this.fill_(t),b=0,S&&(t.stroke(),S=0)),t.fillStyle=n[1],++c;break;case mh:E=n,S&&(t.stroke(),S=0),this.setStrokeStyle_(t,n),++c;break;case fh:k?S++:t.stroke(),++c;break;default:++c}}b&&this.fill_(t),S&&t.stroke()}execute(t,e,n,i,o,s){this.viewRotation_=i,this.execute_(t,e,n,this.instructions,o,void 0,void 0,s)}executeHitDetection(t,e,n,i,o){return this.viewRotation_=n,this.execute_(t,1,e,this.hitDetectionInstructions,!0,i,o)}}const Xh=["Polygon","Circle","LineString","Image","Text","Default"];class zh{constructor(t,e,n,i,o,s){this.maxExtent_=t,this.overlaps_=i,this.pixelRatio_=n,this.resolution_=e,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(o)}clip(t,e){const n=this.getClipCoords(e);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()}createExecutors_(t){for(const e in t){let n=this.executorsByZIndex_[e];void 0===n&&(n={},this.executorsByZIndex_[e]=n);const i=t[e];for(const t in i){const e=i[t];n[t]=new Bh(this.resolution_,this.pixelRatio_,this.overlaps_,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const n=this.executorsByZIndex_[e];for(let e=0,i=t.length;e<i;++e)if(t[e]in n)return!0}return!1}forEachFeatureAtCoordinate(t,e,n,i,s,r){const a=2*(i=Math.round(i))+1,h=W(this.hitDetectionTransform_,i+.5,i+.5,1/e,-1/e,-n,-t[0],-t[1]),l=!this.hitDetectionContext_;l&&(this.hitDetectionContext_=Li(a,a,void 0,{willReadFrequently:!0}));const c=this.hitDetectionContext_;let u;c.canvas.width!==a||c.canvas.height!==a?(c.canvas.width=a,c.canvas.height=a):l||c.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(u=[1/0,1/0,-1/0,-1/0],pt(u,t),tt(u,e*(this.renderBuffer_+i),u));const g=function(t){if(void 0!==jh[t])return jh[t];const e=2*t+1,n=t*t,i=new Array(n+1);for(let s=0;s<=t;++s)for(let o=0;o<=t;++o){const r=s*s+o*o;if(r>n)break;let a=i[r];a||(a=[],i[r]=a),a.push(4*((t+s)*e+(t+o))+3),s>0&&a.push(4*((t-s)*e+(t+o))+3),o>0&&(a.push(4*((t+s)*e+(t-o))+3),s>0&&a.push(4*((t-s)*e+(t-o))+3))}const o=[];for(let s=0,r=i.length;s<r;++s)i[s]&&o.push(...i[s]);return jh[t]=o,o}(i);let d;function p(t,e){const n=c.getImageData(0,0,a,a).data;for(let o=0,h=g.length;o<h;o++)if(n[g[o]]>0){if(!r||"Image"!==d&&"Text"!==d||r.includes(t)){const n=(g[o]-3)/4,r=i-n%a,h=i-(n/a|0),l=s(t,e,r*r+h*h);if(l)return l}c.clearRect(0,0,a,a);break}}const m=Object.keys(this.executorsByZIndex_).map(Number);let f,_,y,v,x;for(m.sort(o),f=m.length-1;f>=0;--f){const t=m[f].toString();for(y=this.executorsByZIndex_[t],_=Xh.length-1;_>=0;--_)if(d=Xh[_],v=y[d],void 0!==v&&(x=v.executeHitDetection(c,h,n,p,u),x))return x}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const n=e[0],i=e[1],o=e[2],s=e[3],r=[n,i,n,s,o,s,o,i];return Tn(r,0,8,2,t,r),r}isEmpty(){return p(this.executorsByZIndex_)}execute(t,e,n,i,s,r,a){const h=Object.keys(this.executorsByZIndex_).map(Number);let l,c,u,g,d,p;for(h.sort(o),this.maxExtent_&&(t.save(),this.clip(t,n)),r=r||Xh,a&&h.reverse(),l=0,c=h.length;l<c;++l){const o=h[l].toString();for(d=this.executorsByZIndex_[o],u=0,g=r.length;u<g;++u){p=d[r[u]],void 0!==p&&p.execute(t,e,n,i,s,a)}}this.maxExtent_&&t.restore()}}const jh={};class Qh extends wh{constructor(t,e,n,i,o,s,r){super(),this.context_=t,this.pixelRatio_=e,this.extent_=n,this.transform_=i,this.transformRotation_=i?zt(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=o,this.squaredTolerance_=s,this.userTransform_=r,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]}drawImages_(t,e,n,i){if(!this.image_)return;const o=Tn(t,e,n,i,this.transform_,this.pixelCoordinates_),s=this.context_,r=this.tmpLocalTransform_,a=s.globalAlpha;1!=this.imageOpacity_&&(s.globalAlpha=a*this.imageOpacity_);let h=this.imageRotation_;0===this.transformRotation_&&(h-=this.viewRotation_),this.imageRotateWithView_&&(h+=this.viewRotation_);for(let l=0,c=o.length;l<c;l+=2){const t=o[l]-this.imageAnchorX_,e=o[l+1]-this.imageAnchorY_;if(0!==h||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const n=t+this.imageAnchorX_,i=e+this.imageAnchorY_;W(r,n,i,1,1,h,-n,-i),s.save(),s.transform.apply(s,r),s.translate(n,i),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.restore()}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,t,e,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(s.globalAlpha=a)}drawText_(t,e,n,i){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const o=Tn(t,e,n,i,this.transform_,this.pixelCoordinates_),s=this.context_;let r=this.textRotation_;for(0===this.transformRotation_&&(r-=this.viewRotation_),this.textRotateWithView_&&(r+=this.viewRotation_);e<n;e+=i){const t=o[e]+this.textOffsetX_,n=o[e+1]+this.textOffsetY_;0!==r||1!=this.textScale_[0]||1!=this.textScale_[1]?(s.save(),s.translate(t-this.textOffsetX_,n-this.textOffsetY_),s.rotate(r),s.translate(this.textOffsetX_,this.textOffsetY_),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.restore()):(this.textStrokeState_&&s.strokeText(this.text_,t,n),this.textFillState_&&s.fillText(this.text_,t,n))}}moveToLineTo_(t,e,n,i,o){const s=this.context_,r=Tn(t,e,n,i,this.transform_,this.pixelCoordinates_);s.moveTo(r[0],r[1]);let a=r.length;o&&(a-=2);for(let h=2;h<a;h+=2)s.lineTo(r[h],r[h+1]);return o&&s.closePath(),n}drawRings_(t,e,n,i){for(let o=0,s=n.length;o<s;++o)e=this.moveToLineTo_(t,e,n[o],i,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),It(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=function(t,e,n){const i=t.getFlatCoordinates();if(!i)return null;const o=t.getStride();return Tn(i,0,i.length,o,e,n)}(t,this.transform_,this.pixelCoordinates_),n=e[2]-e[0],i=e[3]-e[1],o=Math.sqrt(n*n+i*i),s=this.context_;s.beginPath(),s.arc(e[0],e[1],o,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}}drawFeature(t,e){const n=e.getGeometryFunction()(t);n&&(this.setStyle(e),this.drawGeometry(n))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let n=0,i=e.length;n<i;++n)this.drawGeometry(e[n])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),It(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if(It(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getFlatCoordinates();let i=0;const o=t.getEnds(),s=t.getStride();e.beginPath();for(let t=0,r=o.length;t<r;++t)i=this.moveToLineTo_(n,i,o[t],s,!1);e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoints();this.drawText_(e,0,e.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),It(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),It(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getOrientedFlatCoordinates();let i=0;const o=t.getEndss(),s=t.getStride();e.beginPath();for(let t=0,r=o.length;t<r;++t){const e=o[t];i=this.drawRings_(n,i,e,s)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=t.lineCap,e.lineCap=t.lineCap),h(n.lineDash,t.lineDash)||e.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),n.lineJoin!=t.lineJoin&&(n.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,n=this.contextTextState_,i=t.textAlign?t.textAlign:Bi;n?(n.font!=t.font&&(n.font=t.font,e.font=t.font),n.textAlign!=i&&(n.textAlign=i,e.textAlign=i),n.textBaseline!=t.textBaseline&&(n.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=i,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:i,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(t){const e=t.getColor();this.fillState_={fillStyle:Gs(e||Hi)}}else this.fillState_=null;if(e){const t=e.getColor(),n=e.getLineCap(),i=e.getLineDash(),o=e.getLineDashOffset(),s=e.getLineJoin(),r=e.getWidth(),a=e.getMiterLimit(),h=i||Vi;this.strokeState_={lineCap:void 0!==n?n:Oi,lineDash:1===this.pixelRatio_?h:h.map(t=>t*this.pixelRatio_),lineDashOffset:(o||0)*this.pixelRatio_,lineJoin:void 0!==s?s:Ki,lineWidth:(void 0!==r?r:1)*this.pixelRatio_,miterLimit:void 0!==a?a:10,strokeStyle:Gs(t||Wi)}}else this.strokeState_=null}setImageStyle(t){let e;if(!t||!(e=t.getSize()))return void(this.image_=null);const n=t.getPixelRatio(this.pixelRatio_),i=t.getAnchor(),o=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*n,this.imageAnchorY_=i[1]*n,this.imageHeight_=e[1]*n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const s=t.getScaleArray();this.imageScale_=[s[0]*this.pixelRatio_/n,s[1]*this.pixelRatio_/n],this.imageWidth_=e[0]*n}setTextStyle(t){if(t){const e=t.getFill();if(e){const t=e.getColor();this.textFillState_={fillStyle:Gs(t||Hi)}}else this.textFillState_=null;const n=t.getStroke();if(n){const t=n.getColor(),e=n.getLineCap(),i=n.getLineDash(),o=n.getLineDashOffset(),s=n.getLineJoin(),r=n.getWidth(),a=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==e?e:Oi,lineDash:i||Vi,lineDashOffset:o||0,lineJoin:void 0!==s?s:Ki,lineWidth:void 0!==r?r:1,miterLimit:void 0!==a?a:10,strokeStyle:Gs(t||Wi)}}else this.textStrokeState_=null;const i=t.getFont(),o=t.getOffsetX(),s=t.getOffsetY(),r=t.getRotateWithView(),a=t.getRotation(),h=t.getScaleArray(),l=t.getText(),c=t.getTextAlign(),u=t.getTextBaseline();this.textState_={font:void 0!==i?i:Gi,textAlign:void 0!==c?c:Bi,textBaseline:void 0!==u?u:Xi},this.text_=void 0!==l?Array.isArray(l)?l.reduce((t,e,n)=>t+(n%2?" ":e),""):l:"",this.textOffsetX_=void 0!==o?this.pixelRatio_*o:0,this.textOffsetY_=void 0!==s?this.pixelRatio_*s:0,this.textRotateWithView_=void 0!==r&&r,this.textRotation_=void 0!==a?a:0,this.textScale_=[this.pixelRatio_*h[0],this.pixelRatio_*h[1]]}else this.text_=""}}const qh=.5;const Yh={Point:function(t,e,n,i,o){const s=n.getImage(),r=n.getText();let a;if(s){if(s.getImageState()!=ks)return;let h=t;if(o){const l=s.getDeclutterMode();if("none"!==l)if(h=o,"obstacle"===l){const o=t.getBuilder(n.getZIndex(),"Image");o.setImageStyle(s,a),o.drawPoint(e,i)}else r&&r.getText()&&(a={})}const l=h.getBuilder(n.getZIndex(),"Image");l.setImageStyle(s,a),l.drawPoint(e,i)}if(r&&r.getText()){let s=t;o&&(s=o);const h=s.getBuilder(n.getZIndex(),"Text");h.setTextStyle(r,a),h.drawText(e,i)}},LineString:function(t,e,n,i,o){const s=n.getStroke();if(s){const o=t.getBuilder(n.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawLineString(e,i)}const r=n.getText();if(r&&r.getText()){const s=(o||t).getBuilder(n.getZIndex(),"Text");s.setTextStyle(r),s.drawText(e,i)}},Polygon:function(t,e,n,i,o){const s=n.getFill(),r=n.getStroke();if(s||r){const o=t.getBuilder(n.getZIndex(),"Polygon");o.setFillStrokeStyle(s,r),o.drawPolygon(e,i)}const a=n.getText();if(a&&a.getText()){const s=(o||t).getBuilder(n.getZIndex(),"Text");s.setTextStyle(a),s.drawText(e,i)}},MultiPoint:function(t,e,n,i,o){const s=n.getImage(),r=n.getText();let a;if(s){if(s.getImageState()!=ks)return;let h=t;if(o){const l=s.getDeclutterMode();if("none"!==l)if(h=o,"obstacle"===l){const o=t.getBuilder(n.getZIndex(),"Image");o.setImageStyle(s,a),o.drawMultiPoint(e,i)}else r&&r.getText()&&(a={})}const l=h.getBuilder(n.getZIndex(),"Image");l.setImageStyle(s,a),l.drawMultiPoint(e,i)}if(r&&r.getText()){let s=t;o&&(s=o);const h=s.getBuilder(n.getZIndex(),"Text");h.setTextStyle(r,a),h.drawText(e,i)}},MultiLineString:function(t,e,n,i,o){const s=n.getStroke();if(s){const o=t.getBuilder(n.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawMultiLineString(e,i)}const r=n.getText();if(r&&r.getText()){const s=(o||t).getBuilder(n.getZIndex(),"Text");s.setTextStyle(r),s.drawText(e,i)}},MultiPolygon:function(t,e,n,i,o){const s=n.getFill(),r=n.getStroke();if(r||s){const o=t.getBuilder(n.getZIndex(),"Polygon");o.setFillStrokeStyle(s,r),o.drawMultiPolygon(e,i)}const a=n.getText();if(a&&a.getText()){const s=(o||t).getBuilder(n.getZIndex(),"Text");s.setTextStyle(a),s.drawText(e,i)}},GeometryCollection:function(t,e,n,i,o){const s=e.getGeometriesArray();let r,a;for(r=0,a=s.length;r<a;++r){(0,Yh[s[r].getType()])(t,s[r],n,i,o)}},Circle:function(t,e,n,i,o){const s=n.getFill(),r=n.getStroke();if(s||r){const o=t.getBuilder(n.getZIndex(),"Circle");o.setFillStrokeStyle(s,r),o.drawCircle(e,i)}const a=n.getText();if(a&&a.getText()){const s=(o||t).getBuilder(n.getZIndex(),"Text");s.setTextStyle(a),s.drawText(e,i)}}};function Uh(t,e){return parseInt(T(t),10)-parseInt(T(e),10)}function Zh(t,e){return.5*t/e}function $h(t,e,n,i,o,s,r){let a=!1;const h=n.getImage();if(h){const t=h.getImageState();t==ks||t==Rs?h.unlistenImageChange(o):(t==Ns&&h.load(),h.listenImageChange(o),a=!0)}return function(t,e,n,i,o,s){const r=n.getGeometryFunction()(e);if(!r)return;const a=r.simplifyTransformed(i,o),h=n.getRenderer();if(h)Jh(t,a,n,e);else{(0,Yh[a.getType()])(t,a,n,e,s)}}(t,e,n,i,s,r),a}function Jh(t,e,n,i){if("GeometryCollection"==e.getType()){const o=e.getGeometries();for(let e=0,s=o.length;e<s;++e)Jh(t,o[e],n,i);return}t.getBuilder(n.getZIndex(),"Default").drawCustom(e,i,n.getRenderer(),n.getHitDetectionRenderer())}class tl extends Ph{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,e,n){const i=e.extent,o=e.viewState,s=o.center,r=o.resolution,a=o.projection,h=o.rotation,l=a.getExtent(),c=this.getLayer().getSource(),u=e.pixelRatio,g=e.viewHints,d=!(g[xe]||g[we]),p=this.compositionContext_,m=Math.round(e.size[0]*u),f=Math.round(e.size[1]*u),_=c.getWrapX()&&a.canWrapX(),y=_?St(l):null,v=_?Math.ceil((i[2]-l[2])/y)+1:1;let x=_?Math.floor((i[0]-l[0])/y):0;do{const e=this.getRenderTransform(s,r,h,u,m,f,x*y);t.execute(p,1,e,h,d,void 0,n)}while(++x<v)}setupCompositionContext_(){if(1!==this.opacity_){const t=Li(this.context.canvas.width,this.context.canvas.height,Lh);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,Ni(this.compositionContext_),Lh.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,e){const n=t.pixelRatio,i=t.layerStatesArray[t.layerIndex];!function(t,e,n){return o=e,s=0,r=0,a=n,h=0,l=0,(i=t)[0]=o,i[1]=s,i[2]=r,i[3]=a,i[4]=h,i[5]=l,i;var i,o,s,r,a,h,l}(this.pixelTransform,1/n,1/n),B(this.inversePixelTransform,this.pixelTransform);const o=z(this.pixelTransform);this.useContainer(e,o,this.getBackground(t));const s=this.context,r=s.canvas,a=this.replayGroup_,h=this.declutterExecutorGroup;let l=a&&!a.isEmpty()||h&&!h.isEmpty();if(!l){if(!(this.getLayer().hasListener(me)||this.getLayer().hasListener(fe)))return null}const c=Math.round(t.size[0]*n),u=Math.round(t.size[1]*n);r.width!=c||r.height!=u?(r.width=c,r.height=u,r.style.transform!==o&&(r.style.transform=o)):this.containerReused||s.clearRect(0,0,c,u),this.preRender(s,t);const g=t.viewState;g.projection,this.opacity_=i.opacity,this.setupCompositionContext_();let d=!1;if(l&&i.extent&&this.clipping){const e=ln(i.extent);l=It(e,t.extent),d=l&&!ot(e,t.extent),d&&this.clipUnrotated(this.compositionContext_,t,e)}return l&&this.renderWorlds(a,t),d&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(s,t),this.renderedRotation_!==g.rotation&&(this.renderedRotation_=g.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(e=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const t=[this.context.canvas.width,this.context.canvas.height];K(this.pixelTransform,t);const e=this.renderedCenter_,n=this.renderedResolution_,i=this.renderedRotation_,s=this.renderedProjection_,r=this.wrappedRenderedExtent_,a=this.getLayer(),h=[],l=t[0]*qh,c=t[1]*qh;h.push(this.getRenderTransform(e,n,i,qh,l,c,0).slice());const u=a.getSource(),g=s.getExtent();if(u.getWrapX()&&s.canWrapX()&&!ot(g,r)){let t=r[0];const o=St(g);let s,a=0;for(;t<g[0];)--a,s=o*a,h.push(this.getRenderTransform(e,n,i,qh,l,c,s).slice()),t+=o;for(a=0,t=r[2];t>g[2];)++a,s=o*a,h.push(this.getRenderTransform(e,n,i,qh,l,c,s).slice()),t-=o}this.hitDetectionImageData_=function(t,e,n,i,s,r,a){const h=Li(t[0]*qh,t[1]*qh);h.imageSmoothingEnabled=!1;const l=h.canvas,c=new Qh(h,qh,s,null,a),u=n.length,g=Math.floor(16777215/u),d={};for(let o=1;o<=u;++o){const t=n[o-1],e=t.getStyleFunction()||i;if(!e)continue;let a=e(t,r);if(!a)continue;Array.isArray(a)||(a=[a]);const h=(o*g).toString(16).padStart(7,"#00000");for(let n=0,i=a.length;n<i;++n){const e=a[n],i=e.getGeometryFunction()(t);if(!i||!It(s,i.getExtent()))continue;const o=e.clone(),r=o.getFill();r&&r.setColor(h);const l=o.getStroke();l&&(l.setColor(h),l.setLineDash(null)),o.setText(void 0);const c=e.getImage();if(c){const t=c.getImageSize();if(!t)continue;const e=Li(t[0],t[1],void 0,{alpha:!1}),n=e.canvas;e.fillStyle=h,e.fillRect(0,0,n.width,n.height),o.setImage(new _r({img:n,anchor:c.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:c.getOrigin(),opacity:1,size:c.getSize(),scale:c.getScale(),rotation:c.getRotation(),rotateWithView:c.getRotateWithView()}))}const u=o.getZIndex()||0;let g=d[u];g||(g={},d[u]=g,g.Polygon=[],g.Circle=[],g.LineString=[],g.Point=[]);const p=i.getType();if("GeometryCollection"===p){const t=i.getGeometriesArrayRecursive();for(let e=0,n=t.length;e<n;++e){const n=t[e];g[n.getType().replace("Multi","")].push(n,o)}}else g[p.replace("Multi","")].push(i,o)}}const p=Object.keys(d).map(Number).sort(o);for(let o=0,m=p.length;o<m;++o){const t=d[p[o]];for(const n in t){const i=t[n];for(let t=0,n=i.length;t<n;t+=2){c.setStyle(i[t+1]);for(let n=0,o=e.length;n<o;++n)c.setTransform(e[n]),c.drawGeometry(i[t])}}}return h.getImageData(0,0,l.width,l.height)}(t,h,this.renderedFeatures_,a.getStyleFunction(),r,n,i)}e(function(t,e,n){const i=[];if(n){const o=Math.floor(Math.round(t[0])*qh),s=Math.floor(Math.round(t[1])*qh),r=4*(Ot(o,0,n.width-1)+Ot(s,0,n.height-1)*n.width),a=n.data[r],h=n.data[r+1],l=n.data[r+2]+256*(h+256*a),c=Math.floor(16777215/e.length);l&&l%c===0&&i.push(e[l/c-1])}return i}(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,e,n,i,o){if(!this.replayGroup_)return;const s=e.viewState.resolution,r=e.viewState.rotation,a=this.getLayer(),h={},l=function(t,e,n){const s=T(t),r=h[s];if(r){if(!0!==r&&n<r.distanceSq){if(0===n)return h[s]=!0,o.splice(o.lastIndexOf(r),1),i(t,a,e);r.geometry=e,r.distanceSq=n}}else{if(0===n)return h[s]=!0,i(t,a,e);o.push(h[s]={feature:t,layer:a,geometry:e,distanceSq:n,callback:i})}};let c;const u=[this.replayGroup_];return this.declutterExecutorGroup&&u.push(this.declutterExecutorGroup),u.some(i=>c=i.forEachFeatureAtCoordinate(t,s,r,n,l,i===this.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map(t=>t.value):null)),c}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),n=e.getSource();if(!n)return!1;const i=t.viewHints[xe],o=t.viewHints[we],s=e.getUpdateWhileAnimating(),r=e.getUpdateWhileInteracting();if(this.ready&&!s&&i||!r&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const a=t.extent,l=t.viewState,c=l.projection,u=l.resolution,g=t.pixelRatio,d=e.getRevision(),p=e.getRenderBuffer();let m=e.getRenderOrder();void 0===m&&(m=Uh);const f=l.center.slice(),_=tt(a,p*u),y=_.slice(),v=[_.slice()],x=c.getExtent();if(n.getWrapX()&&c.canWrapX()&&!ot(x,t.extent)){const t=St(x),e=Math.max(St(_)/2,t);_[0]=x[0]-e,_[2]=x[2]+e,ze(f,c);const n=Mt(v[0],c);n[0]<x[0]&&n[2]<x[2]?v.push([n[0]+t,n[1],n[2]+t,n[3]]):n[0]>x[0]&&n[2]>x[2]&&v.push([n[0]-t,n[1],n[2]-t,n[3]])}if(this.ready&&this.renderedResolution_==u&&this.renderedRevision_==d&&this.renderedRenderOrder_==m&&ot(this.wrappedRenderedExtent_,_))return h(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=f,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const w=new Eh(Zh(u,g),_,u,g);let C;this.getLayer().getDeclutter()&&(C=new Eh(Zh(u,g),_,u,g));for(let h=0,L=v.length;h<L;++h)n.loadFeatures(v[h],u,c);const T=function(t,e){const n=Zh(t,e);return n*n}(u,g);let D=!0;const b=t=>{let n;const i=t.getStyleFunction()||e.getStyleFunction();if(i&&(n=i(t,u)),n){const e=this.renderFeature(t,T,n,w,undefined,C);D=D&&!e}},S=hn(_),I=n.getFeaturesInExtent(S);m&&I.sort(m);for(let h=0,L=I.length;h<L;++h)b(I[h]);this.renderedFeatures_=I,this.ready=D;const E=w.finish(),M=new zh(_,u,g,n.getOverlaps(),E,e.getRenderBuffer());return C&&(this.declutterExecutorGroup=new zh(_,u,g,n.getOverlaps(),C.finish(),e.getRenderBuffer())),this.renderedResolution_=u,this.renderedRevision_=d,this.renderedRenderOrder_=m,this.renderedExtent_=y,this.wrappedRenderedExtent_=_,this.renderedCenter_=f,this.renderedProjection_=c,this.replayGroup_=M,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,n,i,o,s){if(!n)return!1;let r=!1;if(Array.isArray(n))for(let a=0,h=n.length;a<h;++a)r=$h(i,t,n[a],e,this.boundHandleStyleImageChange_,o,s)||r;else r=$h(i,t,n,e,this.boundHandleStyleImageChange_,o,s);return r}}class el extends ih{constructor(t){super(t)}createRenderer(){return new tl(this)}}class nl{constructor(t){this.rbush_=new Us(t),this.items_={}}insert(t,e){const n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[T(e)]=n}load(t,e){const n=new Array(e.length);for(let i=0,o=e.length;i<o;i++){const o=t[i],s=e[i],r={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:s};n[i]=r,this.items_[T(s)]=r}this.rbush_.load(n)}remove(t){const e=T(t),n=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(n)}update(t,e){const n=this.items_[T(e)];gt([n.minX,n.minY,n.maxX,n.maxY],t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(t){return t.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let n;for(let i=0,o=t.length;i<o;i++)if(n=e(t[i]),n)return n;return n}isEmpty(){return p(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return ht(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}class il extends Sn{constructor(t){super(),this.geometries_=t||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(v),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push(_(this.geometries_[t],f.CHANGE,this.changed,this))}clone(){const t=new il(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}closestPointXY(t,e,n,i){if(i<nt(this.getExtent(),t,e))return i;const o=this.geometries_;for(let s=0,r=o.length;s<r;++s)i=o[s].closestPointXY(t,e,n,i);return i}containsXY(t,e){const n=this.geometries_;for(let i=0,o=n.length;i<o;++i)if(n[i].containsXY(t,e))return!0;return!1}computeExtent(t){lt(t);const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)dt(t,e[n].getExtent());return t}getGeometries(){return sl(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)e[n].getType()===this.getType()?t=t.concat(e[n].getGeometriesArrayRecursive()):t.push(e[n]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],n=this.geometries_;let i=!1;for(let o=0,s=n.length;o<s;++o){const s=n[o],r=s.getSimplifiedGeometry(t);e.push(r),r!==s&&(i=!0)}if(i){const t=new il(null);return t.setGeometriesArray(e),t}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)if(e[n].intersectsExtent(t))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(t,e){const n=this.geometries_;for(let i=0,o=n.length;i<o;++i)n[i].rotate(t,e);this.changed()}scale(t,e,n){n||(n=xt(this.getExtent()));const i=this.geometries_;for(let o=0,s=i.length;o<s;++o)i[o].scale(t,e,n);this.changed()}setGeometries(t){this.setGeometriesArray(sl(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)e[n].applyTransform(t);this.changed()}translate(t,e){const n=this.geometries_;for(let i=0,o=n.length;i<o;++i)n[i].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function sl(t){const e=[];for(let n=0,i=t.length;n<i;++n)e.push(t[n].clone());return e}class rl extends In{constructor(t,e,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(void 0!==e&&n)this.setFlatCoordinates(e,t),this.ends_=n;else{const e=t,n=[],i=[];for(let t=0,s=e.length;t<s;++t){a(n,e[t].getFlatCoordinates()),i.push(n.length)}const o=0===e.length?this.getLayout():e[0].getLayout();this.setFlatCoordinates(o,n),this.ends_=i}}appendLineString(t){a(this.flatCoordinates,t.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new rl(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<nt(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Pn(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Rn(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,n,i))}getCoordinateAtM(t,e,n){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(e=void 0!==e&&e,n=void 0!==n&&n,function(t,e,n,i,o,s,r){if(r)return Is(t,e,n[n.length-1],i,o,s);let a;if(o<t[i-1])return s?(a=t.slice(0,i),a[i-1]=o,a):null;if(t[t.length-1]<o)return s?(a=t.slice(t.length-i),a[i-1]=o,a):null;for(let h=0,l=n.length;h<l;++h){const s=n[h];if(e!=s){if(o<t[e+i-1])return null;if(o<=t[s-1])return Is(t,e,s,i,o,!1);e=s}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,e,n))}getCoordinates(){return zn(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new Ms(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,n=this.layout,i=[];let o=0;for(let s=0,r=e.length;s<r;++s){const r=e[s],a=new Ms(t.slice(o,r),n);i.push(a),o=r}return i}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let n=0;const i=this.ends_,o=this.stride;for(let s=0,r=i.length;s<r;++s){const r=i[s];a(t,Ss(e,n,r,o,.5)),n=r}return t}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=Vn(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,n),new rl(e,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(t){return function(t,e,n,i,o){for(let s=0,r=n.length;s<r;++s){if(ii(t,e,n[s],i,o))return!0;e=n[s]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Gn(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}class al extends In{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){a(this.flatCoordinates,t.getFlatCoordinates()),this.changed()}clone(){const t=new al(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){if(i<nt(this.getExtent(),t,e))return i;const o=this.flatCoordinates,s=this.stride;for(let r=0,a=o.length;r<a;r+=s){const a=Kt(t,e,o[r],o[r+1]);if(a<i){i=a;for(let t=0;t<s;++t)n[t]=o[r+t];n.length=s}}return i}getCoordinates(){return Xn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates.length/this.stride;return t<0||e<=t?null:new Un(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,n=this.stride,i=[];for(let o=0,s=t.length;o<s;o+=n){const s=new Un(t.slice(o,o+n),e);i.push(s)}return i}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,n=this.stride;for(let i=0,o=e.length;i<o;i+=n){if(st(t,e[i],e[i+1]))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=An(this.flatCoordinates,0,t,this.stride),this.changed()}}function hl(t,e,n,i){const o=[];let s=[1/0,1/0,-1/0,-1/0];for(let r=0,a=n.length;r<a;++r){const a=n[r];s=ut(t,e,a[0],i),o.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=a[a.length-1]}return o}class ll extends In{constructor(t,e,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(t[0])){const i=t,o=[],s=[];for(let t=0,e=i.length;t<e;++t){const e=i[t],n=o.length,r=e.getEnds();for(let t=0,i=r.length;t<i;++t)r[t]+=n;a(o,e.getFlatCoordinates()),s.push(r)}e=0===i.length?this.getLayout():i[0].getLayout(),t=o,n=s}void 0!==e&&n?(this.setFlatCoordinates(e,t),this.endss_=n):this.setCoordinates(t,e)}appendPolygon(t){let e;if(this.flatCoordinates){const n=this.flatCoordinates.length;a(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let t=0,i=e.length;t<i;++t)e[t]+=n}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let i=0;i<t;++i)e[i]=this.endss_[i].slice();const n=new ll(this.flatCoordinates.slice(),this.layout,e);return n.applyProperties(this),n}closestPointXY(t,e,n,i){return i<nt(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,n,i,o){for(let s=0,r=n.length;s<r;++s){const r=n[s];o=Pn(t,e,r,i,o),e=r[r.length-1]}return o}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,n,i,o,s,r,a,h,l,c){c=c||[NaN,NaN];for(let u=0,g=n.length;u<g;++u){const g=n[u];l=Rn(t,e,g,i,o,s,r,a,h,l,c),e=g[g.length-1]}return l}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,n,i))}containsXY(t,e){return function(t,e,n,i,o,s){if(0===n.length)return!1;for(let r=0,a=n.length;r<a;++r){const a=n[r];if(Jn(t,e,a,i,o,s))return!0;e=a[a.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return function(t,e,n,i){let o=0;for(let s=0,r=n.length;s<r;++s){const r=n[s];o+=qn(t,e,r,i),e=r[r.length-1]}return o}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),ci(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,jn(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=hl(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=ei(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new al(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;hi(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=ci(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=function(t,e,n,i,o,s,r,a){for(let h=0,l=n.length;h<l;++h){const l=n[h],c=[];r=Bn(t,e,l,i,o,s,r,c),a.push(c),e=l[l.length-1]}return r}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,n),new ll(e,"XY",n)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(0===t)e=0;else{const n=this.endss_[t-1];e=n[n.length-1]}const n=this.endss_[t].slice(),i=n[n.length-1];if(0!==e)for(let o=0,s=n.length;o<s;++o)n[o]-=e;return new ui(this.flatCoordinates.slice(e,i),this.layout,n)}getPolygons(){const t=this.layout,e=this.flatCoordinates,n=this.endss_,i=[];let o=0;for(let s=0,r=n.length;s<r;++s){const r=n[s].slice(),a=r[r.length-1];if(0!==o)for(let t=0,e=r.length;t<e;++t)r[t]-=o;const h=new ui(e.slice(o,a),t,r);i.push(h),o=a}return i}getType(){return"MultiPolygon"}intersectsExtent(t){return function(t,e,n,i,o){for(let s=0,r=n.length;s<r;++s){const r=n[s];if(oi(t,e,r,i,o))return!0;e=r[r.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=Hn(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===n.length)this.flatCoordinates.length=0;else{const t=n[n.length-1];this.flatCoordinates.length=0===t.length?0:t[t.length-1]}this.changed()}}const cl=[1,0,0,1,0,0];class ul{constructor(t,e,n,i,o,s){this.styleFunction,this.extent_,this.id_=s,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n,this.properties_=o,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_="Point"===this.type_?ct(this.flatCoordinates_):ut(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=xt(this.getExtent());this.flatInteriorPoints_=ti(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=function(t,e){const n=[];let i,o=0,s=0;for(let r=0,a=e.length;r<a;++r){const a=e[r],h=ri(t,o,a,2);if(void 0===i&&(i=h),h===i)n.push(e.slice(s,r+1));else{if(0===n.length)continue;n[n.length-1].push(e[s])}s=r+1,o=a}return n}(this.flatCoordinates_,this.ends_),e=hl(this.flatCoordinates_,0,t,2);this.flatInteriorPoints_=ei(this.flatCoordinates_,0,t,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Ss(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const t=this.flatCoordinates_;let e=0;const n=this.ends_;for(let i=0,o=n.length;i<o;++i){const o=n[i],s=Ss(t,e,o,2,.5);a(this.flatMidpoints_,s),e=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,e){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){const e=(t=$e(t)).getExtent(),n=t.getWorldExtent();if(e&&n){const t=Ct(n)/Ct(e);W(cl,n[0],n[3],t,-t,0,0,0),Tn(this.flatCoordinates_,0,this.flatCoordinates_.length,2,cl,this.flatCoordinates_)}}applyTransform(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new ul(this.type_,this.flatCoordinates_.slice(),this.ends_.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=g((t,e)=>{if(t===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),e&&this.simplifiedGeometry_.applyTransform(e);const n=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":n.length=On(n,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,n,0),i=[n.length];break;case"MultiLineString":i=[],n.length=Vn(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,n,0,i);break;case"Polygon":i=[],n.length=Bn(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),n,0,i)}return i&&(this.simplifiedGeometry_=new ul(this.type_,n,i,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_}),this}}ul.prototype.getFlatCoordinates=ul.prototype.getOrientedFlatCoordinates;class gl extends b{constructor(t){super(),this.projection=$e(t.projection),this.attributions_=dl(t.attributions),this.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,this.loading=!1,this.state_=void 0!==t.state?t.state:"ready",this.wrapX_=void 0!==t.wrapX&&t.wrapX,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise(function(t,n){e.viewResolver=t,e.viewRejector=n})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=dl(t),this.changed()}setState(t){this.state_=t,this.changed()}}function dl(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}const pl="addfeature",ml="changefeature",fl="clear",_l="removefeature",yl="featuresloadstart",vl="featuresloadend",xl="featuresloaderror";function wl(t,e){return[[-1/0,-1/0,1/0,1/0]]}function Cl(t,e){return function(n,i,o,s,r){const a=this;!function(t,e,n,i,o,s,r){const a=new XMLHttpRequest;a.open("GET","function"==typeof t?t(n,i,o):t,!0),"arraybuffer"==e.getType()&&(a.responseType="arraybuffer"),a.withCredentials=!1,a.onload=function(t){if(!a.status||a.status>=200&&a.status<300){const t=e.getType();let i;"json"==t?i=JSON.parse(a.responseText):"text"==t?i=a.responseText:"xml"==t?(i=a.responseXML,i||(i=(new DOMParser).parseFromString(a.responseText,"application/xml"))):"arraybuffer"==t&&(i=a.response),i?s(e.readFeatures(i,{extent:n,featureProjection:o}),e.readProjection(i)):r()}else r()},a.onerror=r,a.send()}(t,e,n,i,o,function(t,e){a.addFeatures(t),void 0!==s&&s(t)},r||u)}}class Tl extends e{constructor(t,e,n){super(t),this.feature=e,this.features=n}}class Dl extends gl{constructor(t){super({attributions:(t=t||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX}),this.on,this.once,this.un,this.loader_=u,this.format_=t.format,this.overlaps_=void 0===t.overlaps||t.overlaps,this.url_=t.url,void 0!==t.loader?this.loader_=t.loader:void 0!==this.url_&&(V(this.format_,"`format` must be set when `url` is set"),this.loader_=Cl(this.url_,this.format_)),this.strategy_=void 0!==t.strategy?t.strategy:wl;const e=void 0===t.useSpatialIndex||t.useSpatialIndex;let n,i;this.featuresRtree_=e?new nl:null,this.loadedExtentsRtree_=new nl,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(t.features)?i=t.features:t.features&&(n=t.features,i=n.getArray()),e||void 0!==n||(n=new L(i)),void 0!==i&&this.addFeaturesInternal(i),void 0!==n&&this.bindFeaturesCollection_(n)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=T(t);if(!this.addToIndex_(e,t))return void(this.featuresCollection_&&this.featuresCollection_.remove(t));this.setupChangeEvents_(e,t);const n=t.getGeometry();if(n){const e=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(e,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new Tl(pl,t))}setupChangeEvents_(t,e){e instanceof ul||(this.featureChangeKeys_[t]=[_(e,f.CHANGE,this.handleFeatureChange_,this),_(e,n,this.handleFeatureChange_,this)])}addToIndex_(t,e){let n=!0;if(void 0!==e.getId()){const t=String(e.getId());if(t in this.idIndex_)if(e instanceof ul){const i=this.idIndex_[t];i instanceof ul?Array.isArray(i)?i.push(e):this.idIndex_[t]=[i,e]:n=!1}else n=!1;else this.idIndex_[t]=e}return n&&(V(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),n}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],n=[],i=[];for(let o=0,s=t.length;o<s;o++){const e=t[o],i=T(e);this.addToIndex_(i,e)&&n.push(e)}for(let o=0,s=n.length;o<s;o++){const t=n[o],s=T(t);this.setupChangeEvents_(s,t);const r=t.getGeometry();if(r){const n=r.getExtent();e.push(n),i.push(t)}else this.nullGeometryFeatures_[s]=t}if(this.featuresRtree_&&this.featuresRtree_.load(e,i),this.hasListener(pl))for(let o=0,s=n.length;o<s;o++)this.dispatchEvent(new Tl(pl,n[o]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(pl,function(n){e||(e=!0,t.push(n.feature),e=!1)}),this.addEventListener(_l,function(n){e||(e=!0,t.remove(n.feature),e=!1)}),t.addEventListener(S,t=>{e||(e=!0,this.addFeature(t.element),e=!1)}),t.addEventListener(I,t=>{e||(e=!0,this.removeFeature(t.element),e=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const t in this.featureChangeKeys_){this.featureChangeKeys_[t].forEach(v)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const t=t=>{this.removeFeatureInternal(t)};this.featuresRtree_.forEach(t);for(const e in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[e])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new Tl(fl);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const n=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(n,function(n){const i=n.getGeometry();if(i instanceof ul||i.intersectsCoordinate(t))return e(n)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(n){const i=n.getGeometry();if(i instanceof ul||i.intersectsExtent(t)){const t=e(n);if(t)return t}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),p(this.nullGeometryFeatures_)||a(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)}),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const n=function(t,e){if(e.canWrapX()){const n=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[n[0],t[1],n[2],t[3]]];Mt(t,e);const i=St(n);if(St(t)>i)return[[n[0],t[1],n[2],t[3]]];if(t[0]<n[0])return[[t[0]+i,t[1],n[2],t[3]],[n[0],t[1],t[2],t[3]]];if(t[2]>n[2])return[[t[0],t[1],n[2],t[3]],[n[0],t[1],t[2]-i,t[3]]]}return[t]}(t,e);return[].concat(...n.map(t=>this.featuresRtree_.getInExtent(t)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const n=t[0],i=t[1];let o=null;const s=[NaN,NaN];let r=1/0;const a=[-1/0,-1/0,1/0,1/0];return e=e||l,this.featuresRtree_.forEachInExtent(a,function(t){if(e(t)){const e=t.getGeometry(),h=r;if(r=e instanceof ul?0:e.closestPointXY(n,i,s,r),r<h){o=t;const e=Math.sqrt(r);a[0]=n-e,a[1]=i-e,a[2]=n+e,a[3]=i+e}}}),o}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return void 0!==e?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return void 0!==e?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,n=T(e),i=e.getGeometry();if(i){const t=i.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(t,e)):this.featuresRtree_&&this.featuresRtree_.update(t,e)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[n]=e);const o=e.getId();if(void 0!==o){const t=o.toString();this.idIndex_[t]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[t]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[n]=e;this.changed(),this.dispatchEvent(new Tl(ml,e))}hasFeature(t){const e=t.getId();return void 0!==e?e in this.idIndex_:T(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&p(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(t,e,n){const i=this.loadedExtentsRtree_,o=this.strategy_(t,e,n);for(let s=0,r=o.length;s<r;++s){const t=o[s];i.forEachInExtent(t,function(e){return ot(e.extent,t)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Tl(yl)),this.loader_.call(this,t,e,n,t=>{--this.loadingExtentsCount_,this.dispatchEvent(new Tl(vl,void 0,t))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Tl(xl))}),i.insert(t,{extent:t.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_;let n;e.forEachInExtent(t,function(e){if(gt(e.extent,t))return n=e,!0}),n&&e.remove(n)}removeFeature(t){if(!t)return;const e=T(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t);this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=T(t),n=this.featureChangeKeys_[e];if(!n)return;n.forEach(v),delete this.featureChangeKeys_[e];const i=t.getId();return void 0!==i&&delete this.idIndex_[i.toString()],delete this.uidIndex_[e],this.dispatchEvent(new Tl(_l,t)),t}removeFromIdIndex_(t){let e=!1;for(const n in this.idIndex_){const i=this.idIndex_[n];if(t instanceof ul&&Array.isArray(i)&&i.includes(t))i.splice(i.indexOf(t),1);else if(this.idIndex_[n]===t){delete this.idIndex_[n],e=!0;break}}return e}setLoader(t){this.loader_=t}setUrl(t){V(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(Cl(t,this.format_))}}class bl{constructor(t,e,n,i,o,s){this.sourceProj_=t,this.targetProj_=e;let r={};const a=sn(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){const e=t[0]+"/"+t[1];return r[e]||(r[e]=a(t)),r[e]},this.maxSourceExtent_=i,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&St(i)>=St(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?St(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?St(this.targetProj_.getExtent()):null;const h=Dt(n),l=bt(n),c=vt(n),u=yt(n),g=this.transformInv_(h),d=this.transformInv_(l),p=this.transformInv_(c),m=this.transformInv_(u),f=10+(s?Math.max(0,Math.ceil(Math.log2(function(t){let e=0;return Et(t)||(e=St(t)*Ct(t)),e}(n)/(s*s*256*256)))):0);if(this.addQuad_(h,l,c,u,g,d,p,m,f),this.wrapsXInSource_){let t=1/0;this.triangles_.forEach(function(e,n,i){t=Math.min(t,e.source[0][0],e.source[1][0],e.source[2][0])}),this.triangles_.forEach(e=>{if(Math.max(e.source[0][0],e.source[1][0],e.source[2][0])-t>this.sourceWorldWidth_/2){const n=[[e.source[0][0],e.source[0][1]],[e.source[1][0],e.source[1][1]],[e.source[2][0],e.source[2][1]]];n[0][0]-t>this.sourceWorldWidth_/2&&(n[0][0]-=this.sourceWorldWidth_),n[1][0]-t>this.sourceWorldWidth_/2&&(n[1][0]-=this.sourceWorldWidth_),n[2][0]-t>this.sourceWorldWidth_/2&&(n[2][0]-=this.sourceWorldWidth_);const i=Math.min(n[0][0],n[1][0],n[2][0]);Math.max(n[0][0],n[1][0],n[2][0])-i<this.sourceWorldWidth_/2&&(e.source=n)}})}r={}}addTriangle_(t,e,n,i,o,s){this.triangles_.push({source:[i,o,s],target:[t,e,n]})}addQuad_(t,e,n,i,o,s,r,a,h){const l=J([o,s,r,a]),c=this.sourceWorldWidth_?St(l)/this.sourceWorldWidth_:null,u=this.sourceWorldWidth_,g=this.sourceProj_.canWrapX()&&c>.5&&c<1;let d=!1;if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){d=St(J([t,e,n,i]))/this.targetWorldWidth_>.25||d}!g&&this.sourceProj_.isGlobal()&&c&&(d=c>.25||d)}if(!d&&this.maxSourceExtent_&&isFinite(l[0])&&isFinite(l[1])&&isFinite(l[2])&&isFinite(l[3])&&!It(l,this.maxSourceExtent_))return;let p=0;if(!(d||isFinite(o[0])&&isFinite(o[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(r[0])&&isFinite(r[1])&&isFinite(a[0])&&isFinite(a[1])))if(h>0)d=!0;else if(p=(isFinite(o[0])&&isFinite(o[1])?0:8)+(isFinite(s[0])&&isFinite(s[1])?0:4)+(isFinite(r[0])&&isFinite(r[1])?0:2)+(isFinite(a[0])&&isFinite(a[1])?0:1),1!=p&&2!=p&&4!=p&&8!=p)return;if(h>0){if(!d){const e=[(t[0]+n[0])/2,(t[1]+n[1])/2],i=this.transformInv_(e);let s;if(g){s=(Bt(o[0],u)+Bt(r[0],u))/2-Bt(i[0],u)}else s=(o[0]+r[0])/2-i[0];const a=(o[1]+r[1])/2-i[1];d=s*s+a*a>this.errorThresholdSquared_}if(d){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){const l=[(e[0]+n[0])/2,(e[1]+n[1])/2],c=this.transformInv_(l),u=[(i[0]+t[0])/2,(i[1]+t[1])/2],g=this.transformInv_(u);this.addQuad_(t,e,l,u,o,s,c,g,h-1),this.addQuad_(u,l,n,i,g,c,r,a,h-1)}else{const l=[(t[0]+e[0])/2,(t[1]+e[1])/2],c=this.transformInv_(l),u=[(n[0]+i[0])/2,(n[1]+i[1])/2],g=this.transformInv_(u);this.addQuad_(t,l,u,i,o,c,g,a,h-1),this.addQuad_(l,e,n,u,c,s,r,g,h-1)}return}}if(g){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}11&p||this.addTriangle_(t,n,i,o,r,a),14&p||this.addTriangle_(t,n,e,o,r,s),p&&(13&p||this.addTriangle_(e,i,t,s,a,o),7&p||this.addTriangle_(e,i,n,s,a,r))}calculateSourceExtent(){const t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(e,n,i){const o=e.source;pt(t,o[0]),pt(t,o[1]),pt(t,o[2])}),t}getTriangles(){return this.triangles_}}let Sl;const Il=[];function El(t,e,n,i,o){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(i,o),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,i)+1,Math.max(n,o)),t.restore()}function Ml(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function Ll(t,e,n,i){const o=(s=n,sn(e,t)(s,void 0,s.length));var s;let r=Je(e,i,n);const a=e.getMetersPerUnit();void 0!==a&&(r*=a);const h=t.getMetersPerUnit();void 0!==h&&(r/=h);const l=t.getExtent();if(!l||it(l,o)){const e=Je(t,r,o)/r;isFinite(e)&&e>0&&(r/=e)}return r}function Nl(t,e,n,i,o,s,r,a,h,l,c,u,g){const d=Li(Math.round(n*t),Math.round(n*e),Il);if(u||(d.imageSmoothingEnabled=!1),0===h.length)return d.canvas;function p(t){return Math.round(t*n)/n}d.scale(n,n),d.globalCompositeOperation="lighter";const m=[1/0,1/0,-1/0,-1/0];let f;if(h.forEach(function(t,e,n){dt(m,t.extent)}),1!==h.length||0!==l){const t=St(m),e=Ct(m);f=Li(Math.round(n*t/i),Math.round(n*e/i),Il),u||(f.imageSmoothingEnabled=!1);const o=n/i;h.forEach(function(t,e,n){const i=t.extent[0]-m[0],s=-(t.extent[3]-m[3]),r=St(t.extent),a=Ct(t.extent);t.image.width>0&&t.image.height>0&&f.drawImage(t.image,l,l,t.image.width-2*l,t.image.height-2*l,i*o,s*o,r*o,a*o)})}const _=Dt(r);return a.getTriangles().forEach(function(t,e,o){const r=t.source,a=t.target;let l=r[0][0],c=r[0][1],g=r[1][0],y=r[1][1],v=r[2][0],x=r[2][1];const w=p((a[0][0]-_[0])/s),C=p(-(a[0][1]-_[1])/s),T=p((a[1][0]-_[0])/s),D=p(-(a[1][1]-_[1])/s),b=p((a[2][0]-_[0])/s),S=p(-(a[2][1]-_[1])/s),I=l,E=c;l=0,c=0,g-=I,y-=E,v-=I,x-=E;const M=function(t){const e=t.length;for(let i=0;i<e;i++){let n=i,o=Math.abs(t[i][i]);for(let r=i+1;r<e;r++){const e=Math.abs(t[r][i]);e>o&&(o=e,n=r)}if(0===o)return null;const s=t[n];t[n]=t[i],t[i]=s;for(let r=i+1;r<e;r++){const n=-t[r][i]/t[i][i];for(let o=i;o<e+1;o++)i==o?t[r][o]=0:t[r][o]+=n*t[i][o]}}const n=new Array(e);for(let i=e-1;i>=0;i--){n[i]=t[i][e]/t[i][i];for(let o=i-1;o>=0;o--)t[o][e]-=t[o][i]*n[i]}return n}([[g,y,0,0,T-w],[v,x,0,0,b-w],[0,0,g,y,D-C],[0,0,v,x,S-C]]);if(!M)return;if(d.save(),d.beginPath(),function(){if(void 0===Sl){const t=Li(6,6,Il);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",El(t,4,5,4,0),El(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;Sl=Ml(e,0)||Ml(e,4)||Ml(e,8),Ni(t),Il.push(t.canvas)}return Sl}()||!u){d.moveTo(T,D);const t=4,e=w-T,n=C-D;for(let i=0;i<t;i++)d.lineTo(T+p((i+1)*e/t),D+p(i*n/(t-1))),i!=t-1&&d.lineTo(T+p((i+1)*e/t),D+p((i+1)*n/(t-1)));d.lineTo(b,S)}else d.moveTo(T,D),d.lineTo(w,C),d.lineTo(b,S);let L;if(d.clip(),d.transform(M[0],M[2],M[1],M[3],w,C),d.translate(m[0]-I,m[3]-E),f)L=f.canvas,d.scale(i/n,-i/n);else{const t=h[0],e=t.extent;L=t.image,d.scale(St(e)/L.width,-Ct(e)/L.height)}d.drawImage(L,0,0),d.restore()}),f&&(Ni(f),Il.push(f.canvas)),d.canvas}class Pl extends _i{constructor(t){super(t=t||{})}}class kl extends Ph{constructor(t){super(t),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(t){const e=t.layerStatesArray[t.layerIndex],n=t.pixelRatio,i=t.viewState,o=i.resolution,s=this.getLayer().getSource(),r=t.viewHints;let a=t.extent;if(void 0!==e.extent&&(a=Tt(a,ln(e.extent,i.projection))),!r[xe]&&!r[we]&&!Et(a))if(s){const t=i.projection,e=s.getImage(a,o,n,t);e&&(this.loadImage(e)?this.image_=e:e.getState()===Fs&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(t){const e=this.frameState;if(!e)return null;const n=this.getLayer(),i=K(e.pixelToCoordinateTransform,t.slice()),o=n.getExtent();if(o&&!it(o,i))return null;const s=this.image_.getExtent(),r=this.image_.getImage(),a=St(s),h=Math.floor(r.width*((i[0]-s[0])/a));if(h<0||h>=r.width)return null;const l=Ct(s),c=Math.floor(r.height*((s[3]-i[1])/l));return c<0||c>=r.height?null:this.getImageData(r,h,c)}renderFrame(t,e){const n=this.image_,i=n.getExtent(),o=n.getResolution(),[s,r]=Array.isArray(o)?o:[o,o],a=n.getPixelRatio(),h=t.layerStatesArray[t.layerIndex],l=t.pixelRatio,c=t.viewState,u=c.center,g=c.resolution,d=l*s/(g*a),p=l*r/(g*a),m=t.extent,f=c.resolution,_=c.rotation,y=Math.round(St(m)/f*l),v=Math.round(Ct(m)/f*l);W(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/l,1/l,_,-y/2,-v/2),B(this.inversePixelTransform,this.pixelTransform);const x=z(this.pixelTransform);this.useContainer(e,x,this.getBackground(t));const w=this.context,C=w.canvas;C.width!=y||C.height!=v?(C.width=y,C.height=v):this.containerReused||w.clearRect(0,0,y,v);let T=!1,D=!0;if(h.extent){const e=ln(h.extent,c.projection);D=It(e,t.extent),T=D&&!ot(e,t.extent),T&&this.clipUnrotated(w,t,e)}const b=n.getImage(),S=W(this.tempTransform,y/2,v/2,d,p,0,a*(i[0]-u[0])/s,a*(u[1]-i[3])/r);this.renderedResolution=r*l/a;const I=b.width*S[0],E=b.height*S[3];if(this.getLayer().getSource().getInterpolate()||(w.imageSmoothingEnabled=!1),this.preRender(w,t),D&&I>=.5&&E>=.5){const t=S[4],e=S[5],n=h.opacity;let i;1!==n&&(i=w.globalAlpha,w.globalAlpha=n),w.drawImage(b,0,0,+b.width,+b.height,t,e,I,E),1!==n&&(w.globalAlpha=i)}return this.postRender(w,t),T&&w.restore(),w.imageSmoothingEnabled=!0,x!==C.style.transform&&(C.style.transform=x),this.container}}class Rl extends Pl{constructor(t){super(t)}createRenderer(){return new kl(this)}getData(t){return super.getData(t)}}function Fl(t){return Array.isArray(t)?Math.min(...t):t}class Al extends ur{constructor(t,e,n,i,o,s,r){let a=t.getExtent();a&&t.canWrapX()&&(a=a.slice(),a[0]=-1/0,a[2]=1/0);let h=e.getExtent();h&&e.canWrapX()&&(h=h.slice(),h[0]=-1/0,h[2]=1/0);const l=h?Tt(n,h):n,c=Ll(t,e,xt(l),i),u=new bl(t,e,l,a,.5*c,i),g=u.calculateSourceExtent(),d=Et(g)?null:s(g,c,o),p=d?Ns:Fs,m=d?d.getPixelRatio():1;super(n,i,m,p),this.targetProj_=e,this.maxSourceExtent_=a,this.triangulation_=u,this.targetResolution_=i,this.targetExtent_=n,this.sourceImage_=d,this.sourcePixelRatio_=m,this.interpolate_=r,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==Ps&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const t=this.sourceImage_.getState();if(t==ks){const t=St(this.targetExtent_)/this.targetResolution_,e=Ct(this.targetExtent_)/this.targetResolution_;this.canvas_=Nl(t,e,this.sourcePixelRatio_,Fl(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,0,this.interpolate_)}this.state=t,this.changed()}load(){if(this.state==Ns){this.state=Ps,this.changed();const t=this.sourceImage_.getState();t==ks||t==Rs?this.reproject_():(this.sourceListenerKey_=_(this.sourceImage_,f.CHANGE,function(t){const e=this.sourceImage_.getState();e!=ks&&e!=Rs||(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}}unlistenSource_(){v(this.sourceListenerKey_),this.sourceListenerKey_=null}}const Gl="imageloadstart",Hl="imageloadend",Ol="imageloaderror";class Vl extends e{constructor(t,e){super(t),this.image=e}}class Kl extends gl{constructor(t){super({attributions:t.attributions,projection:t.projection,state:t.state,interpolate:void 0===t.interpolate||t.interpolate}),this.on,this.once,this.un,this.loader=t.loader||null,this.resolutions_=void 0!==t.resolutions?t.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=!!t.loader&&0===t.loader.length,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(t){this.resolutions_=t}findNearestResolution(t){const e=this.getResolutions();if(e){t=e[s(e,t,0)]}return t}getImage(t,e,n,i){const o=this.getProjection();if(!o||!i||nn(o,i))return o&&(i=o),this.getImageInternal(t,e,n,i);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&nn(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==e&&gt(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Al(o,i,t,e,n,(t,e,n)=>this.getImageInternal(t,e,n,o),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(t,e,n,i){if(this.loader){const o=function(t,e,n,i){const o=e/n,s=xt(t),r=jt(St(t)/o,4),a=jt(Ct(t)/o,4),h=jt((i-1)*r/2,4),l=r+2*h,c=jt((i-1)*a/2,4);return wt(s,o,0,[l,a+2*c])}(t,e,n,1),s=this.findNearestResolution(e);if(this.image&&(this.static_||this.wantedProjection_===i&&(this.wantedExtent_&&ot(this.wantedExtent_,o)||ot(this.image.getExtent(),o))&&(this.wantedResolution_&&Fl(this.wantedResolution_)===s||Fl(this.image.getResolution())===s)))return this.image;this.wantedProjection_=i,this.wantedExtent_=o,this.wantedResolution_=s,this.image=new ur(o,s,n,this.loader),this.image.addEventListener(f.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(t){const e=t.target;let n;switch(e.getState()){case Ps:this.loading=!0,n=Gl;break;case ks:this.loading=!1,n=Hl;break;case Rs:this.loading=!1,n=Ol;break;default:return}this.hasListener(n)&&this.dispatchEvent(new Vl(n,e))}}function Wl(t,e){t.getImage().src=e}class Bl extends Kl{constructor(t){const e=void 0!==t.crossOrigin?t.crossOrigin:null,n=void 0!==t.imageLoadFunction?t.imageLoadFunction:Wl;super({attributions:t.attributions,interpolate:t.interpolate,projection:$e(t.projection)}),this.url_=t.url,this.imageExtent_=t.imageExtent,this.image=null,this.image=new ur(this.imageExtent_,void 0,1,function(t){const e=t.load||dr,n=t.imageExtent,i=new Image;return null!==t.crossOrigin&&(i.crossOrigin=t.crossOrigin),()=>e(i,t.url).then(t=>{const e=St(n)/t.width,i=Ct(n)/t.height;return{image:t,extent:n,resolution:e!==i?[e,i]:i,pixelRatio:1}})}({url:t.url,imageExtent:t.imageExtent,crossOrigin:e,load:(t,e)=>(this.image.setImage(t),n(this.image,e),dr(t))})),this.image.addEventListener(f.CHANGE,this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(t,e,n,i){return It(t,this.image.getExtent())?this.image:null}getUrl(){return this.url_}}class Xl{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Ds,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let n=e.dataProjection?$e(e.dataProjection):this.readProjection(t);e.extent&&n&&"tile-pixels"===n.getUnits()&&(n=$e(n),n.setWorldExtent(e.extent)),e={dataProjection:n,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},t)}getType(){return w()}readFeature(t,e){return w()}readFeatures(t,e){return w()}readGeometry(t,e){return w()}readProjection(t){return w()}writeFeature(t,e){return w()}writeFeatures(t,e){return w()}writeGeometry(t,e){return w()}}function zl(t,e,n){const i=n?$e(n.featureProjection):null,o=n?$e(n.dataProjection):null;let s=t;if(i&&o&&!nn(i,o)){e&&(s=t.clone());const n=e?i:o,r=e?o:i;"tile-pixels"===n.getUnits()?s.transform(n,r):s.applyTransform(sn(n,r))}if(e&&n&&void 0!==n.decimals){const e=Math.pow(10,n.decimals),i=function(t){for(let n=0,i=t.length;n<i;++n)t[n]=Math.round(t[n]*e)/e;return t};s===t&&(s=t.clone()),s.applyTransform(i)}return s}const jl={Point:Un,LineString:Ms,Polygon:ui,MultiPoint:al,MultiLineString:rl,MultiPolygon:ll};function Ql(t,e){var n;const i=t.geometry;if(!i)return[];if(Array.isArray(i))return i.map(e=>Ql({...t,geometry:e})).flat();const o="MultiPolygon"===i.type?"Polygon":i.type;if("GeometryCollection"===o||"Circle"===o)throw new Error("Unsupported geometry type: "+o);const s=i.layout.length;return zl(new ul(o,"Polygon"===o?function(t,e,n){return Array.isArray(e[0])?(hi(t,0,e,n)||ci(t=t.slice(),0,e,n),t):(ai(t,0,e,n)||li(t=t.slice(),0,e,n),t)}(i.flatCoordinates,i.ends,s):i.flatCoordinates,null==(n=i.ends)?void 0:n.flat(),s,t.properties||{},t.id).enableSimplifyTransformed(),!1,e)}function ql(t,e){if(!t)return null;if(Array.isArray(t)){const n=t.map(t=>ql(t,e));return new il(n)}return zl(new(0,jl[t.type])(t.flatCoordinates,t.layout,t.ends),!1,e)}class Yl extends Xl{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(Ul(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(Ul(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return w()}readFeaturesFromObject(t,e){return w()}readGeometry(t,e){return this.readGeometryFromObject(Ul(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return w()}readProjection(t){return this.readProjectionFromObject(Ul(t))}readProjectionFromObject(t){return w()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return w()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return w()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return w()}}function Ul(t){if("string"==typeof t){const e=JSON.parse(t);return e||null}return null!==t?t:null}class Zl extends Yl{constructor(t){t=t||{},super(),this.dataProjection=$e(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=$e(t.featureProjection)),t.featureClass&&(this.featureClass=t.featureClass),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let n=null;n="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null};const i=$l(n.geometry);if(this.featureClass===ul)return Ql({geometry:i,id:n.id,properties:n.properties},e);const o=new Ds;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in n!==void 0&&o.setGeometryName(n.geometry_name),o.setGeometry(ql(i,e)),"id"in n&&o.setId(n.id),n.properties&&o.setProperties(n.properties,!0),o}readFeaturesFromObject(t,e){let n=null;if("FeatureCollection"===t.type){n=[];const i=t.features;for(let t=0,o=i.length;t<o;++t){const o=this.readFeatureFromObject(i[t],e);o&&n.push(o)}}else n=[this.readFeatureFromObject(t,e)];return n.flat()}readGeometryFromObject(t,e){return function(t,e){const n=$l(t);return ql(n,e)}(t,e)}readProjectionFromObject(t){const e=t.crs;let n;if(e)if("name"==e.type)n=$e(e.properties.name);else{if("EPSG"!==e.type)throw new Error("Unknown SRS type");n=$e("EPSG:"+e.properties.code)}else n=this.dataProjection;return n}writeFeatureObject(t,e){e=this.adaptOptions(e);const n={type:"Feature",geometry:null,properties:null},i=t.getId();if(void 0!==i&&(n.id=i),!t.hasProperties())return n;const o=t.getProperties(),s=t.getGeometry();return s&&(n.geometry=Jl(s,e),delete o[t.getGeometryName()]),p(o)||(n.properties=o),n}writeFeaturesObject(t,e){e=this.adaptOptions(e);const n=[];for(let i=0,o=t.length;i<o;++i)n.push(this.writeFeatureObject(t[i],e));return{type:"FeatureCollection",features:n}}writeGeometryObject(t,e){return Jl(t,this.adaptOptions(e))}}function $l(t,e){if(!t)return null;let n;switch(t.type){case"Point":n=function(t){const e=t.coordinates;return{type:"Point",flatCoordinates:e,layout:En(e.length)}}(t);break;case"LineString":n=function(t){const e=t.coordinates,n=e.flat();return{type:"LineString",flatCoordinates:n,ends:[n.length],layout:En(e[0].length)}}(t);break;case"Polygon":n=function(t){const e=t.coordinates,n=[],i=e[0][0].length,o=Gn(n,0,e,i);return{type:"Polygon",flatCoordinates:n,ends:o,layout:En(i)}}(t);break;case"MultiPoint":n=function(t){const e=t.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:En(e[0].length)}}(t);break;case"MultiLineString":n=function(t){const e=t.coordinates,n=e[0][0].length,i=[],o=Gn(i,0,e,n);return{type:"MultiLineString",flatCoordinates:i,ends:o,layout:En(n)}}(t);break;case"MultiPolygon":n=function(t){const e=t.coordinates,n=[],i=e[0][0][0].length,o=Hn(n,0,e,i);return{type:"MultiPolygon",flatCoordinates:n,ends:o,layout:En(i)}}(t);break;case"GeometryCollection":n=function(t){const e=t.geometries.map(function(t){return $l(t)});return e}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return n}function Jl(t,e){const n=(t=zl(t,!0,e)).getType();let i;switch(n){case"Point":i=function(t){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case"LineString":i=function(t){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case"Polygon":i=function(t,e){let n;e&&(n=e.rightHanded);return{type:"Polygon",coordinates:t.getCoordinates(n)}}(t,e);break;case"MultiPoint":i=function(t){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case"MultiLineString":i=function(t){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case"MultiPolygon":i=function(t,e){let n;e&&(n=e.rightHanded);return{type:"MultiPolygon",coordinates:t.getCoordinates(n)}}(t,e);break;case"GeometryCollection":i=function(t,e){e=Object.assign({},e),delete e.featureProjection;const n=t.getGeometriesArray().map(function(t){return Jl(t,e)});return{type:"GeometryCollection",geometries:n}}(t,e);break;case"Circle":i={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+n)}return i}const tc="select";class ec extends e{constructor(t,e,n,i){super(t),this.selected=e,this.deselected=n,this.mapBrowserEvent=i}}const nc={};class ic extends Fo{constructor(t){let e;if(super(),this.on,this.once,this.un,t=t||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=t.condition?t.condition:jo,this.addCondition_=t.addCondition?t.addCondition:zo,this.removeCondition_=t.removeCondition?t.removeCondition:zo,this.toggleCondition_=t.toggleCondition?t.toggleCondition:qo,this.multi_=!!t.multi&&t.multi,this.filter_=t.filter?t.filter:l,this.hitTolerance_=t.hitTolerance?t.hitTolerance:0,this.style_=void 0!==t.style?t.style:function(){const t=Bs();return a(t.Polygon,t.LineString),a(t.GeometryCollection,t.LineString),function(e){return e.getGeometry()?t[e.getGeometry().getType()]:null}}(),this.features_=t.features||new L,t.layers)if("function"==typeof t.layers)e=t.layers;else{const n=t.layers;e=function(t){return n.includes(t)}}else e=l;this.layerFilter_=e,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(t,e){this.featureLayerAssociation_[T(t)]=e}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(t){return this.featureLayerAssociation_[T(t)]}setHitTolerance(t){this.hitTolerance_=t}setMap(t){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(t),t?(this.features_.addEventListener(S,this.boundAddFeature_),this.features_.addEventListener(I,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(S,this.boundAddFeature_),this.features_.removeEventListener(I,this.boundRemoveFeature_))}addFeature_(t){const e=t.element;if(this.style_&&this.applySelectedStyle_(e),!this.getLayer(e)){const t=this.getMap().getAllLayers().find(function(t){if(t instanceof el&&t.getSource()&&t.getSource().hasFeature(e))return t});t&&this.addFeatureLayerAssociation_(e,t)}}removeFeature_(t){this.style_&&this.restorePreviousStyle_(t.element)}getStyle(){return this.style_}applySelectedStyle_(t){const e=T(t);e in nc||(nc[e]=t.getStyle()),t.setStyle(this.style_)}restorePreviousStyle_(t){const e=this.getMap().getInteractions().getArray();for(let i=e.length-1;i>=0;--i){const n=e[i];if(n!==this&&n instanceof ic&&n.getStyle()&&-1!==n.getFeatures().getArray().lastIndexOf(t))return void t.setStyle(n.getStyle())}const n=T(t);t.setStyle(nc[n]),delete nc[n]}removeFeatureLayerAssociation_(t){delete this.featureLayerAssociation_[T(t)]}handleEvent(t){if(!this.condition_(t))return!0;const e=this.addCondition_(t),n=this.removeCondition_(t),i=this.toggleCondition_(t),o=!e&&!n&&!i,s=t.map,r=this.getFeatures(),a=[],h=[];if(o){d(this.featureLayerAssociation_),s.forEachFeatureAtPixel(t.pixel,(t,e)=>{if(t instanceof Ds&&this.filter_(t,e))return this.addFeatureLayerAssociation_(t,e),h.push(t),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let t=r.getLength()-1;t>=0;--t){const e=r.item(t),n=h.indexOf(e);n>-1?h.splice(n,1):(r.remove(e),a.push(e))}0!==h.length&&r.extend(h)}else{s.forEachFeatureAtPixel(t.pixel,(t,o)=>{if(t instanceof Ds&&this.filter_(t,o))return!e&&!i||r.getArray().includes(t)?(n||i)&&r.getArray().includes(t)&&(a.push(t),this.removeFeatureLayerAssociation_(t)):(this.addFeatureLayerAssociation_(t,o),h.push(t)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let t=a.length-1;t>=0;--t)r.remove(a[t]);r.extend(h)}return(h.length>0||a.length>0)&&this.dispatchEvent(new ec(tc,h,a,t)),!0}}const oc=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],sc="enterfullscreen",rc="leavefullscreen";class ac extends Mo{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target}),this.on,this.once,this.un,this.keys_=void 0!==t.keys&&t.keys,this.source_=t.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=void 0!==t.className?t.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=void 0!==t.activeClassName?t.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=void 0!==t.inactiveClassName?t.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const e=void 0!==t.label?t.label:"";this.labelNode_="string"==typeof e?document.createTextNode(e):e;const n=void 0!==t.labelActive?t.labelActive:"";this.labelActiveNode_="string"==typeof n?document.createTextNode(n):n;const i=t.tipLabel?t.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=i,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(f.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${Ti} ${bi}`,this.element.appendChild(this.button_)}handleClick_(t){t.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const t=this.getMap();if(!t)return;const e=t.getOwnerDocument();if(hc(e))if(lc(e))!function(t){t.exitFullscreen?t.exitFullscreen():t.webkitExitFullscreen&&t.webkitExitFullscreen()}(e);else{let n;n=this.source_?"string"==typeof this.source_?e.getElementById(this.source_):this.source_:t.getTargetElement(),this.keys_?function(t){t.webkitRequestFullscreen?t.webkitRequestFullscreen():cc(t)}(n):cc(n)}}handleFullScreenChange_(){const t=this.getMap();if(!t)return;const e=this.isInFullscreen_;this.isInFullscreen_=lc(t.getOwnerDocument()),e!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(Ri(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(sc)):(Ri(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(rc)),t.updateSize())}setClassName_(t,e){e?(t.classList.remove(...this.inactiveClassName_),t.classList.add(...this.activeClassName_)):(t.classList.remove(...this.activeClassName_),t.classList.add(...this.inactiveClassName_))}setMap(t){const e=this.getMap();e&&e.removeChangeListener(xo,this.boundHandleMapTargetChange_),super.setMap(t),this.handleMapTargetChange_(),t&&t.addChangeListener(xo,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const t=this.documentListeners_;for(let n=0,i=t.length;n<i;++n)v(t[n]);t.length=0;const e=this.getMap();if(e){const n=e.getOwnerDocument();hc(n)?this.element.classList.remove(Di):this.element.classList.add(Di);for(let e=0,i=oc.length;e<i;++e)t.push(_(n,oc[e],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function hc(t){const e=t.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&t.fullscreenEnabled)}function lc(t){return!(!t.webkitIsFullScreen&&!t.fullscreenElement)}function cc(t){t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}const uc="element",gc="map",dc="offset",pc="position",mc="positioning";class fc extends b{constructor(t){super(),this.on,this.once,this.un,this.options=t,this.id=t.id,this.insertFirst=void 0===t.insertFirst||t.insertFirst,this.stopEvent=void 0===t.stopEvent||t.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==t.className?t.className:"ol-overlay-container ol-selectable",this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===t.autoPan?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(uc,this.handleElementChanged),this.addChangeListener(gc,this.handleMapChanged),this.addChangeListener(dc,this.handleOffsetChanged),this.addChangeListener(pc,this.handlePositionChanged),this.addChangeListener(mc,this.handlePositioningChanged),void 0!==t.element&&this.setElement(t.element),this.setOffset(void 0!==t.offset?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),void 0!==t.position&&this.setPosition(t.position)}getElement(){return this.get(uc)}getId(){return this.id}getMap(){return this.get(gc)||null}getOffset(){return this.get(dc)}getPosition(){return this.get(pc)}getPositioning(){return this.get(mc)}handleElementChanged(){Ai(this.element);const t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){this.mapPostrenderListenerKey&&(Fi(this.element),v(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=_(t,go,this.render,this),this.updatePixelPosition();const e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set(uc,t)}setMap(t){this.set(gc,t)}setOffset(t){this.set(dc,t)}setPosition(t){this.set(pc,t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){const e=this.getMap();if(!e||!e.getTargetElement()||!this.get(pc))return;const n=this.getRect(e.getTargetElement(),e.getSize()),i=this.getElement(),o=this.getRect(i,[Pi(i),ki(i)]),s=void 0===(t=t||{}).margin?20:t.margin;if(!ot(n,o)){const i=o[0]-n[0],r=n[2]-o[2],a=o[1]-n[1],h=n[3]-o[3],l=[0,0];if(i<0?l[0]=i-s:r<0&&(l[0]=Math.abs(r)+s),a<0?l[1]=a-s:h<0&&(l[1]=Math.abs(h)+s),0!==l[0]||0!==l[1]){const n=e.getView().getCenterInternal(),i=e.getPixelFromCoordinateInternal(n);if(!i)return;const o=[i[0]+l[0],i[1]+l[1]],s=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(o),duration:s.duration,easing:s.easing})}}}getRect(t,e){const n=t.getBoundingClientRect(),i=n.left+window.pageXOffset,o=n.top+window.pageYOffset;return[i,o,i+e[0],o+e[1]]}setPositioning(t){this.set(mc,t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){const t=this.getMap(),e=this.getPosition();if(!t||!t.isRendered()||!e)return void this.setVisible(!1);const n=t.getPixelFromCoordinate(e),i=t.getSize();this.updateRenderedPosition(n,i)}updateRenderedPosition(t,e){const n=this.element.style,i=this.getOffset(),o=this.getPositioning();this.setVisible(!0);let s="0%",r="0%";"bottom-right"==o||"center-right"==o||"top-right"==o?s="-100%":"bottom-center"!=o&&"center-center"!=o&&"top-center"!=o||(s="-50%"),"bottom-left"==o||"bottom-center"==o||"bottom-right"==o?r="-100%":"center-left"!=o&&"center-center"!=o&&"center-right"!=o||(r="-50%");const a=`translate(${s}, ${r}) translate(${Math.round(t[0]+i[0])+"px"}, ${Math.round(t[1]+i[1])+"px"})`;this.rendered.transform_!=a&&(this.rendered.transform_=a,n.transform=a)}getOptions(){return this.options}}const _c="units",yc=[1,2,5],vc=25.4/.28;class xc extends Mo{constructor(t){t=t||{};const e=document.createElement("div");e.style.pointerEvents="none",super({element:e,render:t.render,target:t.target}),this.on,this.once,this.un;const n=void 0!==t.className?t.className:t.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=n+"-inner",this.element.className=n+" "+Ti,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==t.minWidth?t.minWidth:64,this.maxWidth_=t.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(_c,this.handleUnitsChanged_),this.setUnits(t.units||"metric"),this.scaleBar_=t.bar||!1,this.scaleBarSteps_=t.steps||4,this.scaleBarText_=t.text||!1,this.dpi_=t.dpi||void 0}getUnits(){return this.get(_c)}handleUnitsChanged_(){this.updateElement_()}setUnits(t){this.set(_c,t)}setDpi(t){this.dpi_=t}updateElement_(){const t=this.viewState_;if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=t.center,n=t.projection,i=this.getUnits(),o="degrees"==i?"degrees":"m";let s=Je(n,t.resolution,e,o);const r=this.minWidth_*(this.dpi_||vc)/vc,a=void 0!==this.maxWidth_?this.maxWidth_*(this.dpi_||vc)/vc:void 0;let h=r*s,l="";if("degrees"==i){const t=Te.degrees;h*=t,h<t/60?(l="",s*=3600):h<t?(l="",s*=60):l=""}else if("imperial"==i)h<.9144?(l="in",s/=.0254):h<1609.344?(l="ft",s/=.3048):(l="mi",s/=1609.344);else if("nautical"==i)s/=1852,l="NM";else if("metric"==i)h<.001?(l="m",s*=1e6):h<1?(l="mm",s*=1e3):h<1e3?l="m":(l="km",s/=1e3);else{if("us"!=i)throw new Error("Invalid units");h<.9144?(l="in",s*=39.37):h<1609.344?(l="ft",s/=.30480061):(l="mi",s/=1609.3472)}let c,u,g,d,p,m,f=3*Math.floor(Math.log(r*s)/Math.log(10));for(;;){g=Math.floor(f/3);const t=Math.pow(10,g);if(c=yc[(f%3+3)%3]*t,u=Math.round(c/s),isNaN(u))return this.element.style.display="none",void(this.renderedVisible_=!1);if(void 0!==a&&u>=a){c=d,u=p,g=m;break}if(u>=r)break;d=c,p=u,m=g,++f}const _=this.scaleBar_?this.createScaleBar(u,c,l):c.toFixed(g<0?-g:0)+" "+l;this.renderedHTML_!=_&&(this.innerElement_.innerHTML=_,this.renderedHTML_=_),this.renderedWidth_!=u&&(this.innerElement_.style.width=u+"px",this.renderedWidth_=u),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(t,e,n){const i=this.getScaleForResolution(),o=i<1?Math.round(1/i).toLocaleString()+" : 1":"1 : "+Math.round(i).toLocaleString(),s=this.scaleBarSteps_,r=t/s,a=[this.createMarker("absolute")];for(let h=0;h<s;++h){const i=h%2==0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";a.push(`<div><div class="ol-scale-singlebar ${i}" style="width: ${r}px;"></div>`+this.createMarker("relative")+(h%2==0||2===s?this.createStepText(h,t,!1,e,n):"")+"</div>")}a.push(this.createStepText(s,t,!0,e,n));return(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${t}px;">`+o+"</div>":"")+a.join("")}createMarker(t){return`<div class="ol-scale-step-marker" style="position: ${t}; top: ${"absolute"===t?3:-10}px;"></div>`}createStepText(t,e,n,i,o){const s=(0===t?0:Math.round(i/this.scaleBarSteps_*t*100)/100)+(0===t?"":" "+o);return`<div class="ol-scale-step-text" style="margin-left: ${0===t?-3:e/this.scaleBarSteps_*-1}px;text-align: ${0===t?"left":"center"};min-width: ${0===t?0:e/this.scaleBarSteps_*2}px;left: ${n?e+"px":"unset"};">`+s+"</div>"}getScaleForResolution(){return Je(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m")*(1e3/25.4)*(this.dpi_||vc)}render(t){const e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()}}class wc extends Mo{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target}),this.extent=t.extent?t.extent:null;const e=void 0!==t.className?t.className:"ol-zoom-extent",n=void 0!==t.label?t.label:"E",i=void 0!==t.tipLabel?t.tipLabel:"Fit to extent",o=document.createElement("button");o.setAttribute("type","button"),o.title=i,o.appendChild("string"==typeof n?document.createTextNode(n):n),o.addEventListener(f.CLICK,this.handleClick_.bind(this),!1);const s=e+" "+Ti+" "+bi,r=this.element;r.className=s,r.appendChild(o)}handleClick_(t){t.preventDefault(),this.handleZoomToExtent()}handleZoomToExtent(){const t=this.getMap().getView(),e=this.extent?this.extent:t.getProjection().getExtent();t.fitInternal(gi(e))}}window.QueryString=function(){for(var t={},e=window.location.search.substring(1).split("&"),n=0;n<e.length;n++){var i=e[n].split("=");if(void 0===t[i[0]])t[i[0]]=decodeURIComponent(i[1]);else if("string"==typeof t[i[0]]){var o=[t[i[0]],decodeURIComponent(i[1])];t[i[0]]=o}else t[i[0]].push(decodeURIComponent(i[1]))}return t}(),$(document).on("input",".clearable",function(){var t;$(this)[(t=this.value,t?"addClass":"removeClass")]("x")}).on("mousemove",".x",function(){}).on("touchstart click",".onX",function(t){t.preventDefault(),$(this).val("").change()}),window.app=window.app||{},app.RotateNorthControl=class extends EventTarget{constructor(t){super();const e=t||{},n=document.createElement("button");n.innerHTML="";const i=()=>{this.getMap().getView().animate({center:app.default_routing_start,zoom:2.5,duration:2e3,easing:t=>Math.pow(2,-25*t)*Math.sin((t-.075)*(2*Math.PI)/.3)+1}),app.direction_input={from:{id:"start_point",geoloc:app.default_routing_start,information:{TenDoanhNghiep:"V tr hin ti"}},to:null},document.getElementById("from_place").value=app.direction_input.from&&app.direction_input.from.information?app.direction_input.from.information.TenDoanhNghiep:"",document.getElementById("to_place").value=app.direction_input.to&&app.direction_input.to.information?app.direction_input.to.information.TenDoanhNghiep:""};n.addEventListener("click",i,!1),n.addEventListener("touchstart",i,!1);const o=document.createElement("div");o.className="rotate-north ol-control ol-unselectable",o.appendChild(n),this.element=o,this.target=e.target}getElement(){return this.element}setMap(t){if(this.map_=t,t&&this.element&&!this.element.parentNode){(this.target||t.getOverlayContainerStopEvent()).appendChild(this.element)}}getMap(){return this.map_}},app.getBlockPoint=function(t){if(!t)return!1;for(var e=[],n=t.feature.G.geometry.A,i=0;i<n.length-1;i+=2){var o=[];o.push(n[i],n[i+1]),e.push(o)}return e},app.getDirection=function(t){if(!t)return!1;var e=t.from,n=t.to;if(!e||!n)return[];console.log("start search ...");var i=app.getGeoLoc(n);console.info("Target: ",i);for(var o=[[e]],s=-1;;){var r=!1,a=[],h=0,l=L(o[0]);for(var c in o){var u=L(o[c]);u<l&&(l=u,h=c)}var g=o[h],d=g?g.length:0,p=null;try{p=g[d-1]}catch{return!1}var m=E(p);if(!app.isNear(p,n)&&m)for(var f in m)if(!I(g,m[f])){r=!0;var _=JSON.parse(JSON.stringify(g));console.log("getChildPathOf(",p,m[f],")",M(p,m[f]));var y=M(p,m[f]);if(y)for(var v in y)_.push(y[v]);console.log("After push: ",_),_.push(m[f]),a.push(_)}for(var x in 0!==a.length||app.isNear(p,n)||(r=!0),o)r?x!==h&&a.push(o[x]):a.push(o[x]);if(o=a,!r){s=-1;var w=L(o[0]);for(var C in o){var T=o[C],D=T[T.length-1],b=L(T);(b<w||-1===s)&&app.isNear(D,n)&&(w=b,s=C)}break}}console.log("result: shortest_index",s,o);var S=o[s];return S&&(S.push(n),console.info(" Last result : =================> ",S)),S;function I(t,e){for(var n in t)if(app.isNear(e,t[n]))return!0;return!1}function E(t,e){var n=[];for(var i in e=e||[],app.route)app.isNear(app.route[i].start,t)&&app.checkIgnore(app.route[i].next,e)&&n.push(app.route[i].next);return n}function M(t,e){for(var n in app.route)if(app.route[n]&&app.isNear(app.route[n].start,t)&&app.isNear(app.route[n].next,e))return app.route[n].points;return[]}function L(t){var e=0;if(!t)return e;for(var n=t.length,i=0;i<n;i++)void 0!==t[i]&&void 0!==t[i+1]&&(e+=app.distance(t[i],t[i+1]));return e}},app.getGeoLoc=function(t){var e=null;for(var n in t=t||[],this.route){var i=this.distance(this.route[n].start,t);i<10&&(null===e||e.distance>i)&&(e={point:this.route[n],distance:i})}return e},app.distance=function(t,e){return t&&e?Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)):0},app.isNear=function(t,e,n){return this.distance(t,e)<5},app.checkIgnore=function(t,e){for(var n in e)if(this.isNear(e[n],t,20))return!1;return!0},app.arrayPointToRouterGeneratorTools=function(t,e){var n={start:[],next:[],points:[],length:0},i=JSON.parse(JSON.stringify(t));n.start=i.shift(),n.next=i.pop(),n.points=i;for(var o=0,s=t.length,r=0;r<s;r++){var a=t[r],h=t[r+1];a&&h&&(o+=Math.sqrt(Math.pow(a[0]-h[0],2)+Math.pow(a[1]-h[1],2)))}if(n.length=o,console.info("window.app.route.push("+JSON.stringify(n)+"); "+(e?"/* reverse */":"")),!e)for(var l=[],c=s-1;c>=0;c--)t[c]&&l.push(t[c])},app.getBuildingBlockStyle=function(){return"undefined"!=typeof Style?new Style({fill:new Fill({color:"rgba(255, 255, 255, 0.6)"}),stroke:new Stroke({color:"#319FD3",width:1}),text:new Text({font:"12px Calibri,sans-serif",fill:new Fill({color:"#000"}),stroke:new Stroke({color:"#fff",width:3})})}):null},window.getDirectionTo=app.getDirectionTo=function(t,e,n){if(n&&n.preventDefault(),$("#popup").popover("hide"),!app.direction_input.from||!app.direction_input.to)return;app.vector_direction&&map.removeLayer(app.vector_direction);var i=app.getDirection({from:app.direction_input.from.geoloc,to:app.direction_input.to.geoloc});if(!i)return swal({title:"Khng tm thy",text:"",type:"warning",timer:3e3});const o=window.ol?window.ol.source.Vector:"undefined"!=typeof ol&&ol.source?ol.source.Vector:null,s=window.ol?window.ol.layer.Vector:"undefined"!=typeof ol&&ol.layer?ol.layer.Vector:null,r=window.ol?window.ol.Feature:"undefined"!=typeof ol&&ol.Feature?ol.Feature:null,a=window.ol?window.ol.geom.MultiLineString:"undefined"!=typeof ol&&ol.geom?ol.geom.MultiLineString:null,h=window.ol?window.ol.style.Style:"undefined"!=typeof ol&&ol.style?ol.style.Style:null,l=window.ol?window.ol.style.Stroke:"undefined"!=typeof ol&&ol.style?ol.style.Stroke:null,c=window.ol?window.ol.style.Fill:"undefined"!=typeof ol&&ol.style?ol.style.Fill:null;if(o&&s&&r&&a&&h&&l&&c){var u=new o;u.addFeature(new r(new a([i]))),app.vector_direction=new s({source:u,style:new h({stroke:new l({color:"#4285F4",width:6,lineCap:"round"}),fill:new c({color:"#FFF"})})}),map.addLayer(app.vector_direction)}},window.closeAllModal=function(){console.log("Close button"),$("#modal").modal("hide")},$(".modal-open").on("click touchstart",closeAllModal),window.modalView=app.modalView=function(t,e,n){n.preventDefault(),$("#popup").popover("hide"),$("#modal").modal("show")},window.searchEnterprise=function(t){if(!window.app.enterprise)return!1;for(var e in window.app.enterprise.enterprise){var n=window.app.enterprise.enterprise[e];if(n&&n.DiaChiTrongKhu&&n.DiaChiTrongKhu.indexOf(t)>-1)return n}return!1},app.getGeoDataFromBlockID=function(t){for(var e in window.app.enterprise_geodata.features){var n=window.app.enterprise_geodata.features[e];if(n.id===t)return n}return!1},app.getAndMoveTo=function(t){if(!t)return!1},app.markAPinTo=function(t){if(!t||!t.geometry||!t.geometry.coordinates)return!1;var e=t.geometry.coordinates[0],n=app.getCenterFromCoordinate(e);const i=window.view||(window.map?window.map.getView():null),o=window.map;if(i){let t=function(t){return Math.pow(2,-25*t)*Math.sin((t-.075)*(2*Math.PI)/.3)+1};i.animate({center:n,zoom:4,duration:2e3,easing:t})}const s=window.ol?window.ol.Overlay:"undefined"!=typeof ol&&ol.Overlay?ol.Overlay:null;if(s&&o){var r=new s({position:n,positioning:"center-center",element:document.getElementById("location_pin"),stopEvent:!1});o.addOverlay(r)}},app.getCenterFromCoordinate=function(t){for(var e=t[0][0],n=t[0][1],i=t[0][0],o=t[0][1],s=0;s<t.length;s++)t[s][0]*t[s][1]<e*n&&(e=t[s][0],n=t[s][1]),t[s][0]*t[s][1]>i*o&&(i=t[s][0],o=t[s][1]);var r=[];return r[0]=e+(i-e)/2,r[1]=n+(o-n)/2,r},window.addSearchPlace=function(t,e,n,i){getDirectionTo(e,n,i)},app.getBlockIdFromAddress=function(t){if(!t)return"";var e=null;return e||(e=t.match(/([A-z]-[0-9]{1,2}[a-z]-[0-9]{1,2}[a-z]?)\s?/i)),e||(e=t.match(/([A-z]-[A-z]?[0-9]{1,2})\s?/i)),e||(e=t.match(/([A-z][0-9]{1,2}(\.[0-9])?-[A-z][0-9]{1,2})\s?/i)),e||(e=t.match(/([A-z][0-9]{1,2}-[A-z][0-9]{1,2})\s?/i)),e||(e=t.match(/[A-z][0-9]{1,2}[a-z]?(-)?\s?/i)),e||(e=t.match(/([A-z][0-9]{1,2}[a-z]?-[A-z]-[0-9])\s?/i)),e||(e=t.match(/([A-z][0-9]{1,2}[a-z]?-[0-9.a-z]{1,4})\s?/i)),e||(e=t.match(/([A-z][0-9]{1,2})\s?/i)),e?e[0]:""},app.getCenterPointOfBlock=function(t){var e=0,n=0,i=0,o=0;for(var s in t){var r=t[s];r[0]&&r[1]&&(e+=r[0],n++,i+=r[1],o++)}return n>0?[e/n,i/o]:[0,0]},window.app=window.app||{},window.app.enterprise_geodata={type:"FeatureCollection",features:[{type:"Feature",id:"I-1d-1",properties:{name:"I-1d-1 COPAL",gateway:[311.0625,787.125],data:{ID:76,TenDoanhNghiep:"Cng ty TNHH Nidec Copal Precision Vit Nam",GoiTat:"NCVP",QuocGia:"Nht Bn",DaiDienPhapLuat:"ng Takehiko Kumagai - Tng Gim c",LinhVucHoatDong:"C kh chnh xc v t ng ha",TenDuAnDauTu:"Cng ty TNHH Nidec Copal Precision Vit Nam",MucTieuQuyMoDuAn:["Thit k, sn xut v kinh doanh cc loi m t compact c  chnh xc cao v cc linh ph kin ca m t vi quy m:","-   Giai on  u (2010 - 2012): 13.656.000 m t + 1.050.000 linh kin","-   Giai on n nh (t 2012 tr i): 217.844.000 m t + 29.720.000 linh kin"],DiaChiTrongKhu:"L I-1d-1, ng N1",DienThoai:"37361111",Fax:"37360943",Website:"http://www.nidec-copal.com/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[325.3125,762.625],[313.1875,768.375],[313.9375,773.625],[313.5625,778.875],[311.6875,786.625],[308.8125,793.5],[301.8125,803.5],[341.5625,822.75],[361.0625,812.75],[369.9375,807.25],[325.3125,762.625]]]}},{type:"Feature",id:"I3-9",properties:{name:"COPAL-2",gateway:[436.9375,654.375],data:{ID:67,TenDoanhNghiep:"Cng ty TNHH Sonion Vit Nam",GoiTat:"Sonion Vietnam",QuocGia:"an Mch",DaiDienPhapLuat:"ng Torben Axelsen - Tng Gim c",LinhVucHoatDong:"Vi in t-CNTT- vin thng",TenDuAnDauTu:"Cng ty TNHH Sonion Vit Nam",MucTieuQuyMoDuAn:["Sn xut cc sn phm v cng ngh m thanh siu nh v vi c in t, pht trin v sn xut micr bng vi c in t silicon (micr, ng nghe v loa)."],DiaChiTrongKhu:"L I3-9",DienThoai:"37362222",Fax:"37360525",Website:"http://www.sonion.com",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[432.125,658],[457.625,641.25],[471.875,652],[447.125,669.5]]]}},{type:"Feature",id:"I-10.1",properties:{name:"I-10.1",gateway:[524.4375,359.75],data:{ID:18,TenDoanhNghiep:"Cng ty TNHH CNS Amura Precision",GoiTat:"CNS Amura",QuocGia:"Vit Nam",DaiDienPhapLuat:"ng H Minh Sn - Tng Gim c",LinhVucHoatDong:"C kh chnh xc v t ng ha",TenDuAnDauTu:"Thit k, ch to sn phm c kh chnh xc cao",MucTieuQuyMoDuAn:["Nghin cu, ng dng cng ngh mi  thit k, ch to sn phm c kh t tiu chun chnh xc cao nhm cung cp sn phm cho cc n v trong Tng cng ty, ch cc nh u t trong lnh vc cng ngh cao trong nc v tin n xut khu sang cc nc khc"],DiaChiTrongKhu:"L I-10-1, ng D2",DienThoai:"62577598",Fax:"38953347",Website:"http://cnsamura.com.vn/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[465.125,394.1000003814697],[470.125,404.6000003814697],[474.375,410.8500003814697],[478.375,413.6000003814697],[530.625,365.8500003814697],[518.875,354.3500003814697],[512.875,358.6000003814697],[504.625,352.3500003814697],[472.125,388.8500003814697],[464.375,390.8500003814697],[465.125,394.1000003814697]]]}},{type:"Feature",id:"I-10.2",properties:{name:"I-10.2",gateway:[542.96875,379.0625],data:{ID:24,TenDoanhNghiep:"Cng ty TNHH u t nh xng Lp Thnh",GoiTat:"LTF Co., Ltd",QuocGia:"Vit Nam",DaiDienPhapLuat:"ng Nguyn Anh Tun - Ch tch HTV",LinhVucHoatDong:"Dch v thng mi",TenDuAnDauTu:"D n u t xy dng Nh xng cho thu ti Khu Cng ngh cao",MucTieuQuyMoDuAn:["a) Mc tiu:","- u t xy dng nh xng xy sn v nh xng xy theo yu cu vi din tch va v nh (t 1.000m2 n 5.000m2), vi mc gi cho thu cnh tranh v thi hn cho thu linh hot, p ng nhu cu ca nhng DN u t trong KCNC, bao gm: DN sn xut CNC, DN nghin cu pht trin, DN cng nghip h tr CNC,...","- Cung cp dch v bo tr, sa cha nh xng, h thng in, nc, CN xy dng ph hp cho i tng khch hng v nhu cu s dng.","b) Quy m:","Xy dng tng cng 18 nh xng vi tng din tch sn xy dng d kin l 27.106 m2."],DiaChiTrongKhu:"L I-10-2, ng D2",DienThoai:"39979871",Fax:"39979873",Website:"",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[479.125,414.3500003814697],[489.625,421.8500003814697],[493.375,422.3500003814697],[508.125,410.6000003814697],[515.125,405.6000003814697],[523.875,400.6000003814697],[543.125,394.6000003814697],[551.375,392.6000003814697],[553.125,390.1000003814697],[530.875,366.3500003814697],[479.125,414.3500003814697]]]}},{type:"Feature",id:"I-10.6",properties:{name:"I-10.6",gateway:[501.4375,416],data:{ID:8,TenDoanhNghiep:"Cng ty C phn K thut cng ngh t ng Hi Nam",GoiTat:"Hi Nam",QuocGia:"Vit Nam",DaiDienPhapLuat:"ng Ng Hiu Hi - Gim c",LinhVucHoatDong:"Vi in t-CNTT- vin thng",TenDuAnDauTu:"H thng gim st v iu khin Hi Nam",MucTieuQuyMoDuAn:["- Nghin cu, thit k v ch to: Linh kin v cm thit b o lng, iu khin, gim st, t ng ha v phn phi in cho cc h thng thit b ng b phc v cng nghip cng ngh cao (nh my ch to linh kin bn dn, in t, sn xut tm pin mt tri), cc ngnh cng nghip khc, nng lng (nh my in, nh my lc ha du) v c s h tng (sn bay, cng bin, metro, cng trnh dn dng)","- Nghin cu, thit k ch to v tch hp cc loi sn phm cu thnh: H thng gim st, iu khin, thu thp d liu (SCADA) cho li in nh MCC, PLC, DCS v phn mm tch hp cng nh cc loi rle k thut s cho h thng in","- Cung cp sn phm v dch v h tr trn gi (lp t, o to, vn hnh, bo tr) phc v cc nh my cng ngh cao hin ang hot ng ti Vit Nam: Cung cp h thng trung tm iu khin ng c thng minh (iMCC) v cc loi t iu khin, phn phi in cho cc cng ty k thut cao, cc ngnh cng nghip, nng lng v c s h tng; cung cp cc sn phm v dch v h tr phc v cho cc khch hng trn trong cng tc bo tr, nng cp, m rng sau ny; Hp tc cung cp sn phm phn mm v dch v bo tr ton din cho khch hng. Khch hng mc tiu: cc cng ty hot ng a lnh vc (gm c: cng ngh thng tin, bo him, du kh, thng mi, bn l) trong nc v trn th gii, c bit l th trng ng Nam "],DiaChiTrongKhu:"L I106, ng D7",DienThoai:"38389868",Fax:"",Website:"http://www.indigo-jsc.com/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[490.0625,421.875],[493.0625,422],[500.0625,416.5],[505.1875,412.375],[508.9375,409.5],[512.0625,407.625],[499.1875,395.375],[479.3125,414.25],[490.0625,421.875]]]}},{type:"Feature",id:"I1-N1",properties:{name:"I1-N1 NIDEC-SANKYO",gateway:[267.4375,833.875],data:{ID:73,TenDoanhNghiep:"Cng ty TNHH Nidec Sankyo Vit Nam",GoiTat:"NSVC",QuocGia:"Nht Bn",DaiDienPhapLuat:"ng Shimada Hidetoshi - Tng Gim c",LinhVucHoatDong:"C kh chnh xc v t ng ha",TenDuAnDauTu:"Cng ty TNHH Nidec Sankyo Vit Nam",MucTieuQuyMoDuAn:["- Sn xut v tiu th cc linh kin u gp quang hc; ng c bc, cc thit b in gia dng cao cp s dng ng c bc; u c th t tnh; u c th tr trc; cng tc nh gi; v ch to cc linh kin my mc  sn xut cc sn phm trn.","- Quy m : S lng 150.000.000 (mt trm nm mi triu) ci/nm."],DiaChiTrongKhu:"L I1-N1",DienThoai:"37360014",Fax:"37360018",Website:"http://www.nidec-sankyo.co.jp/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[234,798.375],[281.5,818.625],[257.5,844.625],[210.75,825.125]]]}},{type:"Feature",id:"NIDEC-VIETNAM",properties:{name:"NIDEC-VIETNAM",gateway:[265.59375,744.4375],data:{ID:75,TenDoanhNghiep:"Cng ty TNHH Nidec Vit Nam Corporation",GoiTat:"NCVH",QuocGia:"Nht Bn",DaiDienPhapLuat:"ng Masahiko Miyano - Tng Gim c",LinhVucHoatDong:"C kh chnh xc v t ng ha",TenDuAnDauTu:"Cng ty TNHH Nidec Vit Nam Corporation",MucTieuQuyMoDuAn:["100.000.000 sn phm/nm, sn phm xut khu 100% n nm 2010"],DiaChiTrongKhu:"L I1-N2",DienThoai:"37360075",Fax:"37360073",Website:"http://www.nidec.com/en-Global/corporate/network/nidec/vietnam/vietnam_p/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[239.5,749.375],[294.75,738.875],[298,739.875],[307.75,763.875],[251.5,775.375],[251.25,765.875],[249,761.125],[245,758.875],[239.5,749.375]]]}},{type:"Feature",id:"I2",properties:{name:"INTEL-PRODUCTS-VN",gateway:[345.0625,716.9375],data:{ID:30,TenDoanhNghiep:"Cng ty TNHH Intel Products Vit Nam",GoiTat:"",QuocGia:"H Lan",DaiDienPhapLuat:"B Sherry Sheno Boger - Tng Gim c",LinhVucHoatDong:"Vi in t-CNTT- vin thng",TenDuAnDauTu:"Cng ty TNHH Intel Products Vit Nam",MucTieuQuyMoDuAn:["- Hon chnh v sn xut cc sn phm chp mang nhn hiu Intel t mng mch (wafer).","- Tip th nhng sn phm ca DN ti th trng VN v nc ngoi.","- Cung cp dch v hu mi v h tr cc sn phm mang nhn hiu Intel (bao gm vic lp cc trung tm in thoi h tr min ph v trung tm bo hnh sn phm cho khch hng).","- Thc hin nghin cu pht trin trong cc lnh vc thng tin k thut cao (bao gm nghin cu CN cho thng mi in t).","- Thc hin hot ng kim tra, kim nghim sn phm; cung cp cc dch v k thut lin quan n hot ng DN nh lp t, bo tr, t vn, o to v cc gii php k thut cho cc sn phm mang nhn hiu Intel."],DiaChiTrongKhu:"L I2",DienThoai:"37366200",Fax:"37360510",Website:"http://www.intel.vn/content/www/vn/vi/homepage.html",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[418.0625,668],[461.0625,699.625],[497.8125,675.5],[530.4375,701.375],[370.0625,807],[302.3125,738.75],[302.9375,736.875],[308.1875,736],[316.8125,733.625],[324.1875,730.625],[330.6875,727.25],[337.0625,723.25],[348.1875,715.25],[361.4375,706],[376.1875,696.5],[418.0625,668]]]}},{type:"Feature",id:"I-1d-2",properties:{name:"I-1d-2 NIDEC-SEIMTTBU",gateway:[289.8125,815.375],data:{ID:74,TenDoanhNghiep:"Cng ty TNHH Nidec Seimitsu Vit Nam",GoiTat:"NSTV",QuocGia:"Nht Bn",DaiDienPhapLuat:"ng Kitazawa Takami",LinhVucHoatDong:"C kh chnh xc v t ng ha",TenDuAnDauTu:"Nidec Seimitsu Vit Nam",MucTieuQuyMoDuAn:["- Pht trin, SX v kinh doanh cc sn phm m t siu nh.","- Quy m:","+ Giai on u (6 thng t khi i vo hot ng): 15 triu sn phm/nm.","+ Giai on n nh (3 nm sau khi i vo hot ng): 40 triu sn phm/thng."],DiaChiTrongKhu:"L I-1d-2, ng N1",DienThoai:"",Fax:"",Website:"http://www.nidec-seimitsu.com/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[301.75,804.125],[280.5,827.125],[305.25,839.125],[323.25,836.375],[341,822.625],[301.75,804.125]]]}},{type:"Feature",id:"I1.3-N1",properties:{name:"I1.3-N1",gateway:[290.1875,809.875],data:{ID:66,TenDoanhNghiep:"Cng ty TNHH Nidec Servo Vit Nam",GoiTat:"NSVT",QuocGia:"Nht Bn",DaiDienPhapLuat:"ng Hiroki Shimomura - Tng Gim c",LinhVucHoatDong:"Vi in t-CNTT- vin thng",TenDuAnDauTu:"Cng ty TNHH Nidec Servo Vit Nam",MucTieuQuyMoDuAn:["- Ch to ng c chnh xc nh v b phn dng cho thit b t ng vn phng, thit b cng nghip, my tr tin t ng (my ATM), my nh kim tra, h thng chiu sng, bm, b phn thm thu nhn to, in liu php trong y hc, thit b gii tr.","- Quy m: 24.000.000 (hai mi bn triu) n v sn phm/ nm (t nm 2012)."],DiaChiTrongKhu:"L I1.3-N1",DienThoai:"37360912",Fax:"37360925",Website:"http://www.nidec-servo.com/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[274.1875,785.125],[306.0625,787.875],[306.9375,784.875],[308.0625,779.875],[308.6875,774.875],[308.4375,769.25],[307.5625,764.75],[251.6875,775.5],[250.5625,781],[249.1875,785.125],[245.9375,789.25],[239.8125,796.5],[237.0625,798.375],[234.0625,799],[280.9375,818.875],[296.4375,802.75],[298.5625,800.125],[300.6875,797.125],[274.1875,785.125]]]}},{type:"Feature",id:"K02",properties:{name:"K02",gateway:[438.78125,669.125],data:{ID:10,TenDoanhNghiep:"Cng ty C phn SX DV Cng ngh Bn dn Ton cu VN",GoiTat:"GES",QuocGia:"M",DaiDienPhapLuat:"ng Ng Seo Ping - Tng Gim c",LinhVucHoatDong:"Dch v CNC",TenDuAnDauTu:"Trung tm k ngh bn dn GES",MucTieuQuyMoDuAn:["- Nghin cu v sn xut cc thit b bn dn, sa cha cc trang thit b ca ngnh cng nghip bn dn. Quy m: 200 n v thit b v cm my mc km theo/nm.","- Thit k lp t bo tr bo hnh h thng s dng nng lng mt tri v nng lng ti to."],DiaChiTrongKhu:"L I3-1, ng D1",DienThoai:"37306032",Fax:"37306242",Website:"http://www.geservs.com/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[417.25,667.875],[426.25,661.875],[428.25,661.375],[440.5,670.375],[431.5,677.875],[417.25,667.875]]]}},{type:"Feature",id:"K03",properties:{name:"K03",gateway:[446.265625,674.46875],data:{ID:26,TenDoanhNghiep:"Cng ty TNHH in t D.G.S",GoiTat:"D.G.S",QuocGia:"Vit Nam",DaiDienPhapLuat:"ng H Minh Trng - Ch tch HQT, Tng Gim c",LinhVucHoatDong:"Vi in t-CNTT- vin thng",TenDuAnDauTu:"u t xy dng Dy chuyn thit k, gia cng, sn xut xut khu b cm bin k thut s v cc loi thit b in t",MucTieuQuyMoDuAn:["- Thit k, gia cng, sn xut xut khu b cm bin k thut s v cc loi thit b in t.","- Quy m: nm sn xut n nh (nm th 3 k t khi hot ng): cng sut 2 triu mun"],DiaChiTrongKhu:"L I3-2, ng N2",DienThoai:"37360721",Fax:"37360722",Website:"http://www.digisensor-ltd.com/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[431.640625,677.84375],[440.515625,670.46875],[452.390625,679.34375],[443.203125,686.28125],[431.640625,677.84375]]]}},{type:"Feature",id:"K04.1",properties:{name:"K04.1",gateway:[456.265625,681.875],data:{ID:2,TenDoanhNghiep:"Cng ty C phn Thng Minh MK",GoiTat:"",QuocGia:"Vit Nam",DaiDienPhapLuat:"ng Nguyn Hi H - Tng Gim c",LinhVucHoatDong:"Vi in t-CNTT- vin thng",TenDuAnDauTu:"Trung tm c th ha, nghin cu v pht trin th thng minh MK Smart",MucTieuQuyMoDuAn:["- Tham gia hnh thnh cm th thng minh.","- M rng sn xut v dch v c th ha th thng minh theo chun quc gia v quc t.","- Pht trin kinh doanh th v gii php th khu vc min Nam Vit Nam v cc nc ln cn.","- Cung cp dch v gia cng cc quy trnh cng ngh.","- Tng cng nghin cu & pht trin CN, pht trin phn mm v ng dng th thng minh h tr tt nht cho sn xut, phc v nhu cu th ni a v quc t."],DiaChiTrongKhu:"L I3-3, ng N2",DienThoai:"39320627",Fax:"39321287",Website:"http://mksmart.com.vn/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[450,691.375],[443.75,686.375],[452.5,679.375],[459.75,684.125],[450,691.375]]]}},{type:"Feature",id:"K04.2",properties:{name:"K04.2",gateway:[456.265625,681.875],data:{ID:12,TenDoanhNghiep:"Chi nhnh Cng ty C phn Tp on MK",GoiTat:"MK Branch JSC",QuocGia:"Vit Nam",DaiDienPhapLuat:" Hi ng - Gim c",LinhVucHoatDong:"Vi in t-CNTT- vin thng",TenDuAnDauTu:"Trung tm nghin cu, pht trin, sn xut v c th ha th thng minh MK",MucTieuQuyMoDuAn:["- Sn xut th thng minh v cc loi th (th nha, th t, th chp, th d liu...).","- Nghin cu v pht trin th thng minh.","- Cung cp dch v cng ngh cao nh: sn xut phn mm; t vn v chuyn giao cng ngh; cung cp cc dch v lin quan n."],DiaChiTrongKhu:"L I3-3, ng N2",DienThoai:"37361445",Fax:"",Website:"http://www.mk.com.vn",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[450,691.375],[443.75,686.375],[452.5,679.375],[459.75,684.125],[450,691.375]]]}},{type:"Feature",id:"K05",properties:{name:"K05",gateway:[465.328125,680.609375],data:{ID:13,TenDoanhNghiep:"Cng ty C phn Vi mch in t Vit Vmicro",GoiTat:"Vmicro",QuocGia:"Vit Nam",DaiDienPhapLuat:"B Trn Th Lm - Ch tch HQT",LinhVucHoatDong:"Vi in t-CNTT- vin thng",TenDuAnDauTu:"Nh my SX vi mch in t v pin nng lng mt tri Vit Vmicro",MucTieuQuyMoDuAn:["Sn xut v nghin cu thit k cc loi linh kin thit b bn dn sn xut cc loi sn phm thit b nng lng mt tri"],DiaChiTrongKhu:"L I3-4, ng s N2",DienThoai:"38221745",Fax:"",Website:"",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[450.25,691.625],[460.75,699.875],[478,688.375],[466.75,680.125],[450.25,691.625]]]}},{type:"Feature",id:"K06",properties:{name:"K06",gateway:[495.203125,675.40625],data:{ID:69,TenDoanhNghiep:"Cty TNHH MTV QSIC Vit Nam",GoiTat:"QSIC Vietnam Co., Ltd",QuocGia:"M",DaiDienPhapLuat:"ng Kiem Le Tinh - Tng Gim c",LinhVucHoatDong:"Vi in t-CNTT- vin thng",TenDuAnDauTu:"Cty TNHH MTV QSIC Vit Nam",MucTieuQuyMoDuAn:["- Thit k, sn xut v lp rp cc linh kin ph tng cho cc th modem ca thit b khng dy, truyn hnh c  phn gii cao (HDTV); sn phm dng trong h thng nh v ton cu; sn phm dng cho my in; cc thit b t ng dng cho vn phng; sn phm ha sinh (thit b y sinh); sn phm phc v h thng mng v mng khng dy; sn phm in t tiu dng v in t phc v chuyn ngnh.","- Cung cp cc dch v cho cc sn phm do cng ty sn xut."],DiaChiTrongKhu:"L I3-6, ng N2",DienThoai:"37361035",Fax:"",Website:"http://www.qsic.com/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[497.75,675.875],[478,688.125],[467,680.125],[481.25,670.125],[485.75,672.625],[491.25,674.875],[497.75,675.875]]]}},{type:"Feature",id:"I-3b-5",properties:{name:"I-3b-5",gateway:[520.359375,688],data:{ID:55,TenDoanhNghiep:"Vin Vt liu xy dng - B Xy dng",GoiTat:"",QuocGia:"Vit Nam",DaiDienPhapLuat:"ng Lng c Long - Vin trng",LinhVucHoatDong:"Nng lng, vt liu mi",TenDuAnDauTu:"Trung tm Nghin cu vt liu mi thuc Vin Vt liu xy dng ti Min Nam",MucTieuQuyMoDuAn:["Xy dng trung tm nghin cu vt liu mi nhm nng cao nng lc nghin cu pht trin cc loi vt liu mi ca Vin Vt liu xy dng ti Min Nam theo chc nng v nhim v c giao, p ng nhu cu pht trin vt liu mi, tin tin cho khu vc TP.HCM v cc tnh pha Nam"],DiaChiTrongKhu:"L I-3b-5, ng N6",DienThoai:"",Fax:"",Website:"http://www.vibm.vn/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[529.1875,673.125],[536.9375,676.25],[542.4375,681.375],[526.3125,692.5],[513.9375,683],[529.1875,673.125]]]}},{type:"Feature",id:"I-3b-4",properties:{name:"I-3b-4",gateway:[511.2890625,681.0703125],data:{ID:25,TenDoanhNghiep:"Cng ty TNHH u t v pht trin Cng ngh thng minh",GoiTat:"u t v Pht trin Cng ngh thng minh (STID)",QuocGia:"Vit Nam",DaiDienPhapLuat:"ng L Vn Ging - Gim c",LinhVucHoatDong:"Vi in t-CNTT- vin thng",TenDuAnDauTu:"Sn xut th thng minh",MucTieuQuyMoDuAn:["- u t dy chuyn sn xut th thng minh.","- Quy m: 200 triu th co/nm; 3 triu th sim/nm (nm sn xut n nh: nm th 3)."],DiaChiTrongKhu:"L I-3b-4 (tn c l l K2-b)",DienThoai:"",Fax:"38309056",Website:"http://www.vtctelecom.com.vn/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[509.4375,677.875],[523.4375,668.875],[529.0625,673],[513.9375,682.75],[509.3125,679.625],[509.4375,677.875]]]}},{type:"Feature",id:"I-3b-3",properties:{name:"I-3b-3",gateway:[547.59375,653.4375],data:{ID:61,TenDoanhNghiep:"Trung tm Thit k Ch to Thit b mi",GoiTat:"Neptech",QuocGia:"Vit Nam",DaiDienPhapLuat:"ng V Cng Hai - Gim c",LinhVucHoatDong:"C kh chnh xc v t ng ha",TenDuAnDauTu:"u t xy dng & trang thit b cho Trung tm Thit k Ch to Thit b mi",MucTieuQuyMoDuAn:["- Nghin cu k thut  thit k ch to cc thit b c tnh nng tng ng thit b ngoi nhp vi chi ph thp.","- Phi hp cc Vin, cc Trung tm nghin cu chuyn ngnh, cc c s gia cng ti TP  thit k, ch to sn phm, thit b c nhu cu cao trn th trng v sn xut th nghim mt s sn phm, thit b t kt qu cc  ti nghin cu trin khai v t cc ngun sng to khc.","- Chuyn giao thit k v CN ch to sn phm, thit b mi cho cc n v trong nc SX vi quy m ln  cung cp cho nhu cu th trng trong & ngoi nc."],DiaChiTrongKhu:"L I-3b-3, ng N6",DienThoai:"37367127",Fax:"37367260",Website:"http://www.neptech.com.vn/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[538.8125,653.25],[536.1875,651],[535.8125,648.625],[535.4375,646.625],[536.0625,645.25],[558.3125,648.875],[552.8125,655.125],[550.1875,654.625],[547.6875,653.125],[543.5625,652.625],[538.8125,653.25]]]}},{type:"Feature",id:"I-3b-1.2",properties:{name:"I-3b",gateway:[533.8203125,660.984375],data:{ID:45,TenDoanhNghiep:"Cng ty TNHH TLD Hi-Tech",GoiTat:"Phc Thnh TLD",QuocGia:"Vit Nam",DaiDienPhapLuat:"B Phm Th Thanh Hng",LinhVucHoatDong:"Dch v thng mi",TenDuAnDauTu:"Nh xng xy dng sn",MucTieuQuyMoDuAn:[],DiaChiTrongKhu:"L I-3b-1 (nh xng 1), ng N6",DienThoai:"",Fax:"",Website:"",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[537.53125,665.9375],[542.15625,662.5625],[535.90625,659.8125],[532.15625,662.625],[537.53125,665.9375]]]}},{type:"Feature",id:"I-3b-1.1",properties:{name:"I-3b",gateway:[529.796875,664.09375],data:{ID:32,TenDoanhNghiep:"Cng ty TNHH K thut Daikou Vit Nam",GoiTat:"Daikou Tech",QuocGia:"Nht Bn",DaiDienPhapLuat:"ng Yoshio Matsumura - Tng Gim c",LinhVucHoatDong:"C kh chnh xc v t ng ha",TenDuAnDauTu:"Trung tm Nghin cu Thit k Ch to Lp rp C kh chnh xc v T ng ha",MucTieuQuyMoDuAn:["a) Mc tiu:","- Thnh lp Trung tm NC v TK ti KCNC nhm ng dng kt qu hot ng R&D vo sn xut cc h thng my t ng nh my qun dy t ng, my ng gi t ng, cc loi robot dng trong dy chuyn lp rp  t v thit b in t v robot gia dng; pht trin i ng k s thit k.","- Phi hp vi TT o to KCNC o to ngun nhn lc CNC ti VN, o to v k nng thit k my theo tiu chun Nht Bn, k thut lp trnh v vn hnh cc loi robot, ...","b) Quy m:"," NC TK v SX trn di 18 chng loi my mc khc nhau/nm."],DiaChiTrongKhu:"L I-3b-1.1, ng N6",DienThoai:"38973656",Fax:"38973656",Website:"http://www.daiko-vn.com/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[523.59375,668.75],[529.21875,672.75],[537.46875,665.9375],[531.96875,662.5625],[523.59375,668.75]]]}},{type:"Feature",id:"K08.2",properties:{name:"K08.2",gateway:[451.671875,673.53125],data:{ID:60,TenDoanhNghiep:"Trung tm Nghin cu v Trin khai Khu Cng ngh cao",GoiTat:"",QuocGia:"Vit - Nht",DaiDienPhapLuat:"",LinhVucHoatDong:"Nghin cu, trin khai, o to",TenDuAnDauTu:"D n Hp tc nghin cu khoa hc gia Trung tm Nghin cu v Trin khai Khu Cng ngh cao v Trng sau i hc khoa hc tng hp v con ngi, i hc Tsukuba (Nht Bn)",MucTieuQuyMoDuAn:["Trin khai cc hot ng nghin cu v cng ngh sinh hc"],DiaChiTrongKhu:"L I3 ng N2 - Trung tm R&D",DienThoai:"37360889",Fax:"37360890",Website:"",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[448.421875,670.71875],[455.453125,676.21875],[457.046875,676.25],[466.921875,669.46875],[458.609375,663.59375],[448.421875,670.71875]]]}},{type:"Feature",id:"K08.3",properties:{name:"K08.3",gateway:[451.671875,673.53125],data:{ID:65,TenDoanhNghiep:"Cng ty TNHH NC&TK Quang Lng T Vit M",GoiTat:"UVP R&D Co., Ltd",QuocGia:"Vit - M",DaiDienPhapLuat:"B Nguyn Th Kim Trm - Gim c",LinhVucHoatDong:"Vi in t-CNTT- vin thng",TenDuAnDauTu:"Nh my sn xut v ng dng cng ngh LED",MucTieuQuyMoDuAn:["- Giai on I (2012-2014): SX th ti KCNC vi quy m l 200.000 sn phm mu.","- Giai on II (2014 tr i): Xy dng nh my SX & ng dng CN LED trn quy m SX l 5 triu sn phm/thng."],DiaChiTrongKhu:"L I3 ng N2 - Trung tm R&D",DienThoai:"37361942",Fax:"37360714",Website:"http://uvt-diodes.com",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[448.421875,670.71875],[455.453125,676.21875],[457.046875,676.25],[466.921875,669.46875],[458.609375,663.59375],[448.421875,670.71875]]]}},{type:"Feature",id:"K09",properties:{name:"K09",gateway:[473.0625,665.4375],data:{ID:47,TenDoanhNghiep:"Cng ty TNHH MTV Seen Min Nam",GoiTat:"SEEN Southern, Ltd",QuocGia:"Vit Nam",DaiDienPhapLuat:"ng Trn Quch B Vinh - Gim c",LinhVucHoatDong:"Dch v CNC",TenDuAnDauTu:"Trung tm Nghin cu, Pht trin Cng ngh Mi trng v T ng ha",MucTieuQuyMoDuAn:["- Xy dng Trung tm Nghin cu Pht trin.","- Xy dng cc PTN k thut cn thit cho cng tc NCKH ng dng ca 2 ngnh CN x l nc thi, rc thi v CN t ng ha qu trnh cng nghip.","- Xy dng nh my SX thit b thc nghim t kt qu nghin cu ca cng ty vi cng sut d kin t 10.000 sn phm/nm.","- m bo nng lc x l  nhim mi trng i vi cc loi nc thi (cng nghip, nc thi bi rc, nc thi sinh hot ...) vi cng sut 50.000 m3/nm."],DiaChiTrongKhu:"L I3-8b, ng N2",DienThoai:"37306282",Fax:"37306243",Website:"http://seen.com.vn",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[472.28125,654.4375],[459.15625,663.5],[467.09375,669.4375],[476.53125,663],[475.59375,662.0625],[474.65625,661.25],[473.78125,660.25],[473.28125,658.875],[472.53125,657.3125],[472.28125,654.4375]]]}},{type:"Feature",id:"VIETCO",properties:{name:"VIETCO",gateway:[495.109375,614.46875],data:{ID:22,TenDoanhNghiep:"Cng ty TNHH Cng ngh sinh hc Dc Na No Gen",GoiTat:"Nanogen",QuocGia:"Vit Nam",DaiDienPhapLuat:"ng H Nhn - Ch tch - Tng Gim c",LinhVucHoatDong:"Cng ngh sinh hc",TenDuAnDauTu:"-  D n san xut dc phm Nanogen -  Trung tm Nghin cu, sn xut th nghim v chuyn giao cng ngh dc phm cng ngh sinh hc giai on 2",MucTieuQuyMoDuAn:["a) Mc tiu ca d n:","- San xut nguyn liu va san xut thuc t dc liu (nh thuc tri ung th, thuc khang sinh, khang virut  th h mi va cac loai thuc...) bng cng ngh sinh hoc, cng ngh gene.","- Trung tm nghin cu, sn xut th nghim v chuyn giao cng ngh dc phm cng ngh sinh hc giai on 2.","b) Quy m ca d n: 24.000.000 (Hai mi bn triu sn phm/ nm)"],DiaChiTrongKhu:"L I-5c",DienThoai:"37309940",Fax:"",Website:"http://www.nanogenpharma.com",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[474.875,628.9375],[500.125,633.6875],[507.375,621.3125],[512.875,608.0625],[506.625,606.6875],[474.875,628.9375]]]}},{type:"Feature",id:"CTBIO",properties:{name:"HUDEN",gateway:[510.1875,621.5625],data:{ID:5,TenDoanhNghiep:"Cng ty C phn CTCBIO Vit Nam",GoiTat:"CTCBIO",QuocGia:"Vit - Hn",DaiDienPhapLuat:"Jung In Seo - Ch tch HTV",LinhVucHoatDong:"Cng ngh sinh hc",TenDuAnDauTu:"Nh my CTCBIO ti TPHCM",MucTieuQuyMoDuAn:["Sn xut cht b sung thc n gia sc"],DiaChiTrongKhu:"L I5-3a, I5-3b",DienThoai:"37361333",Fax:"",Website:"http://ctcbio.com.vn/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[500.375,633.6875],[506.625,621.4375],[508.875,621.4375],[518.125,623.4375],[512,635.0625],[509.75,634.9375],[500.375,633.6875]]]}},{type:"Feature",id:"PLAM KHOA.1",properties:{name:"PLAM KHOA",gateway:[518.015625,605.296875],data:{ID:11,TenDoanhNghiep:"Chi nhnh CNSH Cng ty TNHH DV&TM Nam Khoa",GoiTat:"DV&TM Nam Khoa",QuocGia:"Vit Nam",DaiDienPhapLuat:"B Trng Th Diu Hng - Gim c",LinhVucHoatDong:"Cng ngh sinh hc",TenDuAnDauTu:"Chi nhnh cng ngh sinh hc Cng tyTNHH DV&TM Nam khoa",MucTieuQuyMoDuAn:["- Mc tiu: Sn xut cc cht tr sinh v cc cht chn on bng k thut sinh hc phn t.","- Quy m: 5.000.000 (nm triu) sn phm/nm."],DiaChiTrongKhu:"L I5-2",DienThoai:"37715818",Fax:"37752250",Website:"",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[517.34375,607.5625],[527.28125,610.4375],[529.78125,606],[519.09375,603.125],[517.34375,607.5625]]]}},{type:"Feature",id:"PLAM KHOA.2",properties:{name:"PLAM KHOA",gateway:[515.296875,612.03125],data:{ID:19,TenDoanhNghiep:"Cng ty TNHH CNSH Bioland Nam Khoa",GoiTat:"Bioland Nam Khoa",QuocGia:"Hn Quc",DaiDienPhapLuat:"B Trng Th Diu Hng - Gim c",LinhVucHoatDong:"Cng ngh sinh hc",TenDuAnDauTu:"Cng ty TNHH Cng Ngh Sinh Hc Bioland - Nam Khoa",MucTieuQuyMoDuAn:["Sn xut cc cht chn on bng k thut sinh hc phn t v cng ngh nano"],DiaChiTrongKhu:"L I5-2a",DienThoai:"37715818",Fax:"37750583",Website:"http://www.nk-biotek.com.vn",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[527.09375,610.5625],[522.09375,620.5],[514.96875,618.9375],[513.21875,617.375],[517.09375,607.75],[527.09375,610.5625]]]}},{type:"Feature",id:"K13",properties:{name:"K13",gateway:[520.734375,598.5],data:{ID:72,TenDoanhNghiep:"Cng ty TNHH Th gii GEN",GoiTat:"Genworld Co., Ltd",QuocGia:"Vit Nam",DaiDienPhapLuat:"ng Nguyn Vn L - Ch tch HTV",LinhVucHoatDong:"Cng ngh sinh hc",TenDuAnDauTu:"Cng ty TNHH Th gii GEN",MucTieuQuyMoDuAn:["- Thnh lp trung tm cng ngh sinh hc tin tin, t bo v t bo gc ti Khu Cng ngh cao.","- Sn xut cc b kit, mi trng phc v cho phn lp, nui cy, tng sinh v bit ha t bo gc ng dng trong chn on, iu tr v thay th m v c quan.","- Sn xut t bo gc phc v cho cy ghp t thn v ng ghp.","- Sn xut cc ch phm sinh hc t cng ngh t bo gc phc v cho tng cng sc khe (dng thc phm chc nng) hay lm p (m phm).","- Sn xut kit, ha cht bng cng ngh gen phc v cho chn on, gim nh v iu tr."],DiaChiTrongKhu:"L I5-1, ng N7",DienThoai:"37361979",Fax:"37361977",Website:"http://geneworld.vn/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[529.875,605.8125],[522.875,604.3125],[519.25,602.9375],[522.25,596.0625],[530.5,589.9375],[535,595.5625],[535.875,598.0625],[529.875,605.8125]]]}},{type:"Feature",id:"I4",properties:{name:"I4 - ALLIED",gateway:[574.3125,647.25],data:{ID:71,TenDoanhNghiep:"Cng ty TNHH Si Gn Allied Tecnologies",GoiTat:"ATSC",QuocGia:"Singapore",DaiDienPhapLuat:"ng Hsu Ching Yuh - Ch tch HTV",LinhVucHoatDong:"C kh chnh xc v t ng ha",TenDuAnDauTu:"Cng ty TNHH Si Gn Allied Tecnologies",MucTieuQuyMoDuAn:["- Thit k, ch to cng c bo, gt v bn ren k thut cao. SX cc b phn dp hnh ni chnh xc cao. Lp rp cc b phn linh kin kim loi cho my in, my vi tnh, my mng, thit b vin thng, u c KT s, tt c cc thit b c kh, in, in t gia dng.","- SX linh kin, chi tit bng nha chnh xc cao. SX chi tit b phn nha mu bng khun c k thut cao. Thit k & SX khun c chnh xc. Lp rp nhng b phn c kh chnh xc cao ca my in, my vi tnh, my mng, thit b vin thng, u my DVD, tt c cc thit b c kh, in, in t gia dng, thit b y t, trang thit b vn phng.","- SX & lp rp nhng dng sn phm v my vi tnh & nhng sn phm v lnh vc in n v hnh nh, thit b o c, h thng mng & vin thng, my tnh, thit b lu tr d liu xch tay & dng c y t..."],DiaChiTrongKhu:"L I4, F03 & F04",DienThoai:"37335663",Fax:"37335668",Website:"http://niengiamtrangvang.com/ad.asp?URL=http://www.allied-tech.com.sg",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[533,639.875],[597.25,651.375],[612.75,609.375],[612,604.625],[609.75,601.875],[578.25,595.875],[553.25,601.875],[547.75,607.625],[542,614.125],[535.75,630.125],[533,639.875]]]}},{type:"Feature",id:"tld",properties:{name:"tld",gateway:[302.15625,729.3125],data:{ID:44,TenDoanhNghiep:"Cng ty TNHH Thng mi u t TLD",GoiTat:"",QuocGia:"Vit Nam",DaiDienPhapLuat:"ng Phan Anh Hng - Gim c",LinhVucHoatDong:"Dch v thng mi",TenDuAnDauTu:"",MucTieuQuyMoDuAn:["a) Mc tiu d n:","Xy dng khu Nh tr, Siu th tin li v Nh hng nhm to mi trng dch v a dng, phong ph v c tnh thch ng cao, t , gia tng nng lc cung cp dch v  p ng nhu cu ngy cng cao ca mi c nhn, t chc hot ng trong Khu cng ngh cao Thnh ph H Ch Minh","b) Quy m d n:","S dng din tch t d kin l 8.086,84 m2, p ng nhu cu phc v d kin trn 300 tr v 1.000 lt khch hng n Siu th v Nh hng mi ngy"],DiaChiTrongKhu:"L T2-1.1b, ng D1",DienThoai:"",Fax:"",Website:"",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[282.6875,726.625],[284.9375,732.5],[290.4375,731.625],[295.3125,730.625],[299.8125,730],[302.3125,729.25],[305.3125,728.875],[308.0625,727.875],[311.5625,726.875],[315.6875,725.25],[318.0625,724.125],[320.3125,723.125],[308.6875,711.125],[282.6875,726.625]]]}},{type:"Feature",id:"hdbank",properties:{name:"hd",gateway:[329.28125,717.9375],data:{ID:46,TenDoanhNghiep:"Ngn hng TMCP Pht trin Thnh ph H Ch Minh",GoiTat:"HD Bank",QuocGia:"Vit Nam",DaiDienPhapLuat:"ng Nguyn Hu ng",LinhVucHoatDong:"Dch v thng mi",TenDuAnDauTu:"Xy dng h tng cng ngh v cung cp dch v ti chnh ti Khu Cng ngh cao Thnh ph H Ch Minh",MucTieuQuyMoDuAn:["Cung cp dch v ti chnh h tr doanh nghip ti Khu Cng ngh cao v cung cp sn phm ti chnh thng qua Qu h tr pht trin cng ngh cao."],DiaChiTrongKhu:"L T2-1.5, ng D1",DienThoai:"",Fax:"",Website:"https://www.hdbank.com.vn/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[320.1875,723],[324.0625,721.125],[327.0625,719.5],[330.3125,717.375],[333.1875,715.125],[335.5625,713.625],[337.9375,712.125],[340.4375,710.625],[343.6875,708.25],[346.1875,706.625],[348.4375,704.75],[335.6875,694.625],[308.8125,711.125],[320.1875,723]]]}},{type:"Feature",id:"C1-2",properties:{name:"C1-2 KHU-PHUC-HOP",gateway:[191.1875,758.625],data:{ID:16,TenDoanhNghiep:"Cng ty TNHH Ascendas Saigon Bund",GoiTat:"ASCENDAS SAIGON",QuocGia:"Singapore - Vng quc Anh",DaiDienPhapLuat:"ng Han Ann Foong - Tng Gim c",LinhVucHoatDong:"Dch v thng mi",TenDuAnDauTu:"Khu phc hp Onehub Saigon",MucTieuQuyMoDuAn:["- Pht trin d n khu phc hp bao gm cc ta nh trong khu phc hp, cc c s bn l, ta nh WOHO (Work Office Home Office) v c s gio dc.","- iu hnh v qun l khu phc hp bao gm (nhng khng gii hn) cc hot ng sau:","+ cho thu hoc bn mt bng trong cc ta nh;","+ cho thu hoc bn cc cng trnh hoc cc n v ring l ca cc cng trnh trong khu phc hp;","+ duy tr cht lng ca cc cu trc xy dng v cc khu vc cng cng trong phm vi khu phc hp;","+ duy tr an ninh trong khu phc hp;","+ thit lp v thu tin thu mt bng, cc khon ph dch v hp vi cc qui nh hin hnh ca Vit Nam.","-  Cung cp cc dch v lin quan trong khu phc hp bao gm (nhng khng gii hn) cc hot ng sau:","+ dch v qun l bi gi xe;","+ dch v bi gi xe;","+ dch v dch v v sinh;","+ dch v v cc tin ch nh in v nc, vv.vv."],DiaChiTrongKhu:"L C1-2, ng D1",DienThoai:"",Fax:"",Website:"",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[200.5,821.625],[222.25,795.625],[232,789.375],[238.25,780.875],[238.25,774.125],[237.5,768.625],[224,769.875],[217.5,753.375],[178.75,760.875],[168.5,765.125],[147.25,787.875],[150.25,794.125],[154.75,796.125],[157.25,803.875],[200.5,821.625]]]}},{type:"Feature",id:"CMC",properties:{name:"CMC",gateway:[222.40625,752.5625],data:{ID:1,TenDoanhNghiep:"Cng ty C phn Tp on Cng ngh CMC",GoiTat:"CMC",QuocGia:"Vit Nam",DaiDienPhapLuat:"ng Nguyn Trung Chnh - Tng Gim c",LinhVucHoatDong:"Vi in t-CNTT- vin thng",TenDuAnDauTu:"Xy dng mng H tng Vin thng  Internet Khu Cng ngh cao TPHCM - Giai on 1",MucTieuQuyMoDuAn:["- u t xy dng hon chnh h thng mng h tng vin thng - Internet tin tin, t cc chun cao nht ca quc t theo thit k c s  c ph duyt ca BQLKCNC, nhm cung cp cc dch v vin thng - Internet t c bn n nng cao cho cc khch hng l cc nh u t, doanh nghip, c nhn hot ng trong ni b KCNC.","- u t xy dng c s d liu (Data Center) nhm cung cp dch v Datacenter cho cc khch hng trong KCNC."],DiaChiTrongKhu:"L C1-1, ng D1",DienThoai:"22264777",Fax:"",Website:"http://www.cmc.com.vn/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[236.6875,767.53125],[223.75,769.84375],[218.0625,753.40625],[227.1875,751.46875],[230.3125,752.46875],[236.6875,767.53125]]]}},{type:"Feature",id:"T2-1-2",properties:{name:"K15",gateway:[562.828125,660.75],data:{ID:20,TenDoanhNghiep:"Cng ty TNHH cng ngh Fawookidi",GoiTat:"Fawookidi",QuocGia:"Vit - Hn",DaiDienPhapLuat:"B L Thu Trang - Tng Gim c",LinhVucHoatDong:"Vi in t-CNTT- vin thng",TenDuAnDauTu:"Trung tm nghin cu v ch to cng ngh LED Fawookidi",MucTieuQuyMoDuAn:["ng dng cng ngh tin tin ca Hn Quc  nghin cu, sn xut v kinh doanh n LED hiu sut cao, thn thin vi mi trng. Sn phm c ng dng trong chiu sng h gia nh v khi vn phng, khu mua sm, siu th; n ng v n bo an trong chiu sng cng cng, n pha cho cc nh my x nghip, n dn d c phc v ngnh ng nghip, n chng chy n, n ng hm, v.vthay th hng nhp khu, gim gi thnh sn phm"],DiaChiTrongKhu:"L I-3B-4-A, ng N6, Khu Cng Ngh Cao",DienThoai:"37252269",Fax:"37360666",Website:"http://www.fawookidi.com.vn",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[552.546875,655.3125],[566.796875,662.625],[576.390625,651.9375],[558.453125,648.84375],[552.546875,655.3125]]]}},{type:"Feature",id:"PLAMSOON.1",properties:{name:"PLAMSOON.1",gateway:[406.46875,665],data:{ID:3,TenDoanhNghiep:"Cng ty C phn Bn dn Vit Nam",GoiTat:"VSMC",QuocGia:"M",DaiDienPhapLuat:"ng Vo Hai Huu - Tng Gim c",LinhVucHoatDong:"Vi in t-CNTT- vin thng",TenDuAnDauTu:"Cng ty CP Bn dn Vit Nam (VSMC)",MucTieuQuyMoDuAn:['VSMC l mt cng ty "khng nh my", chuyn thit k v sn xut cc sn phm "Qun l Nng lng bng gii php Digital", cc sn phm b nh p dng cho cc sn phm c th khc, cng vi cc sn phm v s hu tr tu, cc sn phm IC Analog, IC tn hiu tng hp cho cc th trng dn dng v vin thng.'],DiaChiTrongKhu:"L T2-4, ng D1",DienThoai:"54001915",Fax:"54001915",Website:"http://www.vsmc.com.vn/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[413.375,660.1875],[401.125,668.8125],[390.75,661.1875],[403.875,653.0625],[413.375,660.1875]]]}},{type:"Feature",id:"PLAMSOON.2",properties:{name:"PLAMSOON.2",gateway:[406.46875,665],data:{ID:7,TenDoanhNghiep:"Cng ty c phn h thng cng ngh nh Lam",GoiTat:"Indigo JSC",QuocGia:"Vit - Malaysia",DaiDienPhapLuat:"ng Phm Ph Khnh - Gim c",LinhVucHoatDong:"Vi in t-CNTT- vin thng",TenDuAnDauTu:"Cng ty CP H thng cng ngh nh Lam",MucTieuQuyMoDuAn:["- Lp trnh my vi tnh, dch v t vn v cc hot ng khc lin quan n my vi tnh","- Dch v xy dng c s d liu, khai thc c s d liu phc v nghin cu v pht trin CNC","- Nghin cu pht trin - t vn la chn trn khai tch hp - pht trin"],DiaChiTrongKhu:"L T2-4 (Tng 3)",DienThoai:"38389868",Fax:"",Website:"http://www.indigo-jsc.com/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[413.375,660.1875],[401.125,668.8125],[390.75,661.1875],[403.875,653.0625],[413.375,660.1875]]]}},{type:"Feature",id:"PLAMSOON.3",properties:{name:"PLAMSOON.3",gateway:[406.46875,665],data:{ID:17,TenDoanhNghiep:"Cng ty TNHH Chp sng v Ashmanov",GoiTat:"Chp sng & Ashmanov",QuocGia:"Vit - Nga",DaiDienPhapLuat:"ng Lm Chi Thng - Tng Gim c",LinhVucHoatDong:"Dch v CNC",TenDuAnDauTu:"Thnh lp Lin doanh Chp Sng - Ashmanov",MucTieuQuyMoDuAn:["- Xy dng nn tng cng ngh phn tch ng ngha v trin khai cc ng dng internet thng qua nghin cu v pht trin cc cng ngh tr tu nhn to, x l ngn ng t nhin; thit k v pht trin phn mm, cung cp cc sn phm, dch v v ng dng cng ngh thng tin v vin thng (b lc web, h thng tng hp v phn tch thng tin, dch v tip th theo ng cnh, dch v  ti u ho tm kim, ngi i thoi o,...)","- Trin khai kinh doanh cc sn phm, gii php cng ngh thng tin v vin thng trn phm v th trng ng Nam  vi i tng khch hng ban u l cc c quan chnh ph, cc doanh nghip vin thng, doanh nghip ti chnh, bn l."],DiaChiTrongKhu:"Lu 6, ta nh BCIS, l T2-4, ng D1, KCNC",DienThoai:"39339955",Fax:"39333486",Website:"http://www.csa.vn/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[413.375,660.1875],[401.125,668.8125],[390.75,661.1875],[403.875,653.0625],[413.375,660.1875]]]}},{type:"Feature",id:"PLAMSOON.4",properties:{name:"PLAMSOON.4",gateway:[406.46875,665],data:{ID:36,TenDoanhNghiep:"Cng ty TNHH MTV Dch v Quy trnh Phn mm FPT",GoiTat:"FPS",QuocGia:"Vit Nam",DaiDienPhapLuat:"ng Hong Nam Tin - Ch tch",LinhVucHoatDong:"Dch v CNC",TenDuAnDauTu:"Cng ty TNHH MTV Dch v Quy trnh Phn mm FPT",MucTieuQuyMoDuAn:["- NC, pht trin, sx v kinh doanh cc sn phm phn mm ng dng trong CNTT nh sau:",'+ Nn tng dch v quy trnh cho khch hng di dng "Phn mm nh 1 dch v" (Software as a Service) trn nn tng in ton m my v o ha, da trn TT d liu c xy dng bi FPS.',"+ Phn mm m bo an ninh, an ton mng v b mt thng tin  mc cao, tch hp x l, phn tch d liu v h tr trong vic a ra quyt nh.","+ Phn mm nhn dng, x l nh v ting ni.","- Khch hng mc tiu: cung cp cho cc cng ty i tc hot ng a lnh vc (CNTT, bo him, du kh, thng mi, ...) trn TG, c bit l N."],DiaChiTrongKhu:"Tng 5, ta nh Sacom Chp sng, L T2-4, ng D1",DienThoai:"",Fax:"",Website:"",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[413.375,660.1875],[401.125,668.8125],[390.75,661.1875],[403.875,653.0625],[413.375,660.1875]]]}},{type:"Feature",id:"PLAMSOON.5",properties:{name:"PLAMSOON.5",gateway:[406.46875,665],data:{ID:40,TenDoanhNghiep:"Cng ty TNHH MTV Micro Precision Calibration Vit Nam",GoiTat:"MPC Vietnam Ltd., Co.",QuocGia:"Thi Lan",DaiDienPhapLuat:"ng Jarrod Owen Trammell - Gim c",LinhVucHoatDong:"Nghin cu & Trin khai",TenDuAnDauTu:"Micro Precision Calibration Vit Nam",MucTieuQuyMoDuAn:["a) Mc tiu:","Thit lp phng th nghim (phng lab) thc hin dch v hiu chun v kim tra thit b, dch v sa cha thit b.","b) Quy m:","- Giai on u (mt nm sau khi i vo hot ng): kim tra c 3.500 (ba ngn nm trm) thit b/ nm, t gi tr doanh thu 350.000 (ba trm nm mi ngn) la M/ nm.","- Giai on n nh (t ba n nm nm sau khi i vo hot ng): kim tra c 5.000 (nm ngn) thit b/ nm."],DiaChiTrongKhu:"Phng 201, Tng 2, Ta nh Sacom Chip sng, L T2-4, ng D1",DienThoai:"54482008",Fax:"54482009",Website:"",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[413.375,660.1875],[401.125,668.8125],[390.75,661.1875],[403.875,653.0625],[413.375,660.1875]]]}},{type:"Feature",id:"PLAMSOON.6",properties:{name:"PLAMSOON.6",gateway:[406.46875,665],data:{ID:41,TenDoanhNghiep:"Cng ty TNHH MTV Microchip Technology (Vit Nam)",GoiTat:"MTVN",QuocGia:"Ireland",DaiDienPhapLuat:"ng James Eric Bjornholt - Ch tch",LinhVucHoatDong:"Nghin cu, trin khai, o to",TenDuAnDauTu:"Trung Tm Nghin Cu V Thit K Vi Mch Bn Dn  Microchip Technology (Vit Nam)",MucTieuQuyMoDuAn:["a) Mc tiu:","Thnh lp trung tm k thut ti Vit Nam trong giai on u  o to i ng k s c trnh  cao c kh nng thc hin vic nghin cu, thit k bn dn da trn nhng thng s thit k nh sn ca Microchip. Hng n thit lp nh my sn xut cc thit b bn dn trong giai on tip theo.","b) Quy m:","- Giai on u (t nm 2013 n nm 2017): cc k s thit k mch tch hp bn dn v b tr vi mch ca Microchip s thc hin thit k, kim tra v sa cha cc mch thit k da trn cng ngh SuperFlash c sn.","- Giai on n nh (t nm 2014 tr i): song song nghin cu thit k mch tch hp bn dn, Microchip s o to thm nhiu k s trong cc lnh vc khc  phc v cho nhiu lnh vc hot ng khc nhau ca Microchip."],DiaChiTrongKhu:"Lu 2, L T2-4, ng D1",DienThoai:"",Fax:"",Website:"",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[413.375,660.1875],[401.125,668.8125],[390.75,661.1875],[403.875,653.0625],[413.375,660.1875]]]}},{type:"Feature",id:"PLAMSOON.7",properties:{name:"PLAMSOON.7",gateway:[406.46875,665],data:{ID:43,TenDoanhNghiep:"Cng ty TNHH Thng mi - Dch v Cng ngh cao",GoiTat:"",QuocGia:"Vit Nam",DaiDienPhapLuat:"B Nguyn Th M Anh - Tng Gim c",LinhVucHoatDong:"Dch v thng mi",TenDuAnDauTu:"Khu Nh  v Dch v chuyn gia",MucTieuQuyMoDuAn:["Xy dng, pht trin v cho thu mt khu nh  trn khu t c din tch 61,77 ha ti khu S-H thuc KCNC TP.HCM v cung cp cc dch v thng mi, dch v cng cng cho cc chuyn gia, cn b khoa hc k thut, qun l cao cp lm vic trong KCNC v cc i tng c php lut VN cho php"],DiaChiTrongKhu:"L T2-4, ng D1",DienThoai:"",Fax:"",Website:"",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[413.375,660.1875],[401.125,668.8125],[390.75,661.1875],[403.875,653.0625],[413.375,660.1875]]]}},{type:"Feature",id:"PLAMSOON.8",properties:{name:"PLAMSOON.8",gateway:[406.46875,665],data:{ID:50,TenDoanhNghiep:"Cng ty TNHH Rockwell Automation Vit Nam",GoiTat:"Rockwell Automation Vietnam Co., Ltd",QuocGia:"Singapore",DaiDienPhapLuat:"ng Dng Anh Tun - Tng Gim c",LinhVucHoatDong:"Dch v CNC",TenDuAnDauTu:"Cng ty TNHH Rockwell Automation Vit Nam",MucTieuQuyMoDuAn:["- Cung cp cng ngh hin i v h thng, gii php v dch v hu mi cho cc khch hng ca Rockwell Automation.","- Bin Khu Cng ngh cao TP.HCM thnh a im chin lc  m rng hot ng sn xut hoc cc d n u t khc trong vng Chu  Thi Bnh Dng."],DiaChiTrongKhu:"Lu 5, To nh vn phng Sacom-Chp Sng (BCIS), L T2-4, ng D1",DienThoai:"62556400",Fax:"62556411",Website:"http://www.rockwellautomation.com/sea",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[413.375,660.1875],[401.125,668.8125],[390.75,661.1875],[403.875,653.0625],[413.375,660.1875]]]}},{type:"Feature",id:"PLAMSOON.9",properties:{name:"PLAMSOON.9",gateway:[406.46875,665],data:{ID:58,TenDoanhNghiep:"Cng ty TNHH Sacom - Chp sng",GoiTat:"SCS",QuocGia:"Vit Nam",DaiDienPhapLuat:"B Phm Th Li - Tng Gim c",LinhVucHoatDong:"Dch v thng mi",TenDuAnDauTu:"D n Xy dng Khng gian Internet - Chp Sng (Brilliant Chip Internet City)",MucTieuQuyMoDuAn:["Xy dng cao c vn phng  t kinh doanh theo chc nng hoc cho cc cng ty thu thuc lnh vc CNC nh software, dch v data center, dch v Internet vin thng, dch v gi tr gia tng trc tuyn, cc ng dng di ng, SX kinh doanh ni dung s v.v... v lin doanh vi mt s i tc tim nng  SX, TK vi mch bn dn, thc hin dch v chuyn giao CN"],DiaChiTrongKhu:"L T2-4, ng D1",DienThoai:"35222277",Fax:"35122288",Website:"http://www.scs.vn/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[413.375,660.1875],[401.125,668.8125],[390.75,661.1875],[403.875,653.0625],[413.375,660.1875]]]}},{type:"Feature",id:"KOO",properties:{name:"KOO",gateway:[397.234375,671.1875],data:{TenDoanhNghiep:"Ban Qun L Khu Cng Ngh Cao",GoiTat:"BQL KCNC",QuocGia:"Vit Nam",DaiDienPhapLuat:"",LinhVucHoatDong:"",TenDuAnDauTu:"",DiaChiTrongKhu:"ng D1, Khu Cng Ngh Cao",DienThoai:"08.37360293",Fax:"08.37360292",Website:"http://www.shtp.hochiminhcity.gov.vn/Pages/default.aspx",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[394.25,672.8125],[400.5,669.0625],[390.625,661.6875],[383.75,665.4375],[394.25,672.8125]]]}},{type:"Feature",id:"FPTBuilding",properties:{name:"FPTBuilding",gateway:[384.5625,679.875],data:{ID:39,TenDoanhNghiep:"Cng ty TNHH MTV Gii php cng ngh FPT",GoiTat:"FTS Co., Ltd",QuocGia:"Vit Nam",DaiDienPhapLuat:"ng Phm Minh Tun - Gim c",LinhVucHoatDong:"Nghin cu, trin khai, o to",TenDuAnDauTu:"Trung tm Nghin cu v Pht trin Gii php Cng ngh FPT",MucTieuQuyMoDuAn:["- NC pht trin, nhn chuyn giao CN, sx, kinh doanh v cung cp cc sn phm CNTT. dch v phn mm, trin khai ng dng v cc gii php CN trn gi cho th trng trong & ngoi nc, gm:","+ Phn mm, thit b nhn dng ting ni, hnh nh, c ch, chuyn ng dng trong lnh vc an ninh, giao thng, y t, dch v cng.","+ Phn mm, thit b iu khin robot.","+ Phn mm cho cc thit b y t, chn on bng hnh nh. Phn mm, thit b phc v y t thng minh nh Telemedicine, e-Healthcare, Bnh vin KT s, H s bnh n in t...","+ Phn mm, thit b ng dng CN RFDI.","+ Phn mm, thit b ng dng CN GPS/GIS trong cng tc qun l  th.","+ Phn mm, thit b phc v chnh ph in t (e-Gov).","- NC & pht trin phn mm, thit b ng dng CN thit k & sx nh my tnh (CAD/CAM).","- NC & pht trin phn mm, thit b ng dng CN in ton m my.","- NC & pht trin phn mm, thit b ng dng CN trn thit b di ng."],DiaChiTrongKhu:"Tng 2 ta nh F-town, L T2, ng D1",DienThoai:"37362323",Fax:"37362333",Website:"",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[357.0625,698.5],[394.4375,673.375],[384.0625,665.75],[345.1875,689.375],[357.0625,698.5]]]}},{type:"Feature",id:"FPTSoft",properties:{name:"T2-2",gateway:[384.5625,679.875],data:{ID:49,TenDoanhNghiep:"Cng ty TNHH Phn mm FPT H Ch Minh",GoiTat:"Fsoft HCM",QuocGia:"Vit Nam",DaiDienPhapLuat:"ng Nguyn c Qunh - Gim c",LinhVucHoatDong:"Vi in t-CNTT- vin thng",TenDuAnDauTu:"Trung tm Nghin cu Cng ngh thng tin, Vin thng v Sn xut phn mm",MucTieuQuyMoDuAn:["- NC v cung cp cc gii php v dch v CNTT, vin thng v Internet.","- NC cc gii php tch hp h thng.","- NC & SX phn mm xut khu."],DiaChiTrongKhu:"L T2-2, ng D1",DienThoai:"37362323",Fax:"37362333",Website:"http://www.fpt-software.com/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[357.0625,698.5],[394.4375,673.375],[384.0625,665.75],[345.1875,689.375],[357.0625,698.5]]]}},{type:"Feature",id:"T2-6",properties:{name:"K17",gateway:[440.1875,641.75],data:{ID:64,TenDoanhNghiep:"Trung tm cng ngh v qun l mi trng",GoiTat:"ETM",QuocGia:"Vit Nam",DaiDienPhapLuat:"B Hunh Ngc Phng Mai - Gim c",LinhVucHoatDong:"Nghin cu & Trin khai",TenDuAnDauTu:"Trung tm cng ngh v qun l mi trng",MucTieuQuyMoDuAn:["Xy dng CSHT phc v hot ng NCKH, o to ngun nhn lc trong lnh vc CN mi trng, bao gm cc hng mc sau:","- H thng PTN nghin cu ng dng v CN mi trng, trang thit b hin i vi cc m hnh nghin cu v CN x l cht thi phc v cho cng tc nghin cu v o to v CN.","- H thng PTN nghin cu ng dng v CN mi trng.","- H thng PTN phn tch v nh gi  nhim mi trng.","- H thng phng hp phc v cc kha o to ngn hn."],DiaChiTrongKhu:"L T2-6, ng D1",DienThoai:"38981501",Fax:"38981505",Website:"http://www.etmcenter.com.vn/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[444.28125,638.796875],[437.5625,643.453125],[429.25,637.359375],[431,636.640625],[432.96875,636.609375],[444.28125,638.796875]]]}},{type:"Feature",id:"E2a-III.4",properties:{name:"E2-NCDT",gateway:[634.53125,518.8125],data:{ID:27,TenDoanhNghiep:"Cng ty TNHH Eurofins Sc K Hi ng",GoiTat:"Eurofins Sac Ky Hai Dang Co., Ltd",QuocGia:"Vit Nam",DaiDienPhapLuat:"B Phm Th nh - Tng Gim c",LinhVucHoatDong:"Cng ngh sinh hc",TenDuAnDauTu:"Cng ty TNHH Eurofins Sc K Hi ng",MucTieuQuyMoDuAn:["- NC pht trin lnh vc ha phn tch, tng hp ha vi sinh; phc v pht trin ngnh kim sot cht lng, nng lm thy sn, kim sot  nhim mi trng.","- NC ng dng thnh qu khoa hc ca ngnh sinh hc, vt liu, iu khin, ngnh ha vo vic pht trin cc k thut phn tch tinh vi, gim thiu  nhim mi sinh, cc k thut phn tch nhanh h tr hiu qu trong vic qun l v sinh an ton thc phm, s dng hp l v hiu qu ti nguyn thin nhin, ti ch cht thi.","- NC, pht trin & chuyn giao cc h thng phn mm qun l cht lng.","- Xy dng cc c s NCTK, dch v phn tch v o to chuyn su lnh vc kim tra cht lng t tm quc t, phc v cc yu cu v cht lng sn phm i vi th trng trong nc v quc t, p ng cc quy nh ngy cng kht khe, c bit l lnh vc v sinh an ton thc phm, kim sot  nhim mi trng.","- o to i ng chuyn gia phc v cho cc hot ng NC, pht trin v kim ta cht lng ti PTN cc trng H, Vin NC, DN trong & ngoi nc, s dng cc k thut phn tch tinh vi, cao cp."],DiaChiTrongKhu:"L E2a-III.4, Khu Nghin cu - Pht trin - o to - m to KCNC",DienThoai:"38239643",Fax:"38239872",Website:"http://sackyhaidang.com.vn/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[662.875,549.75],[669.5625,547.75],[672.9375,546.75],[675.6875,545.875],[678.4375,545.125],[680.6875,544.375],[683.8125,542.5],[685.4375,541.5],[687.4375,539.125],[692.375,531.5],[695.875,526.5],[698.625,524],[701.375,521.25],[704.125,520],[702.375,517.25],[680.625,501],[663.125,499.75],[633.375,520.25],[662.875,549.75]]]}},{type:"Feature",id:"E2a-II",properties:{name:"E2-NCDT",gateway:[608.40625,536.625],data:{ID:59,TenDoanhNghiep:"Trung tm cng ngh phn mm TP.HCM",GoiTat:"",QuocGia:"Vit Nam",DaiDienPhapLuat:"ng Trn Ngc Tun - Gim c",LinhVucHoatDong:"Vi in t-CNTT- vin thng",TenDuAnDauTu:"Trung tm o to v nghin cu cng ngh i hc FPT (FURETRA)",MucTieuQuyMoDuAn:["a) Mc tiu:","Gp phn o to ngun nhn lc trnh  cao cho hot ng NCKH v chuyn giao CN, m to trong cc lnh vc CNTT, trong tin trnh CNH-HH v hi nhp kinh t th gii ca VN.","b) Quy m:","- Xy dng Trung tm o to cc chuyn ngnh CNTT nh k thut phn mm, khoa hc my tnh, h thng thng tin, k thut in t truyn thng, ...; o to ngn hn v CN mi trong lnh vc CNTT nh robot - tr tu nhn to, x l d liu ln, in ton m my, h tng mng v an ton thng tin, ...; o to b sung phc v SX, KD ca cc DN trong KCNC TP.HCM v Cty phn mm FPT hin ang hot ng trong KCNC.","- Xy dng Trung tm nghin cu & trin khai trong lnh vc CNTT, tp trung vo cc hng robot - tr tu nhn to, x l d liu ln, in ton m my, h tng mng v an ton thng tin."],DiaChiTrongKhu:"L E2a-II, ng D1",DienThoai:"",Fax:"",Website:"http://www.fpt.edu.vn/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[628.6875,567],[631.5625,566.125],[633.8125,565.375],[635.5625,564.5],[637.9375,562.625],[640.9375,559.875],[643.0625,558.25],[645.6875,556.125],[647.8125,555.125],[650.4375,553.75],[653.0625,553],[655.0625,552.125],[662.375,549.75],[633.625,520],[603.125,539.5],[628.6875,567]]]}},{type:"Feature",id:"E2a-II.3",properties:{name:"E2-NCDT",gateway:[579.0625,556.875],data:{ID:21,TenDoanhNghiep:"Cng ty TNHH Cng ngh HPT",GoiTat:"HPT Technology",QuocGia:"Vit Nam",DaiDienPhapLuat:"ng inh H Duy Linh - Ch tch HTV",LinhVucHoatDong:"Vi in t-CNTT- vin thng",TenDuAnDauTu:"Trung tm Nghin cu v ng dng Cng ngh Thng tin Truyn thng HPT",MucTieuQuyMoDuAn:["- Thnh lp Trung tm phn mm HPT Software d kin cho 100 lp trnh vin t nm 2018, t 300 lp trnh vin n nm 2023, sn xut phn mm phc v th trng trong & ngoi nc. Trung tm phn mm HPT c trang b cc my tnh c nhn cho lp trnh vin dng terminal, my ch ng dng cung cp cc ng dng lp trnh cho coder, my ch mi trng, h thng lu tr, h thng Lab, h thng bo mt v.v","- Thnh lp trung tm nghin cu v chuyn giao Cng ngh bao gm mt chui cc phng th nghim v thc hnh trnh din (Demo) v lnh vc CNTT v truyn thng nhm nghin cu v chuyn giao cc ng dng v gii php CNTT tin tin nht dnh cho khch hng l cc doanh nghip vi s phi hp cng cc i tc chin lc hng u v CNTT m Cng ty HPT  v ang hp tc pht trin nh Oracle, HP, IBM, CISCO, Microsoft, Dell","- Pht trin trung tm o to CNTT cho cc doanh nghip, cung cp dch v t vn la chn gii php, hun luyn thc hnh cho nhng doanh nghip c nhu cu ng dng  m bo ngun lc c  nng lc trin khai cc gii php CNTT mi nht. Ngoi cc chng trnh o to ring bit c thit k ring theo tng yu cu c th, HPT s kt hp vi cc i tc quc t trong tng lnh vc chuyn su nhm nghin cu v chuyn giao cng ngh v tri thc cho doanh nghip c nhu cu."],DiaChiTrongKhu:"L E2a-II.3, ng D1",DienThoai:"38458518",Fax:"38458516",Website:"http://www.hpt.vn/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[575.5625,561.25],[575.3125,559.25],[593.8125,546.625],[603.1875,540.125],[628.625,567.25],[625.71875,567.875],[619.1875,569.375],[611.9375,571.375],[602.4375,573.875],[598.8125,574.125],[596.3125,574.125],[591.3125,572.625],[587.8125,570.375],[575.5625,561.25]]]}},{type:"Feature",id:"Vin Du kh Vit Nam",properties:{name:"E2b-1",gateway:[573.09375,550.5],data:{ID:70,TenDoanhNghiep:"Vin Du kh Vit Nam",GoiTat:"",QuocGia:"Vit Nam",DaiDienPhapLuat:"ng Phan Ngc Trung - Vin trng",LinhVucHoatDong:"Nghin cu & Trin khai",TenDuAnDauTu:"Trung tm phn tch th nghim v Vn phng Vin Du kh Vit Nam ti TP.HCM (VPI's Labs and Offices)",MucTieuQuyMoDuAn:["u t pht trin Trung tm phn tch th nghim Vin Du kh VN hin i, ng b, ngang tm quc t. u t pht trin Vin Du kh VN khu vc pha Nam thnh n v NCKH hon chnh, ng b trn tt c chuyn ngnh KHCN bao trm mi lnh vc hot ng du kh: tm kim thm d, khai thc, vn chuyn, tng tr, phn phi, ch bin, lc ha du, an ton mi trng, kinh t v qun l du kh, o to cn b, phc v qu trnh hi nhp v xy dng Tp on Du kh VN"],DiaChiTrongKhu:"Tr s chnh: L E-2b-5, ng D1",DienThoai:"",Fax:"38973992",Website:"http://www.vpi.pvn.vn/vn/Home.aspx",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[565.875,553],[569.375,553.25],[579.6875,546.125],[583.3125,543.5],[585.5625,542],[564.8125,522],[562.8125,523.625],[557.3125,528.75],[555.8125,531.5],[555.0625,534.875],[555.4375,542.625],[557.3125,546.25],[563.5625,551.75],[565.875,553]]]}},{type:"Feature",id:"HUTECH",properties:{name:"E2b-1",gateway:[618.21875,519.625],data:{ID:62,TenDoanhNghiep:"Vin Cng ngh cao HUTECH - Trng i hc K thut Cng ngh TP.HCM",GoiTat:"IHT-HUTECH",QuocGia:"Vit Nam",DaiDienPhapLuat:"ng H c Lc - Vin trng",LinhVucHoatDong:"Nghin cu, trin khai, o to",TenDuAnDauTu:"Vin Cng ngh cao HUTECH (IHT-HUTECH)",MucTieuQuyMoDuAn:["Nghin cu khoa hc - Chuyn giao cng ngh - o to trnh  cao trong cc lnh vc CNC (CNTT, CNSH, CN t ng ha v CN nng lng mi, nng lng ti to), ng thi l a ch u t, hp tc nghin cu v chuyn giao CN vi cc t chc v DN trong nc v quc t"],DiaChiTrongKhu:"L E2b-1;E2b-2;E2b-3, ng D1",DienThoai:"35121507",Fax:"35120786",Website:"http://www.hutech.edu.vn/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[585.6875,542],[652.125,495.5],[652.875,493.5],[652.875,484.5],[653.0625,483],[643.0625,475.75],[596.0625,476.625],[596.59375,480.3125],[596.1875,485.375],[594.8125,489.625],[592.1875,494.625],[579.9375,507.625],[564.6875,521.875],[585.6875,542]]]}},{type:"Feature",id:"DH-NTT",properties:{name:"E3",gateway:[613.3125,451.75],data:{ID:63,TenDoanhNghiep:"Vin K thut Cng ngh cao NTT-i hc Nguyn Tt Thnh-Chi nhnh Khu Cng ngh cao TP.HCM",GoiTat:"",QuocGia:"Vit Nam",DaiDienPhapLuat:"Nguyn Mnh Hng - Gim c chi nhnh",LinhVucHoatDong:"Nghin cu, trin khai, o to",TenDuAnDauTu:"Trung tm pht trin cng ngh cao i Hc Nguyn Tt Thnh",MucTieuQuyMoDuAn:["- Xy dng vin k thut cao NTT l mt vin nghin cu v pht trin c tm  khu vc ng Nam . Lm nn tn dch chuyn i hc Nguyn Tt Thnh t i hc ng dng sang i hc ng dng v nghin cu, gp phn vo cng cuc i mi cn bn v ton din nn gio dc ca t nc, c bit l lnh vc gio dc i hc.","- Xy dng Vin thnh mt c s khoa hc - cng ngh lun ng hnh vi cc nh khoa hc trong cc hot ng nghin cu ng dng v chuyn giao cng ngh. Tp hp i ng chuyn gia  kh nng thc hin nhim v nghin cu ng dng, gii m cng ngh, hon thin cc cng ngh thc y vic ni a ha sn phm, to lp cc doanh nghip khoa hc-cng ngh.","- H tr nh khoa hc, doanh nghip, c nhn trong vic ch th, m to, n quy m cng nghip v pht trin sn phm.","- T vn doanh nghip tip cn, s dng cng ngh tin tin.","- m to doanh nghip tr, to ra mt h thng cc doanh nghip khoa hc cng ngh.","- o to kin thc qun l, ng hnh vi cc doanh nghip khoa hc-cng ngh trong giai an u thnh lp.","- Nng cao nng lc o to v nghin cu khoa hc cho trng i hc Nguyn Tt Thnh.","- Quy m: 01 trung tm chnh v 04 phng th nghim trn tng din tch 45.419 m2, gm:","(1) Phng TN CNSH - Y - Dc","(2) Phng TN CNTT - Vin thng","(3) Phng TN CN T ng ha & Robot","(4) Phng TN Nng lng & Mi trng"],DiaChiTrongKhu:"L E3-I.1, E3-I.2, E3-I.3, ng D1",DienThoai:"62619423",Fax:"",Website:"http://ntt.edu.vn/ntt_trangchu/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[642.75,475.125],[596.5,476.125],[592,470.625],[581,463.375],[557,455.125],[530.5,447.375],[520.75,442.125],[497.75,426.375],[499,422.875],[521,406.125],[537,400.625],[555.75,394.625],[559.5,396.125],[594,433.625],[622.75,459.875],[642.75,475.125]]]}},{type:"Feature",id:"I6",properties:{name:"I6",gateway:[868.0625,382.125],data:{ID:4,TenDoanhNghiep:"Cng ty C phn Cng Vin Si Gn Silicon",GoiTat:"Si Gn Silicon",QuocGia:"Vit Nam",DaiDienPhapLuat:"Nguyn Minh Hiu",LinhVucHoatDong:"Dch v thng mi",TenDuAnDauTu:"Xy dng v Pht trin Khu Cng vin Si Gn Silicon",MucTieuQuyMoDuAn:["Quy t chuyn gia, nh khoa hc, doanh nghip Vit Kiu v u t sn xut lnh vc cng ngh cao v cng nghip h tr cng ngh cao","Thu ht v tip cn 11 doanh nghip ngnh vi mch bn dn ca Vit Kiu ti Silicon Valley v u t ti Saigon Silicon City - Khu Cng ngh cao."],DiaChiTrongKhu:"L I6, L I7, ng D1",DienThoai:"",Fax:"",Website:"",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[854.1849916733491,484.72169850337826],[877.5195154525052,470.5795628796473],[933.3809511662424,384.3125355748885],[932.5,380.875],[897.25,380.875],[857.5,386.125],[832.25,393.625],[796,403.5],[803,415.5],[827,434.5],[836,449.5],[839,472.5],[854.1849916733491,484.72169850337826]]]}},{type:"Feature",id:"I7",properties:{name:"I7",gateway:[867.65625,378.046875],data:{ID:4,TenDoanhNghiep:"Cng ty C phn Cng Vin Si Gn Silicon",GoiTat:"Si Gn Silicon",QuocGia:"Vit Nam",DaiDienPhapLuat:"Nguyn Minh Hiu",LinhVucHoatDong:"Dch v thng mi",TenDuAnDauTu:"Xy dng v Pht trin Khu Cng vin Si Gn Silicon",MucTieuQuyMoDuAn:["Quy t chuyn gia, nh khoa hc, doanh nghip Vit Kiu v u t sn xut lnh vc cng ngh cao v cng nghip h tr cng ngh cao","Thu ht v tip cn 11 doanh nghip ngnh vi mch bn dn ca Vit Kiu ti Silicon Valley v u t ti Saigon Silicon City - Khu Cng ngh cao."],DiaChiTrongKhu:"L I6, L I7, ng D1",DienThoai:"",Fax:"",Website:"",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[937.25,373.625],[940.25,372.625],[989.5,293.875],[987.75,291.375],[975.25,287.875],[967,288.375],[953,294.875],[912,323.625],[888,334.125],[860.5,338.625],[825,344.625],[808.5,346.375],[791.5,355.875],[782.75,370.375],[784.5,385.625],[787.5,394.875],[791.25,398.625],[797.5,398.875],[816,390.375],[860,377.375],[904.75,372.625],[937.25,373.625]]]}},{type:"Feature",id:"I8-1",properties:{name:"I8-1",gateway:[710.3125,442.125],data:{ID:31,TenDoanhNghiep:"Cng ty TNHH Jabil Vit Nam",GoiTat:"Jabil Vietnam",QuocGia:"Singapore",DaiDienPhapLuat:"ng S Purushothuman K Swaminathan - Tng Gim c",LinhVucHoatDong:"Vi in t-CNTT- vin thng",TenDuAnDauTu:"Cng ty TNHH Jabil Vit Nam",MucTieuQuyMoDuAn:["a) Mc tiu:","- Sn sut thit b vn phng v my tnh; sn xut thit b lu tr d liu, thit b truyn thng, thit b y t v cc thit b cng nghip in t tiu dng; ch to mu khun nha chnh xc. Cung cp dch v sa cha v bo tr cho cc thit b vin thng, thit b mng v thit b lu tr, thit b trng by, thit b lin quan n my tnh v thit b in t tiu dng.","- Thc hin kinh doanh hot ng mua bn hng ho v cc hot ng lin quan trc tip n mua bn hng ho ti Vit Nam nh thc hin quyn nhp khu, quyn phn phi bn bun (khng gn vi lp c s bn bun), quyn phn phi bn l (khng gn vi lp c s bn l) nhng mt hng c m HS nh sau: 2508; 3402; 3403; 3405; 3506; 3810; 3919; 3923; 3926; 4016; 4415; 4802; 4819; 4821; 4823; 4908; 7318; 7320; 7326; 8414; 8443; 8471; 8472; 8473; 8479; 8483; 8501; 8504; 8506; 8515; 8517; 8528; 8531; 8532; 8533; 8534; 8536; 8540; 8541; 8542; 8544; 9031 v quyn xut khu theo lut php quy nh.","b) Quy m: d kin ti nm sn xut n nh:","- My c th t POS: 1,6 triu sn phm.","- Bo mch in t PCB cc loi: 5 triu sn phm."],DiaChiTrongKhu:"L I8-1",DienThoai:"37360547",Fax:"37360545",Website:"http://www.jabil.com/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[718.625,448.0625],[721.875,448.3125],[756.125,424.6875],[756.25,421.8125],[749.75,417.1875],[745.5,409.8125],[741.75,396.3125],[694.125,429.3125],[718.625,448.0625]]]}},{type:"Feature",id:"I-8-2",properties:{name:"I-8-2",gateway:[679.40625,418.75],data:{ID:9,TenDoanhNghiep:"Cng ty C phn Sanofi Vit Nam",GoiTat:"Sanofi Vietnam",QuocGia:"Singapore",DaiDienPhapLuat:"ng Cyril GrandchampDesraux - Ch tch",LinhVucHoatDong:"Cng ngh sinh hc",TenDuAnDauTu:"Nh My Sn xut V Trung tm Nghin cu Dc phm.",MucTieuQuyMoDuAn:["a) Mc tiu:","- Xy dng trung tm  nghin cu duy nht ca Tp on Sanofi ti ng Nam   nghin cu v pht trin cc sn phm dc phm, m phm, cc sn phm chm sc sc khe v thc phm chc nng cht lng cao, mi cho th trng ni a v khu vc chu . Hot ng nghin cu v pht trin bao gm: nghin cu v pht trin sn phm mi, chuyn giao/chuyn nhng sn phm t Tp on Sanofi sang Vit Nam, pht trin v thm nh phng php kim nghim mi, h tr cc nh my ci thin cng thc, quy trnh v x l s c.","- Xy dng nh my sn xut dc phm, m phm, cc sn phm chm sc sc khe v thc phm chc nng cht lng cao p ng nhu cu cha tr ca bnh nhn trong nc v xut khu n cc nc chu  ph hp vi chnh sch pht trin ngnh cng nghip dc ca Chnh ph Vit Nam. Nh my mi c thit k hin i theo tiu chun GMP ca T chc Y t Th gii, tiu chun mi trng v cht lng ca Tp on Sanofi. T chc sn xut s c xy dng trn c s Lean Management (ti u ha thi gian thay i, qun l bng hnh nh, ti u ha phn lung, lun ng thi gian, v.v).","b) Quy m:","- Giai on u (2015-2017): nng lc sn xut d kin t 36.000.000 sn phm/nm.","- Giai on n nh (nm 2019): nng lc sn xut d kin t 86.000.000 sn phm/nm."],DiaChiTrongKhu:"L I-8-2, ng D8",DienThoai:"38298526",Fax:"",Website:"http://www.sanofi.com.vn/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[664.5,407.375],[693.75,429.375],[741.25,395.875],[739.25,387.375],[732.5,376.375],[719.75,368.625],[664.5,407.375]]]}},{type:"Feature",id:"I-9",properties:{name:"I-9",gateway:[519.4375,344],data:{ID:38,TenDoanhNghiep:"Cng ty TNHH MTV Emotiv Vit Nam",GoiTat:"EMOTIV VIETNAM",QuocGia:"M",DaiDienPhapLuat:"B Phan Hng Giang - Gim c",LinhVucHoatDong:"Vi in t-CNTT- vin thng",TenDuAnDauTu:"D n Nghin cu, sn xut Thit b c in no  eo tai v cc sn phm ng dng ti Vit Nam",MucTieuQuyMoDuAn:["- Nghin cu, thit k, sn xut thit b tai nghe in no  v cc ng dng trong lnh vc sc khe, gii tr, t ng ha.","+ Giai on 1 (2014  2016): lp t nh xng v gia cng sn phm Emotiv EEG  xut khu.","+ Giai on 2 (2016  2018): u t m rng nh xng, sn xut Emotiv EEG v Emotiv Insight  xut khu.","- Quy m (d kin):","+ Sn phm Emotiv EEG: 10.000 chic (2018)","+ Sn phm Emotiv Insight: 40.000 chic (2018)"],DiaChiTrongKhu:"L I-9",DienThoai:"",Fax:"",Website:"",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[514.875,340.5],[528.375,325.25],[542.625,336.5],[527.625,349.75],[514.875,340.5]]]}},{type:"Feature",id:"I-9-5",properties:{name:"I-9-5",gateway:[559.59375,383.625],data:{ID:33,TenDoanhNghiep:"Cng ty TNHH Mekophar",GoiTat:"MEKOPHAR BP",QuocGia:"Vit Nam",DaiDienPhapLuat:"B Hunh Th Lan - Ch tch",LinhVucHoatDong:"Cng ngh sinh hc",TenDuAnDauTu:"D n u t Nghin cu Pht trin & Sn xut Sinh - Dc phm Mekophar",MucTieuQuyMoDuAn:["a) Mc tiu:","Xy dng mt c s NC-SX  trin khai NC, pht trin sn phm v SX cc sinh, dc phm bng CNSH, cc loi dc phm th h mi, m phm, thc phm chc nng bng CN mi, tin tin.","b) Quy m:","- Giai on u: sn lng hng nm: 1.960 mu T bo gc; 7.000 sn phm chit tch t ngun Plasma; 150 mt hng Dc phm.","- Giai on n nh: sn lng hng nm: 9.600 mu T bo gc; 15.000 sn phm chit tch t ngun Plasma; 200 mt hng Dc phm."],DiaChiTrongKhu:"L I-9-5, ng D2",DienThoai:"",Fax:"",Website:"www.mekophar.com",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[562.1875,386.25],[565.3125,387.25],[592.5625,376.25],[584.8125,365.625],[556.0625,379.625],[562.1875,386.25]]]}},{type:"Feature",id:"I-9-8",properties:{name:"I-9-8",gateway:[595.515625,316.8125],data:{ID:48,TenDoanhNghiep:"Cng ty TNHH MTV Nh my Cng ngh sinh hc v Thit b y t Hong Nguyn",GoiTat:"",QuocGia:"Vit Nam",DaiDienPhapLuat:"Nguyn Trng Hiu",LinhVucHoatDong:"Cng ngh sinh hc",TenDuAnDauTu:"ng dng cng ngh Gen trong sn xut Chip sinh hc phc v chun on v iu tr mt s bnh l",MucTieuQuyMoDuAn:["Sn xut Biochip chn on bnh lao, ung th, ic bm sinh, bnh thalassemia vi cng sut 360.000 chip cc loi/nm t tiu chun quc t."],DiaChiTrongKhu:"L I-9-8, ng D2",DienThoai:"",Fax:"",Website:"",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[587.125,315.1000003814697],[595.875,316.8500003814697],[602.375,318.3500003814697],[606.625,320.6000003814697],[612.625,323.6000003814697],[615.625,325.1000003814697],[578.875,351.3500003814697],[575.625,354.1000003814697],[572.625,356.3500003814697],[558.375,342.6000003814697],[587.125,315.1000003814697]]]}},{type:"Feature",id:"T3A",properties:{name:"T3A",gateway:[495.8125,338.125],data:{ID:56,TenDoanhNghiep:"Tp on Vin thng Qun i (Viettel)",GoiTat:"Viettel",QuocGia:"Vit Nam",DaiDienPhapLuat:"ng Nguyn Mnh Hng - Tng Gim c",LinhVucHoatDong:"Vi in t-CNTT- vin thng",TenDuAnDauTu:"Xy dng H tng vin thng phc v Khu Cng Ngh Cao Giai on II, Qun 9, TP.HCM",MucTieuQuyMoDuAn:["a) Mc tiu:","Xy dng h thng h tng vin thng v thng tin lin lc trn c s cng ngh hin i, phc v tt nht cho cc nhim v iu hnh v sn xut kinh doanh ca Khu Cng ngh cao Giai on II  Qun 9  TP.HCM, tng vng ph v pht trin cc dch v gia tng vi mc tiu t c 100% din tch Khu Cng ngh cao.","b) Quy m:","- Xy dng ngm ha tuyn cng b: 17,7 km","- Xy dng tuyn cp quang: 35,2 km + Xy dng trm pht sng di ng: 14 trm","- Xy dng vn phng v phng my thit b trung tm"],DiaChiTrongKhu:"Khu T3, ng D2",DienThoai:"",Fax:"",Website:"",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[502.75,342.125],[475.5,372.625],[469.5,368.625],[464.25,359.375],[461,353.125],[461.75,344.125],[467,336.375],[472.5,333.625],[478.5,328.125],[502.75,342.125]]]}},{type:"Feature",id:"HT-2-1",properties:{name:"HT-2-1",gateway:[382.9375,268.75],data:{ID:34,TenDoanhNghiep:"Cng ty TNHH MTV Daeyoung Electronics Vina",GoiTat:"DaeYoung",QuocGia:"Vit Nam",DaiDienPhapLuat:"Song Bin",LinhVucHoatDong:"Vi in t-CNTT- vin thng",TenDuAnDauTu:"Sn xut v kinh doanh linh kin in t v mn hnh Led dnh cho ngnh hng gia dng (T lnh, my lnh, my git, v.v)",MucTieuQuyMoDuAn:[],DiaChiTrongKhu:"L HT-2-1, ng D2",DienThoai:"",Fax:"",Website:"",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[380.125,267.5],[380.125,265.25],[399.875,244.75],[402.875,244.25],[429.875,257.5],[434.125,260.5],[413.375,283.5],[380.125,267.5]]]}},{type:"Feature",id:"TB",properties:{name:"BT",gateway:[274.65625,210.5625],data:{ID:57,TenDoanhNghiep:"Cng ty TNHH MTV Transimex Hi Tech Park Logistics",GoiTat:"Transimex SHTP Logistics",QuocGia:"Vit Nam",DaiDienPhapLuat:"ng Bi Tun Ngc - Ch tch HTV",LinhVucHoatDong:"Dch v thng mi",TenDuAnDauTu:"Kho Ngoi quan v Dch v Hu cn Khu Cng Ngh Cao",MucTieuQuyMoDuAn:["a) Mc tiu:","- Xy dng khai thc kho ngoi quan v kho bo thu, kho CFS, kho lnh, kho thng, bi cha container.","- Trang b h thng khung k cha hng 6 tng, h thng camera 24/7. t cht lng v tiu chun ISO v WHO-GMP cha cc mt hng nh: sn phm in t v cc loi hng cao cp khc c sn xut ti Khu Cng ngh cao.","b) Quy m:","- Kho ngoi quan v kho bo thu: 12.000 m2;","- Kho CFS: 15.000 m2;","- Kho lnh: 8.000 m2;","- Kho thng: 10.000 m2;","- Kho thng: 10.000 m2;"],DiaChiTrongKhu:"L BT, ng D2",DienThoai:"22202888",Fax:"22202889",Website:"",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[284.5,215.125],[302,167.625],[273,153.375],[250.5,138.625],[236.25,129.625],[231.75,130.125],[227,143.125],[256.5,159.375],[230.75,184.875],[242.5,193.375],[284.5,215.125]]]}},{type:"Feature",id:"HC",properties:{name:"HC",gateway:[227.4375,183.25],data:{ID:35,TenDoanhNghiep:"Cng ty TNHH MTV Dch v Phn phi Ryobi (Vit Nam)",GoiTat:"RYOBI DS VN",QuocGia:"Nht Bn",DaiDienPhapLuat:"ng Mitsunobu Kojima - Ch tch HTV",LinhVucHoatDong:"Dch v thng mi",TenDuAnDauTu:"Trung Tm Logistics Khu Cng Ngh Cao Thnh Ph H Ch Minh",MucTieuQuyMoDuAn:["a) Mc tiu:","u t v kinh doanh kho lu tr v dch v t cht lng ph hp tiu chun ISO v cc tiu chun WHO-GMP. Ngoi ra, ci t h thng qun l kho hng tin tin.","b) Quy m:","Xy dng mt nh kho 14.950 m2, bao gm: kho ngoi quan 6.000 m2, kho kim sot nhit  v  m 3.000 m2, v kho thng 5.950 m2."],DiaChiTrongKhu:"L HC, ng D2",DienThoai:"",Fax:"",Website:"",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[230.375,184.875],[256.625,159.625],[226.875,143],[214.5,169.25],[216.125,175],[230.375,184.875]]]}},{type:"Feature",id:"Cng ty TNHH MTV Nghin cu v Ch to khun mu  chnh xc cao Viedam",properties:{name:"I4b",gateway:[741.78125,550.875],data:{ID:53,TenDoanhNghiep:"Cng ty TNHH MTV Nghin cu v Ch to khun mu  chnh xc cao Viedam",GoiTat:"VIEDAM M&R Co., Ltd",QuocGia:"Vit Nam",DaiDienPhapLuat:"ng V Cng Hai - Gim c",LinhVucHoatDong:"C kh chnh xc v t ng ha",TenDuAnDauTu:"Trung tm Nghin cu Pht trin v Ch to khun mu  chnh xc cao Viedam",MucTieuQuyMoDuAn:["a) Mc tiu:","- Thnh lp Trung tm NC & T v CN khun mu c  chnh xc cao v ng dng vt liu mi trong ngnh khun mu cho i ng k s cng ty.","- Thnh lp nh my ch to khun mu c  chnh xc cao chuyn ch tc cc khun c  phc tp & k thut cao phc v, h tr cc ngnh CNC.","b) Quy m: sn xut 200 khun/nm."],DiaChiTrongKhu:"L I-4B-5.2 ng N3",DienThoai:"1283668386",Fax:"38615164",Website:"",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[743.5625,552],[745.8125,551.75],[749.1875,554.125],[749.1875,556.625],[736.3125,564.875],[731.9375,567.625],[723.6875,561.875],[719.8125,559],[737.8125,545.75],[739.0625,546.75],[739.3125,548.75],[743.5625,552]]]}},{type:"Feature",id:"Cng ty TNHH Hai TV Nng lng Bo Sn",properties:{name:"I4b",gateway:[704.5390625,557.3125],data:{ID:29,TenDoanhNghiep:"Cng ty TNHH Hai TV Nng lng Bo Sn",GoiTat:"",QuocGia:"Vit Nam",DaiDienPhapLuat:"ng Hunh Quang Bu",LinhVucHoatDong:"Nng lng, vt liu mi",TenDuAnDauTu:"Nh my sn xut Pin sc Lithium-Ion LiFePO4",MucTieuQuyMoDuAn:["- Thnh lp nh my sx cc loi pin Lithium-ion dng trn (cylindrical cell), dng hp (prismatic) v Pin lithium-ion tch hp s dng trong cc thit b in, xe p v xe hi in, in thoi di ng, PVA, my tch xch tay, UPS, EVs, HEVs theo cng ngh sch, thn thin vi mi trng, cung cp cho th trng trong nc v xut khu.","- Quy m:","+ Giai on u (02 nm sau khi xy dng nh my): 20.000 sn phm,","+ Giai on n nh (04 nm sau khi xy dng nh my): 45.000 sn phm."],DiaChiTrongKhu:"L I4b-1.4 ng N3",DienThoai:"",Fax:"",Website:"",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[719.5625,559.25],[713.4375,553.875],[708.6875,555.875],[704.4375,557.375],[700.5625,558.75],[705.5625,563.625],[708.5625,564.75],[719.5625,559.25]]]}},{type:"Feature",id:"Cng ty TNHH MTV Nh my United Healthcare",properties:{name:"I4b",gateway:[624.359375,600.84375],data:{ID:42,TenDoanhNghiep:"Cng ty TNHH MTV Nh my United Healthcare",GoiTat:"United Healthcare Factory",QuocGia:"Vit Nam",DaiDienPhapLuat:"ng V Xun Anh Tun - Ch tch kim Gim c",LinhVucHoatDong:"Cng ngh sinh hc",TenDuAnDauTu:"Nh my United Healthcare",MucTieuQuyMoDuAn:["a) Mc tiu: u t xy dng nh my sx stent mch vnh ti VN theo tiu chun tin tin TG (tiu chun ca M), gi thnh ph hp, thay th hng nhp khu v hng n xut khu.","b) Quy m:","- Giai on I (2014 - 2015): K hoch sn xut 12.000 n v sn phm/nm (lng nong ng mch vng s dng trong tim mch).","- Giai on II (2015 - 2062): K hoch sn xut 47.000 n v/nm (ng nong mch s dng trong mch mu, cc loi trang thit b v dng c y t khc)."],DiaChiTrongKhu:"L I-4b-1.3, ng N3",DienThoai:"62644964",Fax:"62644967",Website:"",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[621.1875,603.125],[628.0625,598.875],[651.3125,620.875],[643.1875,626.5],[621.1875,603.125]]]}},{type:"Feature",id:"Cng ty TNHH MTV RKW Lotus Chu ",properties:{name:"I4b",gateway:[615.640625,606.40625],data:{ID:54,TenDoanhNghiep:"Cng ty TNHH MTV RKW Lotus Chu ",GoiTat:"RKW Lotus Asia Co., Ltd",QuocGia:"Singapore",DaiDienPhapLuat:"ng Nguyn Nh Khu - Gim c iu hnh",LinhVucHoatDong:"Nng lng, vt liu mi",TenDuAnDauTu:"Trung tm nghin cu, pht trin Cng ngh v Sn xut mng / sn phm t mng polyolefin (PE/PP)",MucTieuQuyMoDuAn:["Xy dng mt trong nhng nh my ln nht ca tp on RKW SE  nghin cu, sn xut, kinh doanh sn phm mng nha thot hi CNC dng trong y t, v sinh, cng nghip ng gi bao b bng cht liu vi polymer khng dt, ht nha t phn hy sinh hc v ht nha nano compound nhm thay th hng nhp khu vi gi thnh cnh tranh, phc v cho th trng trong nc t 5%-20% tng sn lng sn phm v xut khu t 80%-95% tng sn lng sn phm ca nh my"],DiaChiTrongKhu:"L I-4b-4, ng N3",DienThoai:"38776470",Fax:"38761815",Website:"http://www.rkw-lotus.com/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[614.5625,610.25],[615.6875,606.375],[620.8125,603.125],[643.3125,626.375],[635.4375,631.375],[614.5625,610.25]]]}},{type:"Feature",id:"Cng ty TNHH Datalogic Vit Nam",properties:{name:"I4b",gateway:[610.109375,622.375],data:{ID:23,TenDoanhNghiep:"Cng ty TNHH Datalogic Vit Nam",GoiTat:"Datalogic Vietnam LLC",QuocGia:"",DaiDienPhapLuat:"ng John Bradford West - Tng Gim c",LinhVucHoatDong:"Vi in t-CNTT- vin thng",TenDuAnDauTu:"Cng ty TNHH Datalogic Vit Nam",MucTieuQuyMoDuAn:["- Thit k v sn xut cc thit b thu thp d liu t ng ngoi vi v phn mm do doanh nghip sn xut (sn phm, ph kin, linh kin v cc linh kin c lp rp) bao gm thit b c m vch cm tay, thit b c m vch gn c nh v my tnh di ng.","- Cung cp cc dch v sa cha c bo hnh v khng bo hnh i vi cc sn phm ca Datalogic c sn xut trong Vit Nam v ngoi Vit Nam bi mt trong nhng cng ty thuc tp on Datalogic (cc cng ty thnh vin vi Datalogic Scanning Vit Nam); Cung cp dch v nghin cu & pht trin (lin quan n thit b thu thp d liu t ng, thit b c m vch cm tay, thit b c m vch kiu trnh din, thit b c m vch mt mt, my qut quang hc, my qut/o quang hc, thit b d liu u cui cm tay, my tnh di ng, my scan RFID, cm bin o lng, cm bin tm nhn, cm bin quang in, my nh du sn phm bng tia laze, h thng nhn din vt th, h thng ph theo di vt th, v h thng ph thc hin x l v loi tr vt th cung cp cho cc cng ty thnh vin vi Datalogic Vit Nam); Cung cp dch v cng ngh thng tin cho cc cng ty thnh vin vi Datalogic Vit Nam bao gm dch v t vn lin quan n vic ci t phn cng my vi tnh, dch v t vn phn mm v h thng, dch v phn tch h thng, dch v thit k h thng, dch v lp trnh v dch v bo tr h thng.","- Thc hin quyn xut nhp khu cc b phn, sn phm, ph kin, linh kin v cc linh kin c lp rp c m HS thuc nhm 3403, 3506, 3910, 3919, 3920, 3921, 3923, 3926, 4008, 4016, 4017, 4202, 4415, 4812, 4816, 4819, 4821, 4823, 4907, 4908, 4911, 5603, 5609, 5806, 6202, 6305, 6307, 7006, 7009, 7312, 7318, 7320, 7326, 7410, 7419, 7616, 7907, 8203, 8302, 8310, 8421, 8423, 8424, 8471, 8472, 8473, 8479, 8480, 8501, 8504, 8505, 8506, 8507, 8517, 8518, 8523, 8528, 8529, 8531, 8532, 8533, 8534, 8536, 8537, 8541, 8542, 8543, 8544, 8546, 9002."],DiaChiTrongKhu:"L I-4b",DienThoai:"",Fax:"37308482",Website:"http://www.datalogic.com/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[616.8125,631.375],[610.0625,626.75],[614.4375,611.125],[627.5625,623.75],[616.8125,631.375]]]}},{type:"Feature",id:"Cng ty TNHH Gii php in t T.C Vit Nam",properties:{name:"I4b",gateway:[609.1875,623.125],data:{ID:28,TenDoanhNghiep:"Cng ty TNHH Gii php in t T.C Vit Nam",GoiTat:"T.C Electronics",QuocGia:"Singapore",DaiDienPhapLuat:"ng Hunh Quc Giang - Gim c iu hnh",LinhVucHoatDong:"Vi in t-CNTT- vin thng",TenDuAnDauTu:"Cng ty TNHH Gii php in t T.C Vit Nam",MucTieuQuyMoDuAn:["- Thnh lp nh my chuyn sn xut sn phm t CN c Cty TC Electronics Solutions nghin cu thit k hoc t CN c chuyn giao bao gm h thng thit b truyn hnh  phn gii cao HD, IPTV vi CN tin tin nht trn TG hin nay dng cho xut khu (70% th trng Chu u, M v N) v th trng ni a (30%) thay th cc sn phm hin nay phi nhp khu hon ton.","- Thc hin chuyn giao CNC, tin tin t M, Ty Ban Nha, Nht Bn vo VN nhm sn xut ch to cc h thng, thit b tch hp v thit b u cui truyn hnh  phn gii cao HD-Internet-in thoi vi nng lc sn xut hng nm:","+ My pht HD: 200 b.","+ B iu ch: 1.000 b.","+ Khuch i 2 chiu: 50.000 b.","+ My thu HDTV: 450.000 b."],DiaChiTrongKhu:"L I4-b-6, ng N3",DienThoai:"",Fax:"",Website:"",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[617.0625,631.75],[625.5625,637.875],[635.4375,631.375],[627.5625,623.875],[617.0625,631.75]]]}},{type:"Feature",id:"I-11",properties:{name:"SAMSUNG",gateway:[367.15625,267.4375],data:{ID:37,TenDoanhNghiep:"Cng ty TNHH MTV in t Samsung CE Complex",GoiTat:"SECC",QuocGia:"Singapore",DaiDienPhapLuat:"",LinhVucHoatDong:"Vi in t-CNTT- vin thng",TenDuAnDauTu:"",MucTieuQuyMoDuAn:[],DiaChiTrongKhu:"L I-11, ng D2",DienThoai:"",Fax:"",Website:"",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[296.625,231.25],[199.875,324.75],[296.625,382],[340.625,375.5],[397.875,367.25],[412.375,365.5],[421.875,362.75],[429.125,358.75],[433.875,354.75],[437.875,347.5],[438.875,342.5],[438.125,333.5],[434.625,311.5],[433.125,303.75],[309.875,238.5],[296.625,231.25]]]}},{type:"Feature",id:"I-14.1",properties:{name:"I-14.1",gateway:[263.1875,382.875],data:{ID:14,TenDoanhNghiep:"Cng ty CP kinh doanh Kh ha lng Min Nam (PV GAS SOUTH)",GoiTat:"PV GAS SOUNT",QuocGia:"Vit Nam",DaiDienPhapLuat:"V Qu Hiu",LinhVucHoatDong:"Dch v thng mi",TenDuAnDauTu:"Trm cung cp kh CNG SAMSUNG",MucTieuQuyMoDuAn:["Cung cp kh CNG cho nh my Samsung ti Khu Cng ngh cao TP.HCM vi cng sut d kin 37 triu Nm3/nm"],DiaChiTrongKhu:"L I-14.1, ng D4A",DienThoai:"",Fax:"",Website:"",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[249.125,381.75],[284.875,382.5],[286.125,382],[262.625,368.5],[249.125,381.75]]]}},{type:"Feature",id:"SHTP_Training",properties:{name:"SHTP_Training",gateway:[115.90625,752.203125],data:{ID:77,TenDoanhNghiep:"Trung tm o to Khu CNC",GoiTat:"SHTP Traning",QuocGia:"",DaiDienPhapLuat:"ng Nguyn Minh Thnh - Gim c",LinhVucHoatDong:"o to",TenDuAnDauTu:"",MucTieuQuyMoDuAn:[],DiaChiTrongKhu:"L E1",DienThoai:"",Fax:"",Website:"http://www.shtp-training.edu.vn/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[95.5625,779.9375],[97.5625,772.4375],[100.1875,765.4375],[102.0625,762.3125],[104.0625,759.9375],[106.6875,757.6875],[110.9375,755.0625],[113.5625,754.0625],[114.9375,753.1875],[115.9375,750.6875],[115.3125,746.6875],[113.8125,741.1875],[111.6875,736.6875],[74.9375,770.8125],[95.5625,779.9375]]]}},{type:"Feature",id:"Trng i hc Cng ngh Thnh Ph H Ch Minh (Hutech)",properties:{name:"Trng i hc Cng ngh Thnh Ph H Ch Minh (Hutech)",gateway:[52.6875,763.5],data:{ID:51,TenDoanhNghiep:"Trng i hc Cng ngh Thnh Ph H Ch Minh (Hutech)",GoiTat:"Hutech",QuocGia:"Vit Nam",DaiDienPhapLuat:"ng H c Lc - Hiu trng",LinhVucHoatDong:"o to",TenDuAnDauTu:"Trung tm o to Nhn lc cht lng cao HUTECH (HTC)",MucTieuQuyMoDuAn:["- o to, cung cp nhn lc l cng nhn, k thut vin cho cc DN CNC ti TP.HCM v cc tnh ln cn.","- Xy dng h thng o to ngh hon chnh (chng trnh o to, CSVC. ging vin, nh gi k nng ngh v cung ng L) theo tiu chun quc t.","- Gp phn nng cao cht lng nhn lc c k nng ngh theo tiu chun khu vc v quc t.","- o to kin thc qun l, ng hnh vi cc DN KH-CN trong giai on u thnh lp.","- Nng cao nng lc o to v NCKH cho trng H Hutech."],DiaChiTrongKhu:"Phn khu o to E1 (khi 15-A, 15-B, 15-C)",DienThoai:"35121507",Fax:"35120786",Website:"http://www.hutech.edu.vn/homepage/",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[38.9375,755.5625],[74.4375,770.9375],[90.9375,755.6875],[70.1875,742.0625],[47.9375,751.5625],[41.3125,753.9375],[38.9375,755.5625]]]}},{type:"Feature",id:"Trng i hc Nguyn Tt Thnh",properties:{name:"Trng i hc Nguyn Tt Thnh",gateway:[],data:{ID:52,TenDoanhNghiep:"Trng i hc Nguyn Tt Thnh",GoiTat:"",QuocGia:"Vit Nam",DaiDienPhapLuat:"ng Nguyn Mnh Hng - Hiu trng",LinhVucHoatDong:"o to",TenDuAnDauTu:"Trung Tm o To Cng Ngh Cao i Hc Nguyn Tt Thnh",MucTieuQuyMoDuAn:["a) Mc tiu:","- o to ngun nhn lc cht lng cao trong cc lnh vc CNC: CNTT; CNSH; CN vi in t v t ng ha; C kh chnh xc; CN vt liu mi, CN nano;","- Bi dng kin thc v k nng chuyn mn cho i ng cn b k thut, cn b qun l, k thut vin  p ng yu cu cng tc ti cc doanh nghip, c bit cc doanh nghip trong lnh vc CNC;","- o to nng cao trnh  cho i ng cn b k thut v cn b qun l  p ng yu cu cng tc ti cc doanh nghip, c bit cc doanh nghip trong lnh vc CNC;","- St hch, chng nhn k nng ngh cho k thut vin theo tiu chun quc gia, v tiu chun quc t m Trng i hc Nguyn Tt Thnh hin ang c mi quan h hp tc: Edexcel (Anh Quc); City & Guilds (Anh Quc); i hc Meiho (i Loan); i hc Nanjeon (i Loan); i hc AEU (Malaysia); T chc GTZ (c); T chc Koica  Hn Quc.","b) Quy m:","- o to ngn hn k nng ngh nghip v cp nht cc cng ngh tin tin, hin i ca khu vc v th gii khong 2.000 Cn b k thut v cn b qun l, cc gio vin dy ngh/nm;","- o to di hn k thut vin do cc t chc gio dc dy ngh quc t cp bng: khong 1.200 k thut vin/nm; - o to sau i hc lnh vc cng ngh cao: 250 thc s/nm (k t nm th 3 i vo hot ng); 25 tin s/nm (k t nm th 5 i vo hot ng)."],DiaChiTrongKhu:"Phn khu o to E1A",DienThoai:"",Fax:"",Website:"",TaiLieuDinhKem:""}},geometry:{type:"Polygon",coordinates:[[[70.3125,741.9375],[108.3125,725.8125],[111.6875,736.3125],[91.1875,755.6875],[70.3125,741.9375]]]}},{type:"Feature",id:"DVCC",properties:{name:"DVCC",gateway:[462.125,526.6875]},geometry:{type:"Polygon",coordinates:[[[462.125,526.6875],[470.875,526.9375],[475.75,525.9375],[482.125,522.8125],[484.875,519.5625],[487.25,516.0625],[510.5,505.0625],[509.875,501.0625],[508.5,497.3125],[506.125,493.4375],[494.5,493.3125],[480.75,481.5625],[446.125,499.8125],[445.5,502.6875],[454.625,511.9375],[459.625,519.5625],[462.125,526.6875]]]}},{type:"Feature",id:"NHA-O",properties:{name:"NHA-O",gateway:[431.5,533]},geometry:{type:"Polygon",coordinates:[[[423.25,534.625],[438,530.625],[394,490.125],[386,495.125],[423.25,534.625]]]}}]},window.app=window.app||{},window.app.route=[],window.app.route.push({start:[127.8125,803.125],next:[155.9375,769.5],points:[],length:43.8366998073532}),window.app.route.push({start:[156.0625,769.375],next:[116.0625,752.25],points:[],length:43.5116722845721}),window.app.route.push({start:[155.96875,769.46875],next:[229.234375,745.703125],points:[[161.15625,763.21875],[165.71875,759.90625],[172.59375,756.84375]],length:79.01264192021586}),window.app.route.push({start:[229.296875,745.671875],next:[230.890625,748.921875],points:[],length:3.6197429553077383}),window.app.route.push({start:[230.859375,748.921875],next:[221.984375,750.921875],points:[],length:9.09756148646438}),window.app.route.push({start:[221.9765625,750.9140625],next:[222.4140625,752.5390625],points:[[221.9765625,750.9140625]],length:1.6828640022295325}),window.app.route.push({start:[221.9609375,750.9453125],next:[190.7109375,757.0234375],points:[[221.9609375,750.9453125]],length:31.835610619487497}),window.app.route.push({start:[190.7265625,757.0078125],next:[191.2109375,758.6171875],points:[[190.7265625,757.0078125]],length:1.680686476190607}),window.app.route.push({start:[229.2578125,745.6953125],next:[296.71875,732.59375],points:[],length:68.72138697902068}),window.app.route.push({start:[296.7421875,732.5859375],next:[298.15625,736.15625],points:[[296.7421875,732.5859375]],length:3.8401437605332562}),window.app.route.push({start:[298.15625,736.03125],next:[265.09375,742.65625],points:[],length:33.719720213103784}),window.app.route.push({start:[265.15625,742.59375],next:[265.59375,744.40625],points:[],length:1.8645542362720373}),window.app.route.push({start:[296.7265625,732.609375],next:[302.7421875,731.359375],points:[[296.7265625,732.609375]],length:6.144122731572425}),window.app.route.push({start:[298.140625,736.09375],next:[308.859375,786.4375],points:[[301.421875,743.90625],[309.53125,763.3125],[310.84375,769.4375],[310.90625,777],[310.546875,781.3125]],length:53.055980322195154}),window.app.route.push({start:[308.890625,786.40625],next:[311.078125,787.15625],points:[],length:2.3125}),window.app.route.push({start:[308.859375,786.4375],next:[291.640625,810.78125],points:[[308.859375,786.4375],[307.421875,790.34375],[304.265625,795.9375],[299.984375,801.65625],[293.859375,808.34375]],length:30.093505447528976}),window.app.route.push({start:[291.6640625,810.75],next:[290.1796875,809.875],points:[],length:1.7230769398448231}),window.app.route.push({start:[291.6640625,810.75],next:[288.4609375,814.25],points:[],length:4.744471494869054}),window.app.route.push({start:[288.4765625,814.234375],next:[289.8203125,815.375],points:[[288.4765625,814.234375]],length:1.7625803394810122}),window.app.route.push({start:[288.4921875,814.21875],next:[269.3515625,835.078125],points:[],length:28.31037002197693}),window.app.route.push({start:[269.3515625,835.078125],next:[267.4453125,833.890625],points:[],length:2.245872951103869}),window.app.route.push({start:[302.7421875,731.3515625],next:[330.1640625,719.6328125],points:[[308.7421875,729.7890625],[316.0546875,727.3046875],[322.1953125,724.5078125]],length:30.012352117845225}),window.app.route.push({start:[330.1640625,719.6171875],next:[329.2890625,717.9296875],points:[],length:1.9008632907181937}),window.app.route.push({start:[330.1484375,719.6328125],next:[385.453125,681.234375],points:[],length:67.32791740366}),window.app.route.push({start:[385.4765625,681.2265625],next:[384.5859375,679.8828125],points:[],length:1.6121032699938922}),window.app.route.push({start:[385.4609375,681.2109375],next:[398.0546875,672.5078125],points:[],length:15.3083939009984}),window.app.route.push({start:[398.0546875,672.5078125],next:[397.2265625,671.1953125],points:[[398.0546875,672.5078125]],length:1.5519172869792384}),window.app.route.push({start:[398.0390625,672.4765625],next:[407.2109375,666.2578125],points:[],length:11.081342092820933}),window.app.route.push({start:[407.2265625,666.2265625],next:[406.4765625,664.9921875],points:[],length:1.4443620185483277}),window.app.route.push({start:[407.2109375,666.2421875],next:[441.0390625,642.8359375],points:[[407.2109375,666.2421875]],length:41.136292736197376}),window.app.route.push({start:[441.0390625,642.8359375],next:[440.1953125,641.7578125],points:[[441.0390625,642.8359375]],length:1.3690389249853343}),window.app.route.push({start:[440.953125,642.859375],next:[444.203125,640.640625],points:[],length:3.9351431438386077}),window.app.route.push({start:[444.234375,640.578125],next:[447.765625,645.046875],points:[],length:5.695564337710531}),window.app.route.push({start:[447.7578125,645.0390625],next:[435.9296875,653.1328125],points:[],length:14.332247907363485}),window.app.route.push({start:[435.9296875,653.1328125],next:[436.9453125,654.3671875],points:[],length:1.598491720732391}),window.app.route.push({start:[435.9453125,653.1328125],next:[428.421875,658.453125],points:[],length:9.214544856587464}),window.app.route.push({start:[428.4296875,658.4453125],next:[344.40625,716.09375],points:[[410.71875,670.59375],[379.34375,692.03125]],length:101.89852118120058}),window.app.route.push({start:[344.3984375,716.0859375],next:[345.0703125,716.9453125],points:[[344.3984375,716.0859375]],length:1.0908443547316913}),window.app.route.push({start:[428.3828125,658.4765625],next:[440.2265625,667.4296875],points:[],length:14.846981556132041}),window.app.route.push({start:[440.2265625,667.4296875],next:[438.7734375,669.1328125],points:[],length:2.2387958886977617}),window.app.route.push({start:[440.1796875,667.4453125],next:[447.5546875,672.8828125],points:[],length:9.162806952566445}),window.app.route.push({start:[447.5546875,672.8828125],next:[446.2578125,674.4609375],points:[],length:2.042636355607625}),window.app.route.push({start:[447.5703125,672.8984375],next:[449.9609375,674.6328125],points:[],length:2.9534970003793806}),window.app.route.push({start:[449.9609375,674.6328125],next:[451.6796875,673.5390625],points:[],length:2.0372507516258276}),window.app.route.push({start:[449.9609375,674.6171875],next:[456.2265625,679.2578125],points:[],length:7.797015905540401}),window.app.route.push({start:[456.2421875,679.2578125],next:[457.7890625,680.3828125],points:[],length:1.9127067902909216}),window.app.route.push({start:[457.8046875,680.3828125],next:[456.2734375,681.8671875],points:[],length:2.1326264799830748}),window.app.route.push({start:[457.8046875,680.3984375],next:[464.3671875,679.4921875],points:[[460.2734375,682.2734375]],length:8.049212249766864}),window.app.route.push({start:[464.3828125,679.4765625],next:[465.3359375,680.5859375],points:[],length:1.46258680297957}),window.app.route.push({start:[464.3828125,679.5078125],next:[480.9765625,667.9921875],points:[],length:20.198073130948035}),window.app.route.push({start:[480.9765625,667.9921875],next:[474.3828125,666.8359375],points:[[478.15625,666.21875],[475.4609375,666.2578125]],length:7.250496908083104}),window.app.route.push({start:[474.3828125,666.8359375],next:[473.0703125,665.4296875],points:[],length:1.9235891745640492}),window.app.route.push({start:[474.3984375,666.8203125],next:[456.2265625,679.2578125],points:[],length:22.020636849683186}),window.app.route.push({start:[480.921875,668.015625],next:[495.3359375,673.7890625],points:[[482.828125,669.078125],[484.640625,670.078125],[486.921875,671.109375],[489.765625,672.359375],[492.828125,673.234375]],length:15.615757746314083}),window.app.route.push({start:[495.3359375,673.7890625],next:[495.2109375,675.3984375],points:[],length:1.6142220697986382}),window.app.route.push({start:[495.3359375,673.8046875],next:[509.890625,682.265625],points:[[498.8671875,674.1328125],[499.8359375,674.4140625]],length:17.31231957472025}),window.app.route.push({start:[509.921875,682.265625],next:[511.296875,681.046875],points:[],length:1.8373830745111375}),window.app.route.push({start:[509.984375,682.265625],next:[518.859375,689.296875],points:[],length:11.32272500604426}),window.app.route.push({start:[518.859375,689.296875],next:[520.296875,688.015625],points:[],length:1.925618812875487}),window.app.route.push({start:[518.859375,689.265625],next:[534.4609375,701.5078125],points:[],length:19.8312860709174}),window.app.route.push({start:[534.4609375,701.5078125],next:[571.546875,677.265625],points:[],length:44.306324774675936}),window.app.route.push({start:[571.546875,677.265625],next:[571.546875,677.265625],points:[],length:0}),window.app.route.push({start:[571.546875,677.234375],next:[561.7890625,662.2890625],points:[[574.890625,675.171875],[576.046875,674.296875],[576.640625,673.421875],[576.578125,672.296875],[576.140625,670.828125],[574.390625,669.421875]],length:25.820601585863905}),window.app.route.push({start:[561.7890625,662.2890625],next:[562.8203125,660.7578125],points:[[561.7890625,662.2890625]],length:1.8461319359677413}),window.app.route.push({start:[561.7890625,662.2890625],next:[547.421875,654.890625],points:[[561.7890625,662.2890625],[552.046875,657.265625],[549.296875,655.921875],[548.078125,655.296875]],length:16.16330059880377}),window.app.route.push({start:[547.421875,654.890625],next:[547.578125,653.453125],points:[[547.421875,654.890625]],length:1.4459669126574093}),window.app.route.push({start:[547.4453125,654.8828125],next:[532.0546875,659.7109375],points:[[545.3515625,654.3515625],[542.9765625,654.1796875],[539.9765625,654.3359375],[538.390625,655.078125],[537.296875,655.671875]],length:17.158649396016898}),window.app.route.push({start:[532.0546875,659.7109375],next:[533.8203125,660.9921875],points:[],length:2.1815208463649847}),window.app.route.push({start:[532.0703125,659.7109375],next:[528.4453125,662.6484375],points:[],length:4.66578302645976}),window.app.route.push({start:[528.4453125,662.6484375],next:[529.8046875,664.0859375],points:[],length:1.9784606745207245}),window.app.route.push({start:[397.9375,672.625],next:[516.9375,592.3125],points:[[398.9375,673.3125]],length:144.33934926488482}),window.app.route.push({start:[517.1875,592.0625],next:[521.5625,591.8125],points:[],length:4.382137035739526}),window.app.route.push({start:[521.8125,591.8125],next:[519.3125,597.6875],points:[],length:6.384796394561067}),window.app.route.push({start:[519.3125,597.6875],next:[520.671875,598.453125],points:[],length:1.560154489545827}),window.app.route.push({start:[519.40625,597.71875],next:[517.40625,602.15625],points:[],length:4.867381868109384}),window.app.route.push({start:[517.40625,602.15625],next:[512.40625,600.84375],points:[],length:5.169396120438054}),window.app.route.push({start:[512.40625,600.84375],next:[494.28125,613.40625],points:[],length:22.052937020950292}),window.app.route.push({start:[494.28125,613.40625],next:[495.03125,614.40625],points:[],length:1.25}),window.app.route.push({start:[517.3125,591.9375],next:[567.6875,557.3125],points:[],length:61.12717276301923}),window.app.route.push({start:[567.8125,557.3125],next:[571.4375,559.9375],points:[],length:4.475628447492039}),window.app.route.push({start:[571.5625,559.8125],next:[616.15625,600.90625],points:[[567.59375,561.40625],[552.78125,572.21875],[563.09375,580.03125],[573.59375,585.46875],[598.84375,597.90625]],length:93.095397940164}),window.app.route.push({start:[616.21875,600.90625],next:[624.28125,600.71875],points:[[619.53125,600.71875],[622.09375,599.65625]],length:8.523729544936232}),window.app.route.push({start:[624.2890625,600.7109375],next:[615.6328125,606.3671875],points:[[621.1015625,601.6953125],[617.4765625,603.9296875],[615.3984375,605.5078125]],length:11.094514650562118}),window.app.route.push({start:[615.3984375,605.5390625],next:[611.6328125,616.0546875],points:[[613.5546875,610.1484375],[612.7109375,612.9765625]],length:11.177227601290879}),window.app.route.push({start:[611.6484375,616.0546875],next:[610.09375,622.21875],points:[],length:6.357099946246126}),window.app.route.push({start:[610.03125,622.21875],next:[609.15625,623.09375],points:[],length:1.2374368670764582}),window.app.route.push({start:[622.140625,599.671875],next:[683.4375,560.9375],points:[[633.890625,591.921875],[666.1875,570.6875],[676.8125,563.9375]],length:72.58822453334622}),window.app.route.push({start:[683.4375,560.8125],next:[704.46875,557.28125],points:[[694.9375,558.4375],[703.8125,555.6875]],length:22.757549638751236}),window.app.route.push({start:[703.8203125,555.6953125],next:[734.90625,540.90625],points:[[714.234375,551.640625],[725.90625,546.84375],[731.53125,543.21875]],length:34.57782524419361}),window.app.route.push({start:[734.96875,540.90625],next:[741.84375,550.84375],points:[[745.03125,548.59375]],length:16.56462200210016}),window.app.route.push({start:[567.734375,557.296875],next:[574.890625,552.171875],points:[],length:8.802132642859911}),window.app.route.push({start:[574.921875,552.078125],next:[573.109375,550.515625],points:[],length:2.3930237148845808}),window.app.route.push({start:[574.9140625,552.1328125],next:[618.265625,519.640625],points:[[619.6875,521.4375]],length:56.57640996305661}),window.app.route.push({start:[619.703125,521.421875],next:[655.203125,497.296875],points:[],length:42.92162188221689}),window.app.route.push({start:[655.234375,497.296875],next:[634.546875,518.765625],points:[[657.640625,499.140625],[647.078125,506.609375],[634.578125,515.359375],[632.296875,516.984375]],length:36.896509683565526}),window.app.route.push({start:[657.703125,499.140625],next:[632.296875,517.046875],points:[],length:31.08233144609651}),window.app.route.push({start:[632.328125,517.015625],next:[606.546875,534.828125],points:[],length:31.336209212546752}),window.app.route.push({start:[606.546875,534.828125],next:[608.421875,536.578125],points:[],length:2.564785566085399}),window.app.route.push({start:[606.640625,534.796875],next:[576.609375,555.203125],points:[],length:36.30827750837266}),window.app.route.push({start:[576.671875,555.171875],next:[579.109375,556.859375],points:[],length:2.9646353064078554}),window.app.route.push({start:[655.234375,497.265625],next:[655.796875,483.171875],points:[],length:14.104970588856256}),window.app.route.push({start:[655.859375,483.171875],next:[616.21875,450.28125],points:[[654.171875,480.203125],[642.984375,472.078125],[623.03125,456.53125]],length:51.781526373831994}),window.app.route.push({start:[616.28125,450.28125],next:[613.34375,451.65625],points:[],length:3.2433826863322803}),window.app.route.push({start:[616.21875,450.28125],next:[558.59375,391.90625],points:[[593.28125,429.21875],[577.84375,412.84375],[561.84375,395.46875]],length:82.08747372509342}),window.app.route.push({start:[558.6015625,391.8984375],next:[545.90625,377.59375],points:[],length:19.125769107288534}),window.app.route.push({start:[545.90625,377.53125],next:[542.96875,379.03125],points:[],length:3.2983187004896903}),window.app.route.push({start:[545.96875,377.59375],next:[527.40625,358.21875],points:[],length:26.83201504266871}),window.app.route.push({start:[527.40625,358.21875],next:[524.46875,359.78125],points:[],length:3.327207913551541}),window.app.route.push({start:[527.53125,358.34375],next:[497.96875,335.96875],points:[[510.40625,344.21875]],length:37.123619182690256}),window.app.route.push({start:[497.96875,335.96875],next:[495.96875,337.96875],points:[],length:2.8284271247461903}),window.app.route.push({start:[558.34375,391.65625],next:[517.09375,406.46875],points:[[545.21875,395.65625],[528.65625,400.84375]],length:43.93502227838913}),window.app.route.push({start:[517.09375,406.46875],next:[503.03125,416.96875],points:[],length:17.550040064056834}),window.app.route.push({start:[503.03125,416.96875],next:[501.46875,416.03125],points:[],length:1.8221724671391564}),window.app.route.push({start:[497.96875,335.90625],next:[457.59375,313.78125],points:[[468.71875,319.84375]],length:46.039772709586934}),window.app.route.push({start:[457.59375,313.71875],next:[500.46875,333.59375],points:[[459.53125,311.40625]],length:49.5804282424465}),window.app.route.push({start:[500.53125,333.59375],next:[517.40625,345.21875],points:[],length:20.491614138471377}),window.app.route.push({start:[517.40625,345.21875],next:[519.46875,343.96875],points:[],length:2.4117226726968424}),window.app.route.push({start:[517.46875,345.15625],next:[556.96875,384.59375],points:[[532.21875,357.96875]],length:55.88952065019291}),window.app.route.push({start:[557.03125,384.59375],next:[559.53125,383.59375],points:[],length:2.692582403567252}),window.app.route.push({start:[655.28125,497.28125],next:[680.03125,480.03125],points:[[661.15625,492.28125],[660.78125,489.78125],[661.03125,487.46875],[662.15625,485.28125],[663.46875,484.03125],[667.03125,482.84375],[670.53125,482.78125],[673.78125,483.71875]],length:34.73592273723784}),window.app.route.push({start:[680.03125,480.03125],next:[720.46875,452.03125],points:[[705.84375,462.09375]],length:49.185399245747874}),window.app.route.push({start:[720.46875,451.96875],next:[709.09375,443.40625],points:[],length:14.23752194906122}),window.app.route.push({start:[709.09375,443.40625],next:[710.21875,442.15625],points:[],length:1.6817030058842137}),window.app.route.push({start:[709.140625,443.390625],next:[677.96875,420.21875],points:[],length:38.840978129177564}),window.app.route.push({start:[677.96875,420.21875],next:[679.34375,418.71875],points:[],length:2.0348525745124633}),window.app.route.push({start:[720.40625,452.09375],next:[761.34375,423.71875],points:[],length:49.80983368020817}),window.app.route.push({start:[761.40625,423.59375],next:[867.6875,378.9375],points:[[793.4375,403.4375],[818.8125,391.9375],[841.3125,384.6875]],length:116.33843196029298}),window.app.route.push({start:[867.8125,378.9375],next:[867.6875,378.0625],points:[],length:.8838834764831844}),window.app.route.push({start:[867.7578125,378.9140625],next:[937.53125,376.34375],points:[[883.515625,376.765625],[897.53125,375.78125],[915.34375,375.28125]],length:69.98619084957713}),window.app.route.push({start:[937.59375,376.28125],next:[868.15625,382.03125],points:[[936.40625,379.53125],[929.21875,378.71875],[909.34375,378.21875],[887.40625,379.46875],[874.34375,381.03125]],length:71.97120898919083}),window.app.route.push({start:[558.3828125,391.6484375],next:[644.34375,345.65625],points:[[566.90625,388.53125],[608.15625,372.09375],[611.53125,370.53125]],length:98.37469094102275}),window.app.route.push({start:[644.34375,345.65625],next:[596.46875,314.84375],points:[[623.78125,328.21875],[616.34375,322.84375],[605.03125,317.59375]],length:57.60184675989575}),window.app.route.push({start:[596.46875,314.84375],next:[595.65625,316.71875],points:[],length:2.043472840533977}),window.app.route.push({start:[457.609375,313.671875],next:[368.4375,266.5625],points:[[427.0625,297.8125],[372.1875,268.6875]],length:100.8538345965905}),window.app.route.push({start:[368.4375,266.5625],next:[367.28125,267.40625],points:[],length:1.4313728113248483}),window.app.route.push({start:[373.78125,269.53125],next:[376.09375,267.21875],points:[],length:3.2703688629877825}),window.app.route.push({start:[376.09375,267.21875],next:[381.59375,270.03125],points:[],length:6.177390731530587}),window.app.route.push({start:[381.59375,270.03125],next:[383.03125,268.59375],points:[],length:2.032931995911324}),window.app.route.push({start:[457.71875,313.78125],next:[373.90625,269.46875],points:[],length:94.80576360380206}),window.app.route.push({start:[368.40625,266.53125],next:[249.4375,203.4375],points:[],length:134.66396981236295}),window.app.route.push({start:[249.6875,203.3125],next:[251.8125,201.0625],points:[],length:3.094854600784987}),window.app.route.push({start:[251.8125,201.0625],next:[272.90625,212.34375],points:[],length:23.92097177426118}),window.app.route.push({start:[272.90625,212.34375],next:[274.71875,210.46875],points:[],length:2.6078307556281333}),window.app.route.push({start:[517.15625,592.03125],next:[498.1875,578.5625],points:[],length:23.264150599688783}),window.app.route.push({start:[498.203125,578.546875],next:[441.0625,501.3125],points:[[476.65625,562.65625],[469.53125,554.65625],[463.9375,544.9375],[461.8125,539.3125],[460.8125,531.8125],[459.3125,525.5625],[455.4375,517.3125],[450.5625,510.1875],[444.3125,504.0625]],length:99.46215248382234}),window.app.route.push({start:[440.96875,501.28125],next:[396.1875,442.4375],points:[[433.46875,494.46875],[429.59375,489.34375],[424.6875,479.9375],[420.8125,470.8125],[415.5625,461.4375],[407.8125,451.9375],[403.1875,447.1875]],length:75.17406562978086}),window.app.route.push({start:[396.5625,442.4375],next:[274.9375,384.4375],points:[[379.5625,433.3125],[351.1875,421.6875],[332.4375,409.9375],[313.0625,396.3125],[298.6875,387.3125],[294.5625,384.9375]],length:137.12295977012866}),window.app.route.push({start:[274.9375,384.4375],next:[262.9375,384.4375],points:[],length:12}),window.app.route.push({start:[262.9375,384.4375],next:[263.0625,382.9375],points:[],length:1.505199322349037}),window.app.route.push({start:[517.46875,602.15625],next:[516.21875,604.78125],points:[],length:2.907425837403252}),window.app.route.push({start:[516.21875,604.78125],next:[517.90625,605.28125],points:[],length:1.7600159800410904}),window.app.route.push({start:[516.265625,604.765625],next:[513.453125,611.421875],points:[],length:7.226051502203676}),window.app.route.push({start:[513.453125,611.421875],next:[515.296875,612.015625],points:[],length:1.9369959021639669}),window.app.route.push({start:[513.484375,611.421875],next:[510.171875,621.484375],points:[],length:10.593703908454303}),window.app.route.push({start:[249.53125,203.53125],next:[221.40625,190.90625],points:[],length:30.82865955567968}),window.app.route.push({start:[221.46875,190.84375],next:[204.09375,168.78125],points:[[194.40625,181.15625],[194.21875,180.40625]],length:44.77031278053318}),window.app.route.push({start:[204.09375,168.78125],next:[225.59375,184.65625],points:[],length:26.725748352478366}),window.app.route.push({start:[225.59375,184.65625],next:[225.59375,184.65625],points:[],length:0}),window.app.route.push({start:[225.65625,184.53125],next:[227.40625,183.09375],points:[],length:2.2647088664991797}),window.app.route.push({start:[745.09375,548.65625],next:[753.78125,555.53125],points:[],length:11.078731030673143}),window.app.route.push({start:[753.71875,555.46875],next:[708.15625,586.03125],points:[],length:54.86353809680889}),window.app.route.push({start:[708.15625,586.03125],next:[671.40625,610.15625],points:[],length:43.96109785935742}),window.app.route.push({start:[671.40625,610.15625],next:[637.65625,632.59375],points:[],length:40.52781645055652}),window.app.route.push({start:[637.65625,632.59375],next:[604.46875,654.46875],points:[],length:39.74828023009297}),window.app.route.push({start:[604.46875,654.46875],next:[573.90625,649.28125],points:[],length:30.999621973501547}),window.app.route.push({start:[573.90625,649.28125],next:[574.34375,647.28125],points:[],length:2.0472924192699}),window.app.route.push({start:[344.46875,716.09375],next:[298.28125,736.03125],points:[[334.09375,722.03125],[327.96875,725.78125],[317.65625,730.53125]],length:50.630024087408856}),window.app.route.push({start:[265.15625,742.65625],next:[230.84375,748.90625],points:[[246.15625,745.59375]],length:34.89242988963291}),window.app.route.push({start:[190.59375,756.90625],next:[159.21875,770.78125],points:[[177.53125,758.78125],[169.78125,761.71875],[164.71875,764.78125],[162.46875,767.09375]],length:35.54292673370483}),window.app.route.push({start:[159.28125,770.78125],next:[155.96875,769.40625],points:[],length:3.5865416838508932}),window.app.route.push({start:[159.28125,770.65625],next:[143.40625,789.59375],points:[],length:24.711222779336516}),window.app.route.push({start:[143.40625,789.59375],next:[130.96875,804.15625],points:[[143.40625,789.59375]],length:19.150921975194823}),window.ol={Map:Ts,View:di,proj:{Projection:De},layer:{Vector:el,Image:Rl},source:{Vector:Dl,ImageStatic:Bl},format:{GeoJSON:Zl},style:{Style:Vs,Fill:bs,Stroke:Ls,Text:zs},interaction:{defaults:ys,Select:ic},control:{defaults:ko,Attribution:Lo,FullScreen:ac,ZoomToExtent:wc,ScaleLine:xc},Overlay:fc,Feature:Ds,geom:{MultiLineString:rl}},document.addEventListener("DOMContentLoaded",()=>{if($("#map").on("touchstart",function(t){t.preventDefault()}),window.app.debug=!1,window.app.show_draw_line=!1,window.app.default_routing_start=[129.625,803.125],window.app.direction_data={from:null,to:null},window.QueryString&&window.QueryString.long&&window.QueryString.lat){const t=parseFloat(window.QueryString.long),e=parseFloat(window.QueryString.lat);t&&e&&(window.app.default_routing_start=[t,e])}window.QueryString&&window.QueryString.__debug&&("1"===window.QueryString.__debug?window.app.debug=!0:window.app.debug=!1),window.QueryString&&window.QueryString.__draw&&("1"===window.QueryString.__draw?window.app.show_draw_line=!0:window.app.show_draw_line=!1),window.app.vector_direction=null,window.app.debug&&(document.getElementById("debug").style.display="block");const e=[0,0,1024,968];$("#from_place").typeahead({source:window.app.enterprise_geodata.features,autoSelect:!0,displayText:function(t){return void 0!==t&&void 0!==t.properties&&void 0!==t.properties.data&&void 0!==t.properties.data.TenDoanhNghiep?t.properties.data.TenDoanhNghiep:""},afterSelect:function(t){t&&(window.app.direction_input.from={id:t.id,geoloc:t.properties.gateway||[],information:t.properties.data},window.app.markAPinTo(t))}}),$("#to_place").typeahead({source:window.app.enterprise_geodata.features,autoSelect:!0,displayText:function(t){return void 0!==t&&void 0!==t.properties&&void 0!==t.properties.data&&void 0!==t.properties.data.TenDoanhNghiep?t.properties.data.TenDoanhNghiep:""},afterSelect:function(t){t&&(window.app.direction_input.to={id:t.id,geoloc:t.properties.gateway||[],information:t.properties.data},window.app.markAPinTo(t))}});const n=new De({code:"xkcd-image",units:"pixels",extent:e}),i=new el({source:new Dl({url:"./assets/data.geojson",format:new Zl}),style:new Vs({fill:new bs({color:"rgba(255, 255, 255, 0.1)"}),stroke:new Ls({color:"#319FD3",width:.5})})});new ic({wrapX:!1});const o=new di({projection:n,center:window.app.default_routing_start,zoom:2.5,maxZoom:8,rotation:0}),s=new Ts({target:"map",interactions:ys({pinchRotate:!1,altShiftDragRotate:!1}),layers:[new Rl({source:new Bl({attributions:"ISLab",url:"./assets/images/kcnc_bando.jpg",projection:n,imageExtent:e})}),i],controls:ko({attribution:!0,attributionOptions:{collapsible:!0},rotate:!1}).extend([new window.app.RotateNorthControl]),view:o});window.map=s,window.view=o;const r=s.getLayers().item(1).getSource();console.log("exxxxxxxx",r),s.addControl(new window.app.RotateNorthControl),s.addControl(new ac),s.addControl(new wc({extent:[0,0,1024,760],tipLabel:"Zoom to extent"})),s.addControl(new xc);const a=new el({source:new Dl,map:s});let h;window.app.direction_input={from:{id:"start_point",geoloc:window.app.default_routing_start,information:{TenDoanhNghiep:"V tr hin ti"}},to:null},document.getElementById("from_place").value=window.app.direction_input.from.information.TenDoanhNghiep;const l=new fc({position:window.app.default_routing_start,positioning:"center-center",element:document.getElementById("current_position"),stopEvent:!1});s.addOverlay(l);const c=new fc({position:[window.app.default_routing_start[0],window.app.default_routing_start[1]],element:document.getElementById("current_position_message")});s.addOverlay(c);let u=null;s.on("pointermove",function(t){t.dragging||(s.getEventPixel(t.originalEvent),document.getElementById("pointer_pos").innerHTML="pointer_pos (x, y) = "+t.coordinate.toString())});const g=new fc({element:document.getElementById("popup")});s.addOverlay(g),s.on("click",function(t){document.getElementById("message").innerHTML="(x, y) = "+t.coordinate.toString(),s.removeOverlay(u),u=new fc({position:t.coordinate,positioning:"center-center",element:document.getElementById("gateway_position"),stopEvent:!1}),s.addOverlay(u),function(t){const e=s.forEachFeatureAtPixel(t,function(t){return t});e!==h&&(h&&a.getSource().removeFeature(h),e&&a.getSource().addFeature(e),h=e)}(t.pixel);const e=g.getElement(),n=t.coordinate,i=s.forEachFeatureAtPixel(t.pixel,function(t){return t});if(i){const t=i.getId()+": ("+i.get("gateway")+")";info.value=t,function(t){window.app.direction_input||(window.app.direction_input={}),null===window.app.direction_input.from?window.app.direction_input.from=t:(window.app.direction_input.to,window.app.direction_input.to=t),window.app.debug&&(document.getElementById("info").innerHTML=JSON.stringify(window.app.direction_input)),document.getElementById("from_place").value=window.app.direction_input.from&&window.app.direction_input.from.information?window.app.direction_input.from.information.TenDoanhNghiep:"",document.getElementById("to_place").value=window.app.direction_input.to&&window.app.direction_input.to.information?window.app.direction_input.to.information.TenDoanhNghiep:""}({id:i.getId(),geoloc:i.get("gateway"),information:i.get("data")}),g.setPosition(n);const o=i.get("data");o?($(".enterprise_nodata").hide(),$(".enterprise_info").show(),$("#TenDoanhNghiep").text(o.TenDoanhNghiep||""),$("#TenDuAnDauTu").text(o.TenDuAnDauTu||""),$("#LinhVucHoatDong").text(o.LinhVucHoatDong||""),$("#DiaChiTrongKhu").text(o.DiaChiTrongKhu||""),$("#DienThoai").text(o.DienThoai||""),$("#Website").text(o.Website||"")):($(".enterprise_nodata").show(),$(".enterprise_info").hide()),$(e).popover({placement:"top",animation:!0,html:!0,content:'<div class="popup-button"><a href="#" class="btn btn-custom" id="view_info" onClick=\'modalView("'+i.getId()+'", '+JSON.stringify(i.get("data"))+', event)\'>Thng tin</a>                    <a href="#" id="get_direction" class="btn btn-custom" onClick="addSearchPlace(\''+i.getId()+"', "+i.get("gateway")+', event)">Ch ng n y</a></div>'}),$(e).popover("show")}}),$("#from_place").change(function(t){$(this).val()||(window.app.direction_input.from=null)}),$("#to_place").change(function(t){$(this).val()||(window.app.direction_input.to=null)}),$.get("./assets/data.geojson",function(t){try{const e=JSON.parse(t);console.log(e);const n=e.features;for(const t in n){const e=n[t].geometry.coordinates[0],i=window.app.getCenterFromCoordinate(e),o=document.createElement("span");o.className="enterprise_pin";const r=new fc({position:i,positioning:"center-center",element:o,stopEvent:!1});s.addOverlay(r)}}catch(e){console.log("data error")}});const d=/\S/;function p(t){return t.replace(d,function(t){return t.toUpperCase()})}if("webkitSpeechRecognition"in window){const t=new webkitSpeechRecognition;t.lang="vi-VN",t.continuous=!1,t.interimResults=!1;let e=!1,n=null;t.onend=function(){e=!1,$("#for_from").removeClass("loading"),$("#for_to").removeClass("loading")},t.onstart=function(){e=!0},t.onerror=function(t){console.log(t.error)},t.onresult=function(t){let e="";for(let n=t.resultIndex;n<t.results.length;++n)t.results[n].isFinal&&(e=p(t.results[n][0].transcript));e=e.trim(),$("#"+n).val(e),$("#"+n).trigger("change")},$("#for_from").click(function(){e?t.stop():(n="from_place",t.start(),$(this).addClass("loading"))}),$("#for_to").click(function(){e?t.stop():(n="to_place",t.start(),$(this).addClass("loading"))})}else console.log("Speech recognition not available");window.addSearchPlace=window.app.addSearchPlace=function(t,e,n,i){window.getDirectionTo(e,n,i)},window.app.show_draw_line&&function(e,n){let i=Promise.resolve();if(n&&n.length>0){let e=function(t){return Promise.all(t.map(t=>Promise.resolve(t).then(t=>({status:"fulfilled",value:t}),t=>({status:"rejected",reason:t}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=(null==o?void 0:o.nonce)||(null==o?void 0:o.getAttribute("nonce"));i=e(n.map(e=>{if((e=function(t){return"/shtp-maps/"+t}(e))in t)return;t[e]=!0;const n=e.endsWith(".css"),i=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${i}`))return;const o=document.createElement("link");return o.rel=n?"stylesheet":"modulepreload",n||(o.as="script"),o.crossOrigin="",o.href=e,s&&o.setAttribute("nonce",s),document.head.appendChild(o),n?new Promise((t,n)=>{o.addEventListener("load",t),o.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function o(t){const e=new Event("vite:preloadError",{cancelable:!0});if(e.payload=t,window.dispatchEvent(e),!e.defaultPrevented)throw t}return i.then(t=>{for(const e of t||[])"rejected"===e.status&&o(e.reason);return e().catch(o)})}(async()=>{const{default:t}=await import("./Draw-V_kax7x4.js");return{default:t}},[]).then(({default:t})=>{const e=document.getElementById("type");let n;e.onchange=function(){s.removeInteraction(n),function(){const o=e.value;""!==o&&(n=new t({source:i.getSource(),type:o}),s.addInteraction(n),n.on("drawend",function(t){const e=window.app.getBlockPoint(t);e&&window.app.arrayPointToRouterGeneratorTools(e)}))}()}})});export{e as B,f as E,c as F,il as G,Ro as I,Ms as L,ho as M,Ho as P,In as S,l as T,el as V,an as a,Dl as b,ht as c,Fn as d,Bo as e,_t as f,qo as g,ao as h,It as i,J as j,Xe as k,Ds as l,Un as m,Qo as n,Mn as o,al as p,rl as q,Dn as r,Be as s,ll as t,ui as u,zo as v,Bs as w,Kt as x,zt as y,Ot as z};
//# sourceMappingURL=main-Dtx7NePm.js.map
